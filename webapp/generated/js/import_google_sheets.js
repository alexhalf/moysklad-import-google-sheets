function(){var requirejs,require,define;return function(global){function isFunction(e){return ostring.call(e)==="[object Function]"}function isArray(e){return ostring.call(e)==="[object Array]"}function each(e,t){if(e){var n;for(n=0;n<e.length;n+=1)if(e[n]&&t(e[n],n,e))break}}function eachReverse(e,t){if(e){var n;for(n=e.length-1;n>-1;n-=1)if(e[n]&&t(e[n],n,e))break}}function hasProp(e,t){return hasOwn.call(e,t)}function getOwn(e,t){return hasProp(e,t)&&e[t]}function eachProp(e,t){var n;for(n in e)if(hasProp(e,n)&&t(e[n],n))break}function mixin(e,t,n,r){return t&&eachProp(t,function(t,i){if(n||!hasProp(e,i))r&&typeof t=="object"&&t&&!isArray(t)&&!isFunction(t)&&!(t instanceof RegExp)?(e[i]||(e[i]={}),mixin(e[i],t,n,r)):e[i]=t}),e}function bind(e,t){return function(){return t.apply(e,arguments)}}function scripts(){return document.getElementsByTagName("script")}function defaultOnError(e){throw e}function getGlobal(e){if(!e)return e;var t=global;return each(e.split("."),function(e){t=t[e]}),t}function makeError(e,t,n,r){var i=new Error(t+"\nhttp://requirejs.org/docs/errors.html#"+e);return i.requireType=e,i.requireModules=r,n&&(i.originalError=n),i}function newContext(e){function m(e){var t,n;for(t=0;t<e.length;t++){n=e[t];if(n===".")e.splice(t,1),t-=1;else if(n===".."){if(t===0||t===1&&e[2]===".."||e[t-1]==="..")continue;t>0&&(e.splice(t-1,2),t-=2)}}}function g(e,t,n){var r,i,s,u,a,f,l,c,h,p,d,v,g=t&&t.split("/"),y=o.map,b=y&&y["*"];e&&(e=e.split("/"),l=e.length-1,o.nodeIdCompat&&jsSuffixRegExp.test(e[l])&&(e[l]=e[l].replace(jsSuffixRegExp,"")),e[0].charAt(0)==="."&&g&&(v=g.slice(0,g.length-1),e=v.concat(e)),m(e),e=e.join("/"));if(n&&y&&(g||b)){s=e.split("/");e:for(u=s.length;u>0;u-=1){f=s.slice(0,u).join("/");if(g)for(a=g.length;a>0;a-=1){i=getOwn(y,g.slice(0,a).join("/"));if(i){i=getOwn(i,f);if(i){c=i,h=u;break e}}}!p&&b&&getOwn(b,f)&&(p=getOwn(b,f),d=u)}!c&&p&&(c=p,h=d),c&&(s.splice(0,h,c),e=s.join("/"))}return r=getOwn(o.pkgs,e),r?r:e}function y(e){isBrowser&&each(scripts(),function(t){if(t.getAttribute("data-requiremodule")===e&&t.getAttribute("data-requirecontext")===r.contextName)return t.parentNode.removeChild(t),!0})}function b(e){var t=getOwn(o.paths,e);if(t&&isArray(t)&&t.length>1)return t.shift(),r.require.undef(e),r.makeRequire(null,{skipMap:!0})([e]),!0}function w(e){var t,n=e?e.indexOf("!"):-1;return n>-1&&(t=e.substring(0,n),e=e.substring(n+1,e.length)),[t,e]}function E(e,t,n,i){var s,o,u,a,f=null,l=t?t.name:null,h=e,p=!0,m="";return e||(p=!1,e="_@r"+(d+=1)),a=w(e),f=a[0],e=a[1],f&&(f=g(f,l,i),o=getOwn(c,f)),e&&(f?o&&o.normalize?m=o.normalize(e,function(e){return g(e,l,i)}):m=e.indexOf("!")===-1?g(e,l,i):e:(m=g(e,l,i),a=w(m),f=a[0],m=a[1],n=!0,s=r.nameToUrl(m))),u=f&&!o&&!n?"_unnormalized"+(v+=1):"",{prefix:f,name:m,parentMap:t,unnormalized:!!u,url:s,originalName:h,isDefine:p,id:(f?f+"!"+m:m)+u}}function S(e){var t=e.id,n=getOwn(u,t);return n||(n=u[t]=new r.Module(e)),n}function x(e,t,n){var r=e.id,i=getOwn(u,r);hasProp(c,r)&&(!i||i.defineEmitComplete)?t==="defined"&&n(c[r]):(i=S(e),i.error&&t==="error"?n(i.error):i.on(t,n))}function T(e,t){var n=e.requireModules,r=!1;t?t(e):(each(n,function(t){var n=getOwn(u,t);n&&(n.error=e,n.events.error&&(r=!0,n.emit("error",e)))}),r||req.onError(e))}function N(){globalDefQueue.length&&(apsp.apply(l,[l.length,0].concat(globalDefQueue)),globalDefQueue=[])}function C(e){delete u[e],delete a[e]}function k(e,t,n){var r=e.map.id;e.error?e.emit("error",e.error):(t[r]=!0,each(e.depMaps,function(r,i){var s=r.id,o=getOwn(u,s);o&&!e.depMatched[i]&&!n[s]&&(getOwn(t,s)?(e.defineDep(i,c[s]),e.check()):k(o,t,n))}),n[r]=!0)}function L(){var e,n,i=o.waitSeconds*1e3,u=i&&r.startTime+i<(new Date).getTime(),f=[],l=[],c=!1,h=!0;if(t)return;t=!0,eachProp(a,function(e){var t=e.map,r=t.id;if(!e.enabled)return;t.isDefine||l.push(e);if(!e.error)if(!e.inited&&u)b(r)?(n=!0,c=!0):(f.push(r),y(r));else if(!e.inited&&e.fetched&&t.isDefine){c=!0;if(!t.prefix)return h=!1}});if(u&&f.length)return e=makeError("timeout","Load timeout for modules: "+f,null,f),e.contextName=r.contextName,T(e);h&&each(l,function(e){k(e,{},{})}),(!u||n)&&c&&(isBrowser||isWebWorker)&&!s&&(s=setTimeout(function(){s=0,L()},50)),t=!1}function A(e){hasProp(c,e[0])||S(E(e[0],null,!0)).init(e[1],e[2])}function O(e,t,n,r){e.detachEvent&&!isOpera?r&&e.detachEvent(r,t):e.removeEventListener(n,t,!1)}function M(e){var t=e.currentTarget||e.srcElement;return O(t,r.onScriptLoad,"load","onreadystatechange"),O(t,r.onScriptError,"error"),{node:t,id:t&&t.getAttribute("data-requiremodule")}}function _(){var e;N();while(l.length){e=l.shift();if(e[0]===null)return T(makeError("mismatch","Mismatched anonymous define() module: "+e[e.length-1]));A(e)}}var t,n,r,i,s,o={waitSeconds:7,baseUrl:"./",paths:{},bundles:{},pkgs:{},shim:{},config:{}},u={},a={},f={},l=[],c={},h={},p={},d=1,v=1;return i={require:function(e){return e.require?e.require:e.require=r.makeRequire(e.map)},exports:function(e){e.usingExports=!0;if(e.map.isDefine)return e.exports?c[e.map.id]=e.exports:e.exports=c[e.map.id]={}},module:function(e){return e.module?e.module:e.module={id:e.map.id,uri:e.map.url,config:function(){return getOwn(o.config,e.map.id)||{}},exports:e.exports||(e.exports={})}}},n=function(e){this.events=getOwn(f,e.id)||{},this.map=e,this.shim=getOwn(o.shim,e.id),this.depExports=[],this.depMaps=[],this.depMatched=[],this.pluginMaps={},this.depCount=0},n.prototype={init:function(e,t,n,r){r=r||{};if(this.inited)return;this.factory=t,n?this.on("error",n):this.events.error&&(n=bind(this,function(e){this.emit("error",e)})),this.depMaps=e&&e.slice(0),this.errback=n,this.inited=!0,this.ignore=r.ignore,r.enabled||this.enabled?this.enable():this.check()},defineDep:function(e,t){this.depMatched[e]||(this.depMatched[e]=!0,this.depCount-=1,this.depExports[e]=t)},fetch:function(){if(this.fetched)return;this.fetched=!0,r.startTime=(new Date).getTime();var e=this.map;if(!this.shim)return e.prefix?this.callPlugin():this.load();r.makeRequire(this.map,{enableBuildCallback:!0})(this.shim.deps||[],bind(this,function(){return e.prefix?this.callPlugin():this.load()}))},load:function(){var e=this.map.url;h[e]||(h[e]=!0,r.load(this.map.id,e))},check:function(){if(!this.enabled||this.enabling)return;var e,t,n=this.map.id,i=this.depExports,s=this.exports,o=this.factory;if(!this.inited)this.fetch();else if(this.error)this.emit("error",this.error);else if(!this.defining){this.defining=!0;if(this.depCount<1&&!this.defined){if(isFunction(o)){if(this.events.error&&this.map.isDefine||req.onError!==defaultOnError)try{s=r.execCb(n,o,i,s)}catch(u){e=u}else s=r.execCb(n,o,i,s);this.map.isDefine&&s===undefined&&(t=this.module,t?s=t.exports:this.usingExports&&(s=this.exports));if(e)return e.requireMap=this.map,e.requireModules=this.map.isDefine?[this.map.id]:null,e.requireType=this.map.isDefine?"define":"require",T(this.error=e)}else s=o;this.exports=s,this.map.isDefine&&!this.ignore&&(c[n]=s,req.onResourceLoad&&req.onResourceLoad(r,this.map,this.depMaps)),C(n),this.defined=!0}this.defining=!1,this.defined&&!this.defineEmitted&&(this.defineEmitted=!0,this.emit("defined",this.exports),this.defineEmitComplete=!0)}},callPlugin:function(){var e=this.map,t=e.id,n=E(e.prefix);this.depMaps.push(n),x(n,"defined",bind(this,function(n){var i,s,a,f=getOwn(p,this.map.id),l=this.map.name,c=this.map.parentMap?this.map.parentMap.name:null,h=r.makeRequire(e.parentMap,{enableBuildCallback:!0});if(this.map.unnormalized){n.normalize&&(l=n.normalize(l,function(e){return g(e,c,!0)})||""),s=E(e.prefix+"!"+l,this.map.parentMap),x(s,"defined",bind(this,function(e){this.init([],function(){return e},null,{enabled:!0,ignore:!0})})),a=getOwn(u,s.id),a&&(this.depMaps.push(s),this.events.error&&a.on("error",bind(this,function(e){this.emit("error",e)})),a.enable());return}if(f){this.map.url=r.nameToUrl(f),this.load();return}i=bind(this,function(e){this.init([],function(){return e},null,{enabled:!0})}),i.error=bind(this,function(e){this.inited=!0,this.error=e,e.requireModules=[t],eachProp(u,function(e){e.map.id.indexOf(t+"_unnormalized")===0&&C(e.map.id)}),T(e)}),i.fromText=bind(this,function(n,s){var u=e.name,a=E(u),f=useInteractive;s&&(n=s),f&&(useInteractive=!1),S(a),hasProp(o.config,t)&&(o.config[u]=o.config[t]);try{req.exec(n)}catch(l){return T(makeError("fromtexteval","fromText eval for "+t+" failed: "+l,l,[t]))}f&&(useInteractive=!0),this.depMaps.push(a),r.completeLoad(u),h([u],i)}),n.load(e.name,h,i,o)})),r.enable(n,this),this.pluginMaps[n.id]=n},enable:function(){a[this.map.id]=this,this.enabled=!0,this.enabling=!0,each(this.depMaps,bind(this,function(e,t){var n,s,o;if(typeof e=="string"){e=E(e,this.map.isDefine?this.map:this.map.parentMap,!1,!this.skipMap),this.depMaps[t]=e,o=getOwn(i,e.id);if(o){this.depExports[t]=o(this);return}this.depCount+=1,x(e,"defined",bind(this,function(e){this.defineDep(t,e),this.check()})),this.errback?x(e,"error",bind(this,this.errback)):this.events.error&&x(e,"error",bind(this,function(e){this.emit("error",e)}))}n=e.id,s=u[n],!hasProp(i,n)&&s&&!s.enabled&&r.enable(e,this)})),eachProp(this.pluginMaps,bind(this,function(e){var t=getOwn(u,e.id);t&&!t.enabled&&r.enable(e,this)})),this.enabling=!1,this.check()},on:function(e,t){var n=this.events[e];n||(n=this.events[e]=[]),n.push(t)},emit:function(e,t){each(this.events[e],function(e){e(t)}),e==="error"&&delete this.events[e]}},r={config:o,contextName:e,registry:u,defined:c,urlFetched:h,defQueue:l,Module:n,makeModuleMap:E,nextTick:req.nextTick,onError:T,configure:function(e){e.baseUrl&&e.baseUrl.charAt(e.baseUrl.length-1)!=="/"&&(e.baseUrl+="/");var t=o.shim,n={paths:!0,bundles:!0,config:!0,map:!0};eachProp(e,function(e,t){n[t]?(o[t]||(o[t]={}),mixin(o[t],e,!0,!0)):o[t]=e}),e.bundles&&eachProp(e.bundles,function(e,t){each(e,function(e){e!==t&&(p[e]=t)})}),e.shim&&(eachProp(e.shim,function(e,n){isArray(e)&&(e={deps:e}),(e.exports||e.init)&&!e.exportsFn&&(e.exportsFn=r.makeShimExports(e)),t[n]=e}),o.shim=t),e.packages&&each(e.packages,function(e){var t,n;e=typeof e=="string"?{name:e}:e,n=e.name,t=e.location,t&&(o.paths[n]=e.location),o.pkgs[n]=e.name+"/"+(e.main||"main").replace(currDirRegExp,"").replace(jsSuffixRegExp,"")}),eachProp(u,function(e,t){!e.inited&&!e.map.unnormalized&&(e.map=E(t))}),(e.deps||e.callback)&&r.require(e.deps||[],e.callback)},makeShimExports:function(e){function t(){var t;return e.init&&(t=e.init.apply(global,arguments)),t||e.exports&&getGlobal(e.exports)}return t},makeRequire:function(t,n){function s(o,a,f){var l,h,p;return n.enableBuildCallback&&a&&isFunction(a)&&(a.__requireJsBuild=!0),typeof o=="string"?isFunction(a)?T(makeError("requireargs","Invalid require call"),f):t&&hasProp(i,o)?i[o](u[t.id]):req.get?req.get(r,o,t,s):(h=E(o,t,!1,!0),l=h.id,hasProp(c,l)?c[l]:T(makeError("notloaded",'Module name "'+l+'" has not been loaded yet for context: '+e+(t?"":". Use require([])")))):(_(),r.nextTick(function(){_(),p=S(E(null,t)),p.skipMap=n.skipMap,p.init(o,a,f,{enabled:!0}),L()}),s)}return n=n||{},mixin(s,{isBrowser:isBrowser,toUrl:function(e){var n,i=e.lastIndexOf("."),s=e.split("/")[0],o=s==="."||s==="..";return i!==-1&&(!o||i>1)&&(n=e.substring(i,e.length),e=e.substring(0,i)),r.nameToUrl(g(e,t&&t.id,!0),n,!0)},defined:function(e){return hasProp(c,E(e,t,!1,!0).id)},specified:function(e){return e=E(e,t,!1,!0).id,hasProp(c,e)||hasProp(u,e)}}),t||(s.undef=function(e){N();var n=E(e,t,!0),r=getOwn(u,e);y(e),delete c[e],delete h[n.url],delete f[e],eachReverse(l,function(t,n){t[0]===e&&l.splice(n,1)}),r&&(r.events.defined&&(f[e]=r.events),C(e))}),s},enable:function(e){var t=getOwn(u,e.id);t&&S(e).enable()},completeLoad:function(e){var t,n,r,i=getOwn(o.shim,e)||{},s=i.exports;N();while(l.length){n=l.shift();if(n[0]===null){n[0]=e;if(t)break;t=!0}else n[0]===e&&(t=!0);A(n)}r=getOwn(u,e);if(!t&&!hasProp(c,e)&&r&&!r.inited){if(o.enforceDefine&&(!s||!getGlobal(s))){if(b(e))return;return T(makeError("nodefine","No define call for "+e,null,[e]))}A([e,i.deps||[],i.exportsFn])}L()},nameToUrl:function(e,t,n){var i,s,u,a,f,l,c,h=getOwn(o.pkgs,e);h&&(e=h),c=getOwn(p,e);if(c)return r.nameToUrl(c,t,n);if(req.jsExtRegExp.test(e))f=e+(t||"");else{i=o.paths,s=e.split("/");for(u=s.length;u>0;u-=1){a=s.slice(0,u).join("/"),l=getOwn(i,a);if(l){isArray(l)&&(l=l[0]),s.splice(0,u,l);break}}f=s.join("/"),f+=t||(/^data\:|\?/.test(f)||n?"":".js"),f=(f.charAt(0)==="/"||f.match(/^[\w\+\.\-]+:/)?"":o.baseUrl)+f}return o.urlArgs?f+((f.indexOf("?")===-1?"?":"&")+o.urlArgs):f},load:function(e,t){req.load(r,e,t)},execCb:function(e,t,n,r){return t.apply(r,n)},onScriptLoad:function(e){if(e.type==="load"||readyRegExp.test((e.currentTarget||e.srcElement).readyState)){interactiveScript=null;var t=M(e);r.completeLoad(t.id)}},onScriptError:function(e){var t=M(e);if(!b(t.id))return T(makeError("scripterror","Script error for: "+t.id,e,[t.id]))}},r.require=r.makeRequire(),r}function getInteractiveScript(){return interactiveScript&&interactiveScript.readyState==="interactive"?interactiveScript:(eachReverse(scripts(),function(e){if(e.readyState==="interactive")return interactiveScript=e}),interactiveScript)}var req,s,head,baseElement,dataMain,src,interactiveScript,currentlyAddingScript,mainScript,subPath,version="2.1.17",commentRegExp=/(\/\*([\s\S]*?)\*\/|([^:]|^)\/\/(.*)$)/mg,cjsRequireRegExp=/[^.]\s*require\s*\(\s*["']([^'"\s]+)["']\s*\)/g,jsSuffixRegExp=/\.js$/,currDirRegExp=/^\.\//,op=Object.prototype,ostring=op.toString,hasOwn=op.hasOwnProperty,ap=Array.prototype,apsp=ap.splice,isBrowser=typeof window!="undefined"&&typeof navigator!="undefined"&&!!window.document,isWebWorker=!isBrowser&&typeof importScripts!="undefined",readyRegExp=isBrowser&&navigator.platform==="PLAYSTATION 3"?/^complete$/:/^(complete|loaded)$/,defContextName="_",isOpera=typeof opera!="undefined"&&opera.toString()==="[object Opera]",contexts={},cfg={},globalDefQueue=[],useInteractive=!1;if(typeof define!="undefined")return;if(typeof requirejs!="undefined"){if(isFunction(requirejs))return;cfg=requirejs,requirejs=undefined}typeof require!="undefined"&&!isFunction(require)&&(cfg=require,require=undefined),req=requirejs=function(e,t,n,r){var i,s,o=defContextName;return!isArray(e)&&typeof e!="string"&&(s=e,isArray(t)?(e=t,t=n,n=r):e=[]),s&&s.context&&(o=s.context),i=getOwn(contexts,o),i||(i=contexts[o]=req.s.newContext(o)),s&&i.configure(s),i.require(e,t,n)},req.config=function(e){return req(e)},req.nextTick=typeof setTimeout!="undefined"?function(e){setTimeout(e,4)}:function(e){e()},require||(require=req),req.version=version,req.jsExtRegExp=/^\/|:|\?|\.js$/,req.isBrowser=isBrowser,s=req.s={contexts:contexts,newContext:newContext},req({}),each(["toUrl","undef","defined","specified"],function(e){req[e]=function(){var t=contexts[defContextName];return t.require[e].apply(t,arguments)}}),isBrowser&&(head=s.head=document.getElementsByTagName("head")[0],baseElement=document.getElementsByTagName("base")[0],baseElement&&(head=s.head=baseElement.parentNode)),req.onError=defaultOnError,req.createNode=function(e,t,n){var r=e.xhtml?document.createElementNS("http://www.w3.org/1999/xhtml","html:script"):document.createElement("script");return r.type=e.scriptType||"text/javascript",r.charset="utf-8",r.async=!0,r},req.load=function(e,t,n){var r=e&&e.config||{},i;if(isBrowser)return i=req.createNode(r,t,n),i.setAttribute("data-requirecontext",e.contextName),i.setAttribute("data-requiremodule",t),i.attachEvent&&!(i.attachEvent.toString&&i.attachEvent.toString().indexOf("[native code")<0)&&!isOpera?(useInteractive=!0,i.attachEvent("onreadystatechange",e.onScriptLoad)):(i.addEventListener("load",e.onScriptLoad,!1),i.addEventListener("error",e.onScriptError,!1)),i.src=n,currentlyAddingScript=i,baseElement?head.insertBefore(i,baseElement):head.appendChild(i),currentlyAddingScript=null,i;if(isWebWorker)try{importScripts(n),e.completeLoad(t)}catch(s){e.onError(makeError("importscripts","importScripts failed for "+t+" at "+n,s,[t]))}},isBrowser&&!cfg.skipDataMain&&eachReverse(scripts(),function(e){head||(head=e.parentNode),dataMain=e.getAttribute("data-main");if(dataMain)return mainScript=dataMain,cfg.baseUrl||(src=mainScript.split("/"),mainScript=src.pop(),subPath=src.length?src.join("/")+"/":"./",cfg.baseUrl=subPath),mainScript=mainScript.replace(jsSuffixRegExp,""),req.jsExtRegExp.test(mainScript)&&(mainScript=dataMain),cfg.deps=cfg.deps?cfg.deps.concat(mainScript):[mainScript],!0}),define=function(e,t,n){var r,i;typeof e!="string"&&(n=t,t=e,e=null),isArray(t)||(n=t,t=null),!t&&isFunction(n)&&(t=[],n.length&&(n.toString().replace(commentRegExp,"").replace(cjsRequireRegExp,function(e,n){t.push(n)}),t=(n.length===1?["require"]:["require","exports","module"]).concat(t))),useInteractive&&(r=currentlyAddingScript||getInteractiveScript(),r&&(e||(e=r.getAttribute("data-requiremodule")),i=contexts[r.getAttribute("data-requirecontext")])),(i?i.defQueue:globalDefQueue).push([e,t,n])},define.amd={jQuery:!0},req.exec=function(text){return eval(text)},req(cfg)}(this),define("requirejs",function(){}),function(){function x(e){function t(t,n,r,i,s,o){for(;s>=0&&s<o;s+=e){var u=i?i[s]:s;r=n(r,t[u],u,t)}return r}return function(n,r,i,s){r=v(r,s,4);var o=!S(n)&&d.keys(n),u=(o||n).length,a=e>0?0:u-1;return arguments.length<3&&(i=n[o?o[a]:a],a+=e),t(n,r,i,o,a,u)}}function C(e){return function(t,n,r){n=m(n,r);var i=E(t),s=e>0?0:i-1;for(;s>=0&&s<i;s+=e)if(n(t[s],s,t))return s;return-1}}function k(e,t,n){return function(r,i,s){var u=0,a=E(r);if(typeof s=="number")e>0?u=s>=0?s:Math.max(s+a,u):a=s>=0?Math.min(s+1,a):s+a+1;else if(n&&s&&a)return s=n(r,i),r[s]===i?s:-1;if(i!==i)return s=t(o.call(r,u,a),d.isNaN),s>=0?s+u:-1;for(s=e>0?u:a-1;s>=0&&s<a;s+=e)if(r[s]===i)return s;return-1}}function M(e,t){var n=O.length,i=e.constructor,s=d.isFunction(i)&&i.prototype||r,o="constructor";d.has(e,o)&&!d.contains(t,o)&&t.push(o);while(n--)o=O[n],o in e&&e[o]!==s[o]&&!d.contains(t,o)&&t.push(o)}var e=this,t=e._,n=Array.prototype,r=Object.prototype,i=Function.prototype,s=n.push,o=n.slice,u=r.toString,a=r.hasOwnProperty,f=Array.isArray,l=Object.keys,c=i.bind,h=Object.create,p=function(){},d=function(e){if(e instanceof d)return e;if(!(this instanceof d))return new d(e);this._wrapped=e};typeof exports!="undefined"?(typeof module!="undefined"&&module.exports&&(exports=module.exports=d),exports._=d):e._=d,d.VERSION="1.8.3";var v=function(e,t,n){if(t===void 0)return e;switch(n==null?3:n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,i){return e.call(t,n,r,i)};case 4:return function(n,r,i,s){return e.call(t,n,r,i,s)}}return function(){return e.apply(t,arguments)}},m=function(e,t,n){return e==null?d.identity:d.isFunction(e)?v(e,t,n):d.isObject(e)?d.matcher(e):d.property(e)};d.iteratee=function(e,t){return m(e,t,Infinity)};var g=function(e,t){return function(n){var r=arguments.length;if(r<2||n==null)return n;for(var i=1;i<r;i++){var s=arguments[i],o=e(s),u=o.length;for(var a=0;a<u;a++){var f=o[a];if(!t||n[f]===void 0)n[f]=s[f]}}return n}},y=function(e){if(!d.isObject(e))return{};if(h)return h(e);p.prototype=e;var t=new p;return p.prototype=null,t},b=function(e){return function(t){return t==null?void 0:t[e]}},w=Math.pow(2,53)-1,E=b("length"),S=function(e){var t=E(e);return typeof t=="number"&&t>=0&&t<=w};d.each=d.forEach=function(e,t,n){t=v(t,n);var r,i;if(S(e))for(r=0,i=e.length;r<i;r++)t(e[r],r,e);else{var s=d.keys(e);for(r=0,i=s.length;r<i;r++)t(e[s[r]],s[r],e)}return e},d.map=d.collect=function(e,t,n){t=m(t,n);var r=!S(e)&&d.keys(e),i=(r||e).length,s=Array(i);for(var o=0;o<i;o++){var u=r?r[o]:o;s[o]=t(e[u],u,e)}return s},d.reduce=d.foldl=d.inject=x(1),d.reduceRight=d.foldr=x(-1),d.find=d.detect=function(e,t,n){var r;S(e)?r=d.findIndex(e,t,n):r=d.findKey(e,t,n);if(r!==void 0&&r!==-1)return e[r]},d.filter=d.select=function(e,t,n){var r=[];return t=m(t,n),d.each(e,function(e,n,i){t(e,n,i)&&r.push(e)}),r},d.reject=function(e,t,n){return d.filter(e,d.negate(m(t)),n)},d.every=d.all=function(e,t,n){t=m(t,n);var r=!S(e)&&d.keys(e),i=(r||e).length;for(var s=0;s<i;s++){var o=r?r[s]:s;if(!t(e[o],o,e))return!1}return!0},d.some=d.any=function(e,t,n){t=m(t,n);var r=!S(e)&&d.keys(e),i=(r||e).length;for(var s=0;s<i;s++){var o=r?r[s]:s;if(t(e[o],o,e))return!0}return!1},d.contains=d.includes=d.include=function(e,t,n,r){S(e)||(e=d.values(e));if(typeof n!="number"||r)n=0;return d.indexOf(e,t,n)>=0},d.invoke=function(e,t){var n=o.call(arguments,2),r=d.isFunction(t);return d.map(e,function(e){var i=r?t:e[t];return i==null?i:i.apply(e,n)})},d.pluck=function(e,t){return d.map(e,d.property(t))},d.where=function(e,t){return d.filter(e,d.matcher(t))},d.findWhere=function(e,t){return d.find(e,d.matcher(t))},d.max=function(e,t,n){var r=-Infinity,i=-Infinity,s,o;if(t==null&&e!=null){e=S(e)?e:d.values(e);for(var u=0,a=e.length;u<a;u++)s=e[u],s>r&&(r=s)}else t=m(t,n),d.each(e,function(e,n,s){o=t(e,n,s);if(o>i||o===-Infinity&&r===-Infinity)r=e,i=o});return r},d.min=function(e,t,n){var r=Infinity,i=Infinity,s,o;if(t==null&&e!=null){e=S(e)?e:d.values(e);for(var u=0,a=e.length;u<a;u++)s=e[u],s<r&&(r=s)}else t=m(t,n),d.each(e,function(e,n,s){o=t(e,n,s);if(o<i||o===Infinity&&r===Infinity)r=e,i=o});return r},d.shuffle=function(e){var t=S(e)?e:d.values(e),n=t.length,r=Array(n);for(var i=0,s;i<n;i++)s=d.random(0,i),s!==i&&(r[i]=r[s]),r[s]=t[i];return r},d.sample=function(e,t,n){return t==null||n?(S(e)||(e=d.values(e)),e[d.random(e.length-1)]):d.shuffle(e).slice(0,Math.max(0,t))},d.sortBy=function(e,t,n){return t=m(t,n),d.pluck(d.map(e,function(e,n,r){return{value:e,index:n,criteria:t(e,n,r)}}).sort(function(e,t){var n=e.criteria,r=t.criteria;if(n!==r){if(n>r||n===void 0)return 1;if(n<r||r===void 0)return-1}return e.index-t.index}),"value")};var T=function(e){return function(t,n,r){var i={};return n=m(n,r),d.each(t,function(r,s){var o=n(r,s,t);e(i,r,o)}),i}};d.groupBy=T(function(e,t,n){d.has(e,n)?e[n].push(t):e[n]=[t]}),d.indexBy=T(function(e,t,n){e[n]=t}),d.countBy=T(function(e,t,n){d.has(e,n)?e[n]++:e[n]=1}),d.toArray=function(e){return e?d.isArray(e)?o.call(e):S(e)?d.map(e,d.identity):d.values(e):[]},d.size=function(e){return e==null?0:S(e)?e.length:d.keys(e).length},d.partition=function(e,t,n){t=m(t,n);var r=[],i=[];return d.each(e,function(e,n,s){(t(e,n,s)?r:i).push(e)}),[r,i]},d.first=d.head=d.take=function(e,t,n){return e==null?void 0:t==null||n?e[0]:d.initial(e,e.length-t)},d.initial=function(e,t,n){return o.call(e,0,Math.max(0,e.length-(t==null||n?1:t)))},d.last=function(e,t,n){return e==null?void 0:t==null||n?e[e.length-1]:d.rest(e,Math.max(0,e.length-t))},d.rest=d.tail=d.drop=function(e,t,n){return o.call(e,t==null||n?1:t)},d.compact=function(e){return d.filter(e,d.identity)};var N=function(e,t,n,r){var i=[],s=0;for(var o=r||0,u=E(e);o<u;o++){var a=e[o];if(S(a)&&(d.isArray(a)||d.isArguments(a))){t||(a=N(a,t,n));var f=0,l=a.length;i.length+=l;while(f<l)i[s++]=a[f++]}else n||(i[s++]=a)}return i};d.flatten=function(e,t){return N(e,t,!1)},d.without=function(e){return d.difference(e,o.call(arguments,1))},d.uniq=d.unique=function(e,t,n,r){d.isBoolean(t)||(r=n,n=t,t=!1),n!=null&&(n=m(n,r));var i=[],s=[];for(var o=0,u=E(e);o<u;o++){var a=e[o],f=n?n(a,o,e):a;t?((!o||s!==f)&&i.push(a),s=f):n?d.contains(s,f)||(s.push(f),i.push(a)):d.contains(i,a)||i.push(a)}return i},d.union=function(){return d.uniq(N(arguments,!0,!0))},d.intersection=function(e){var t=[],n=arguments.length;for(var r=0,i=E(e);r<i;r++){var s=e[r];if(d.contains(t,s))continue;for(var o=1;o<n;o++)if(!d.contains(arguments[o],s))break;o===n&&t.push(s)}return t},d.difference=function(e){var t=N(arguments,!0,!0,1);return d.filter(e,function(e){return!d.contains(t,e)})},d.zip=function(){return d.unzip(arguments)},d.unzip=function(e){var t=e&&d.max(e,E).length||0,n=Array(t);for(var r=0;r<t;r++)n[r]=d.pluck(e,r);return n},d.object=function(e,t){var n={};for(var r=0,i=E(e);r<i;r++)t?n[e[r]]=t[r]:n[e[r][0]]=e[r][1];return n},d.findIndex=C(1),d.findLastIndex=C(-1),d.sortedIndex=function(e,t,n,r){n=m(n,r,1);var i=n(t),s=0,o=E(e);while(s<o){var u=Math.floor((s+o)/2);n(e[u])<i?s=u+1:o=u}return s},d.indexOf=k(1,d.findIndex,d.sortedIndex),d.lastIndexOf=k(-1,d.findLastIndex),d.range=function(e,t,n){t==null&&(t=e||0,e=0),n=n||1;var r=Math.max(Math.ceil((t-e)/n),0),i=Array(r);for(var s=0;s<r;s++,e+=n)i[s]=e;return i};var L=function(e,t,n,r,i){if(r instanceof t){var s=y(e.prototype),o=e.apply(s,i);return d.isObject(o)?o:s}return e.apply(n,i)};d.bind=function(e,t){if(c&&e.bind===c)return c.apply(e,o.call(arguments,1));if(!d.isFunction(e))throw new TypeError("Bind must be called on a function");var n=o.call(arguments,2),r=function(){return L(e,r,t,this,n.concat(o.call(arguments)))};return r},d.partial=function(e){var t=o.call(arguments,1),n=function(){var r=0,i=t.length,s=Array(i);for(var o=0;o<i;o++)s[o]=t[o]===d?arguments[r++]:t[o];while(r<arguments.length)s.push(arguments[r++]);return L(e,n,this,this,s)};return n},d.bindAll=function(e){var t,n=arguments.length,r;if(n<=1)throw new Error("bindAll must be passed function names");for(t=1;t<n;t++)r=arguments[t],e[r]=d.bind(e[r],e);return e},d.memoize=function(e,t){var n=function(r){var i=n.cache,s=""+(t?t.apply(this,arguments):r);return d.has(i,s)||(i[s]=e.apply(this,arguments)),i[s]};return n.cache={},n},d.delay=function(e,t){var n=o.call(arguments,2);return setTimeout(function(){return e.apply(null,n)},t)},d.defer=d.partial(d.delay,d,1),d.throttle=function(e,t,n){var r,i,s,o=null,u=0;n||(n={});var a=function(){u=n.leading===!1?0:d.now(),o=null,s=e.apply(r,i),o||(r=i=null)};return function(){var f=d.now();!u&&n.leading===!1&&(u=f);var l=t-(f-u);return r=this,i=arguments,l<=0||l>t?(o&&(clearTimeout(o),o=null),u=f,s=e.apply(r,i),o||(r=i=null)):!o&&n.trailing!==!1&&(o=setTimeout(a,l)),s}},d.debounce=function(e,t,n){var r,i,s,o,u,a=function(){var f=d.now()-o;f<t&&f>=0?r=setTimeout(a,t-f):(r=null,n||(u=e.apply(s,i),r||(s=i=null)))};return function(){s=this,i=arguments,o=d.now();var f=n&&!r;return r||(r=setTimeout(a,t)),f&&(u=e.apply(s,i),s=i=null),u}},d.wrap=function(e,t){return d.partial(t,e)},d.negate=function(e){return function(){return!e.apply(this,arguments)}},d.compose=function(){var e=arguments,t=e.length-1;return function(){var n=t,r=e[t].apply(this,arguments);while(n--)r=e[n].call(this,r);return r}},d.after=function(e,t){return function(){if(--e<1)return t.apply(this,arguments)}},d.before=function(e,t){var n;return function(){return--e>0&&(n=t.apply(this,arguments)),e<=1&&(t=null),n}},d.once=d.partial(d.before,2);var A=!{toString:null}.propertyIsEnumerable("toString"),O=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"];d.keys=function(e){if(!d.isObject(e))return[];if(l)return l(e);var t=[];for(var n in e)d.has(e,n)&&t.push(n);return A&&M(e,t),t},d.allKeys=function(e){if(!d.isObject(e))return[];var t=[];for(var n in e)t.push(n);return A&&M(e,t),t},d.values=function(e){var t=d.keys(e),n=t.length,r=Array(n);for(var i=0;i<n;i++)r[i]=e[t[i]];return r},d.mapObject=function(e,t,n){t=m(t,n);var r=d.keys(e),i=r.length,s={},o;for(var u=0;u<i;u++)o=r[u],s[o]=t(e[o],o,e);return s},d.pairs=function(e){var t=d.keys(e),n=t.length,r=Array(n);for(var i=0;i<n;i++)r[i]=[t[i],e[t[i]]];return r},d.invert=function(e){var t={},n=d.keys(e);for(var r=0,i=n.length;r<i;r++)t[e[n[r]]]=n[r];return t},d.functions=d.methods=function(e){var t=[];for(var n in e)d.isFunction(e[n])&&t.push(n);return t.sort()},d.extend=g(d.allKeys),d.extendOwn=d.assign=g(d.keys),d.findKey=function(e,t,n){t=m(t,n);var r=d.keys(e),i;for(var s=0,o=r.length;s<o;s++){i=r[s];if(t(e[i],i,e))return i}},d.pick=function(e,t,n){var r={},i=e,s,o;if(i==null)return r;d.isFunction(t)?(o=d.allKeys(i),s=v(t,n)):(o=N(arguments,!1,!1,1),s=function(e,t,n){return t in n},i=Object(i));for(var u=0,a=o.length;u<a;u++){var f=o[u],l=i[f];s(l,f,i)&&(r[f]=l)}return r},d.omit=function(e,t,n){if(d.isFunction(t))t=d.negate(t);else{var r=d.map(N(arguments,!1,!1,1),String);t=function(e,t){return!d.contains(r,t)}}return d.pick(e,t,n)},d.defaults=g(d.allKeys,!0),d.create=function(e,t){var n=y(e);return t&&d.extendOwn(n,t),n},d.clone=function(e){return d.isObject(e)?d.isArray(e)?e.slice():d.extend({},e):e},d.tap=function(e,t){return t(e),e},d.isMatch=function(e,t){var n=d.keys(t),r=n.length;if(e==null)return!r;var i=Object(e);for(var s=0;s<r;s++){var o=n[s];if(t[o]!==i[o]||!(o in i))return!1}return!0};var _=function(e,t,n,r){if(e===t)return e!==0||1/e===1/t;if(e==null||t==null)return e===t;e instanceof d&&(e=e._wrapped),t instanceof d&&(t=t._wrapped);var i=u.call(e);if(i!==u.call(t))return!1;switch(i){case"[object RegExp]":case"[object String]":return""+e==""+t;case"[object Number]":if(+e!==+e)return+t!==+t;return+e===0?1/+e===1/t:+e===+t;case"[object Date]":case"[object Boolean]":return+e===+t}var s=i==="[object Array]";if(!s){if(typeof e!="object"||typeof t!="object")return!1;var o=e.constructor,a=t.constructor;if(o!==a&&!(d.isFunction(o)&&o instanceof o&&d.isFunction(a)&&a instanceof a)&&"constructor"in e&&"constructor"in t)return!1}n=n||[],r=r||[];var f=n.length;while(f--)if(n[f]===e)return r[f]===t;n.push(e),r.push(t);if(s){f=e.length;if(f!==t.length)return!1;while(f--)if(!_(e[f],t[f],n,r))return!1}else{var l=d.keys(e),c;f=l.length;if(d.keys(t).length!==f)return!1;while(f--){c=l[f];if(!d.has(t,c)||!_(e[c],t[c],n,r))return!1}}return n.pop(),r.pop(),!0};d.isEqual=function(e,t){return _(e,t)},d.isEmpty=function(e){return e==null?!0:S(e)&&(d.isArray(e)||d.isString(e)||d.isArguments(e))?e.length===0:d.keys(e).length===0},d.isElement=function(e){return!!e&&e.nodeType===1},d.isArray=f||function(e){return u.call(e)==="[object Array]"},d.isObject=function(e){var t=typeof e;return t==="function"||t==="object"&&!!e},d.each(["Arguments","Function","String","Number","Date","RegExp","Error"],function(e){d["is"+e]=function(t){return u.call(t)==="[object "+e+"]"}}),d.isArguments(arguments)||(d.isArguments=function(e){return d.has(e,"callee")}),typeof /./!="function"&&typeof Int8Array!="object"&&(d.isFunction=function(e){return typeof e=="function"||!1}),d.isFinite=function(e){return isFinite(e)&&!isNaN(parseFloat(e))},d.isNaN=function(e){return d.isNumber(e)&&e!==+e},d.isBoolean=function(e){return e===!0||e===!1||u.call(e)==="[object Boolean]"},d.isNull=function(e){return e===null},d.isUndefined=function(e){return e===void 0},d.has=function(e,t){return e!=null&&a.call(e,t)},d.noConflict=function(){return e._=t,this},d.identity=function(e){return e},d.constant=function(e){return function(){return e}},d.noop=function(){},d.property=b,d.propertyOf=function(e){return e==null?function(){}:function(t){return e[t]}},d.matcher=d.matches=function(e){return e=d.extendOwn({},e),function(t){return d.isMatch(t,e)}},d.times=function(e,t,n){var r=Array(Math.max(0,e));t=v(t,n,1);for(var i=0;i<e;i++)r[i]=t(i);return r},d.random=function(e,t){return t==null&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))},d.now=Date.now||function(){return(new Date).getTime()};var D={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},P=d.invert(D),H=function(e){var t=function(t){return e[t]},n="(?:"+d.keys(e).join("|")+")",r=RegExp(n),i=RegExp(n,"g");return function(e){return e=e==null?"":""+e,r.test(e)?e.replace(i,t):e}};d.escape=H(D),d.unescape=H(P),d.result=function(e,t,n){var r=e==null?void 0:e[t];return r===void 0&&(r=n),d.isFunction(r)?r.call(e):r};var B=0;d.uniqueId=function(e){var t=++B+"";return e?e+t:t},d.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var j=/(.)^/,F={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},I=/\\|'|\r|\n|\u2028|\u2029/g,q=function(e){return"\\"+F[e]};d.template=function(e,t,n){!t&&n&&(t=n),t=d.defaults({},t,d.templateSettings);var r=RegExp([(t.escape||j).source,(t.interpolate||j).source,(t.evaluate||j).source].join("|")+"|$","g"),i=0,s="__p+='";e.replace(r,function(t,n,r,o,u){return s+=e.slice(i,u).replace(I,q),i=u+t.length,n?s+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'":r?s+="'+\n((__t=("+r+"))==null?'':__t)+\n'":o&&(s+="';\n"+o+"\n__p+='"),t}),s+="';\n",t.variable||(s="with(obj||{}){\n"+s+"}\n"),s="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+s+"return __p;\n";try{var o=new Function(t.variable||"obj","_",s)}catch(u){throw u.source=s,u}var a=function(e){return o.call(this,e,d)},f=t.variable||"obj";return a.source="function("+f+"){\n"+s+"}",a},d.chain=function(e){var t=d(e);return t._chain=!0,t};var R=function(e,t){return e._chain?d(t).chain():t};d.mixin=function(e){d.each(d.functions(e),function(t){var n=d[t]=e[t];d.prototype[t]=function(){var e=[this._wrapped];return s.apply(e,arguments),R(this,n.apply(d,e))}})},d.mixin(d),d.each(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var t=n[e];d.prototype[e]=function(){var n=this._wrapped;return t.apply(n,arguments),(e==="shift"||e==="splice")&&n.length===0&&delete n[0],R(this,n)}}),d.each(["concat","join","slice"],function(e){var t=n[e];d.prototype[e]=function(){return R(this,t.apply(this._wrapped,arguments))}}),d.prototype.value=function(){return this._wrapped},d.prototype.valueOf=d.prototype.toJSON=d.prototype.value,d.prototype.toString=function(){return""+this._wrapped},typeof define=="function"&&define.amd&&define("underscore",[],function(){return d})}.call(this),define("js/view",["require","taist","jquery","underscore"],function(e){var t=e("taist"),n=e("jquery"),r=e("underscore"),i=n.Deferred(),s=n.Deferred(),o=("x"+Math.random()).replace(".",""),u=r.template('<tr style="vertical-align: middle;"><td class="label first" style="width:19%"><div class="gwt-Label"><%=label%></div></td><td class="widget" align="left" style="width:80%"><input id="taist-<%=id%>" class="taistField" style="width:100%;" type="text" placeholder="<%=placeholder%>"/></td></tr><tr><td class="lognex-validatedCell"></td><td class="lognex-validatedCell"></td><td class="lognex-validatedCell"></td><td class="lognex-validatedCell"></td></tr>'),a=[];return function(){function f(e){function t(e){return e.find("."+o).length!==0}function f(){function l(e){return function(t){function s(){return r.chain(function(e){var r=n(e.target);t.save(r.val())}).debounce(1e3).value()}var i=n(u(t));i.val(t.value),i.on("change, keyup",s()),e.append(i)}}function c(e){return function(t){e.toggle(t)}}var t=n('<td align="left" style="vertical-align: top;"><div role="button" class="b-popup-button b-popup-button-enabled b-popup-button-gray" tabindex="0"><table><tbody><tr><td><span class="text"></span></td></tr></tbody></table></div></td>'),i=n('<td align="left" style="vertical-align: top;"><div role="button" class="b-popup-button b-popup-button-enabled b-popup-button-gray" tabindex="0"><table><tbody><tr><td><span class="text"></span></td></tr></tbody></table></div></td>'),f=n('<div class="right-popup-panel" style="position: fixed; left: 0px; top: 0px; display: block; width: 50%;"><div class="popupContent"><div class="content-wrap"><div style="overflow: visible;"><div class="b-right-popup-title">Настройка импорта из Google Sheet документа</div><table><tbody></tbody></table></div></div></div></div>');return t.find(".text").text("Создать из Google sheets").end().addClass(o).appendTo(e.find("tbody tr:first")),i.find(".text").text("Настройки").end().appendTo(e.find("tbody tr:first")).click(function(){f.toggle()}),f.appendTo(n("body")),r.each(a,l(f.find("tbody"))),s.progress(c(t)),s.progress(c(i)),s.progress(r.partial(c(f),!1)),t}t(e)||f().click(i.notify)}function l(){return[{id:"sheetKey",label:"Ключ Google sheet документа",placeholder:"https://docs.google.com/spreadsheets/d/ЭТО КЛЮЧ/",value:"",save:h},{id:"sheets",label:"gid идентификаторы листов в Google sheet документе через запятую",placeholder:"2",value:"",save:h},{id:"targetAgentUuid",label:"Идентификатор контрагента",placeholder:"",value:"",save:h},{id:"sourceAgentUuid",label:"Идентификатор юр. лица отпускающий товар",placeholder:"",value:"",save:h}]}function c(e){return function(){function i(e){var i=n.Deferred();return n("input#taist-"+e.id).parent().addClass("loading"),t.companyData.get(e.id,function(t,s){r.isNull(t)||i.reject(t),e.value=s,e.placeholder=s,n("input#taist-"+e.id).val(s),i.resolve(s)}),i.promise()}return n.when.apply(null,r.map(e,i)).then(r.constant(e)).promise()}}function h(e){var n=this;t.companyData.set(n.id,e,function(){n.value=e})}t.hash.when(/^demand/,function(){var e=".pump-title-panel";t.wait.elementRender(e,f),s.notify(!0)}),t.hash.when(/^(demand\?edit.+$)|^(?!demand)/,function(){s.notify(!1)}),a=l();var e=c(a)();return{sync:i.promise(),load:e}}}),!function(e){function t(e){return e=e.replace(/\r\n/g,"\n")}function n(e){return e=e.replace(/</g,"&lt;").replace(/&/g,"&amp;"),t(e)}e.json2xml=function(e){var r=function(e,i,s){var o="";if(e instanceof Array)for(var u=0,a=e.length;a>u;u++)o+=r(e[u],i,s+"");else if("object"==typeof e){var f=!1;o+=s+"<"+i;for(var l in e)"@"==l.charAt(0)?o+=" "+l.substr(1)+'="'+e[l].toString()+'"':f=!0;if(o+=f?">\n":"/>",f){for(var l in e)"#text"==l?o+=n(e[l]):"#cdata"==l?o+="<![CDATA["+t(e[l])+"]]>":"@"!=l.charAt(0)&&(o+=r(e[l],l,s+"	"));o+=("\n"==o.charAt(o.length-1)?s:"")+"</"+i+">\n"}}else o+=s+"<"+i+">"+n(e&&e.toString&&e.toString()||"")+"</"+i+">\n";return o},i="";for(var s in e)i+=r(e[s],s,"");return i}}(window),define("json2xml",function(){}),function(e,t){typeof exports=="object"&&typeof module!="undefined"?module.exports=t():typeof define=="function"&&define.amd?define("moment",t):e.moment=t()}(this,function(){"use strict";function t(){return e.apply(null,arguments)}function n(t){e=t}function r(e){return Object.prototype.toString.call(e)==="[object Array]"}function i(e){return e instanceof Date||Object.prototype.toString.call(e)==="[object Date]"}function s(e,t){var n=[],r;for(r=0;r<e.length;++r)n.push(t(e[r],r));return n}function o(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function u(e,t){for(var n in t)o(t,n)&&(e[n]=t[n]);return o(t,"toString")&&(e.toString=t.toString),o(t,"valueOf")&&(e.valueOf=t.valueOf),e}function a(e,t,n,r){return dn(e,t,n,r,!0).utc()}function f(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1}}function l(e){return e._pf==null&&(e._pf=f()),e._pf}function c(e){if(e._isValid==null){var t=l(e);e._isValid=!isNaN(e._d.getTime())&&t.overflow<0&&!t.empty&&!t.invalidMonth&&!t.nullInput&&!t.invalidFormat&&!t.userInvalidated,e._strict&&(e._isValid=e._isValid&&t.charsLeftOver===0&&t.unusedTokens.length===0&&t.bigHour===undefined)}return e._isValid}function h(e){var t=a(NaN);return e!=null?u(l(t),e):l(t).userInvalidated=!0,t}function d(e,t){var n,r,i;typeof t._isAMomentObject!="undefined"&&(e._isAMomentObject=t._isAMomentObject),typeof t._i!="undefined"&&(e._i=t._i),typeof t._f!="undefined"&&(e._f=t._f),typeof t._l!="undefined"&&(e._l=t._l),typeof t._strict!="undefined"&&(e._strict=t._strict),typeof t._tzm!="undefined"&&(e._tzm=t._tzm),typeof t._isUTC!="undefined"&&(e._isUTC=t._isUTC),typeof t._offset!="undefined"&&(e._offset=t._offset),typeof t._pf!="undefined"&&(e._pf=l(t)),typeof t._locale!="undefined"&&(e._locale=t._locale);if(p.length>0)for(n in p)r=p[n],i=t[r],typeof i!="undefined"&&(e[r]=i);return e}function m(e){d(this,e),this._d=new Date(+e._d),v===!1&&(v=!0,t.updateOffset(this),v=!1)}function g(e){return e instanceof m||e!=null&&e._isAMomentObject!=null}function y(e){var t=+e,n=0;return t!==0&&isFinite(t)&&(t>=0?n=Math.floor(t):n=Math.ceil(t)),n}function b(e,t,n){var r=Math.min(e.length,t.length),i=Math.abs(e.length-t.length),s=0,o;for(o=0;o<r;o++)(n&&e[o]!==t[o]||!n&&y(e[o])!==y(t[o]))&&s++;return s+i}function w(){}function x(e){return e?e.toLowerCase().replace("_","-"):e}function T(e){var t=0,n,r,i,s;while(t<e.length){s=x(e[t]).split("-"),n=s.length,r=x(e[t+1]),r=r?r.split("-"):null;while(n>0){i=N(s.slice(0,n).join("-"));if(i)return i;if(r&&r.length>=n&&b(s,r,!0)>=n-1)break;n--}t++}return null}function N(e){var t=null;if(!E[e]&&typeof module!="undefined"&&module&&module.exports)try{t=S._abbr,require("./locale/"+e),C(t)}catch(n){}return E[e]}function C(e,t){var n;return e&&(typeof t=="undefined"?n=L(e):n=k(e,t),n&&(S=n)),S._abbr}function k(e,t){return t!==null?(t.abbr=e,E[e]||(E[e]=new w),E[e].set(t),C(e),E[e]):(delete E[e],null)}function L(e){var t;e&&e._locale&&e._locale._abbr&&(e=e._locale._abbr);if(!e)return S;if(!r(e)){t=N(e);if(t)return t;e=[e]}return T(e)}function O(e,t){var n=e.toLowerCase();A[n]=A[n+"s"]=A[t]=e}function M(e){return typeof e=="string"?A[e]||A[e.toLowerCase()]:undefined}function _(e){var t={},n,r;for(r in e)o(e,r)&&(n=M(r),n&&(t[n]=e[r]));return t}function D(e,n){return function(r){return r!=null?(H(this,e,r),t.updateOffset(this,n),this):P(this,e)}}function P(e,t){return e._d["get"+(e._isUTC?"UTC":"")+t]()}function H(e,t,n){return e._d["set"+(e._isUTC?"UTC":"")+t](n)}function B(e,t){var n;if(typeof e=="object")for(n in e)this.set(n,e[n]);else{e=M(e);if(typeof this[e]=="function")return this[e](t)}return this}function j(e,t,n){var r=""+Math.abs(e),i=e>=0;while(r.length<t)r="0"+r;return(i?n?"+":"":"-")+r}function U(e,t,n,r){var i=r;typeof r=="string"&&(i=function(){return this[r]()}),e&&(R[e]=i),t&&(R[t[0]]=function(){return j(i.apply(this,arguments),t[1],t[2])}),n&&(R[n]=function(){return this.localeData().ordinal(i.apply(this,arguments),e)})}function z(e){return e.match(/\[[\s\S]/)?e.replace(/^\[|\]$/g,""):e.replace(/\\/g,"")}function W(e){var t=e.match(F),n,r;for(n=0,r=t.length;n<r;n++)R[t[n]]?t[n]=R[t[n]]:t[n]=z(t[n]);return function(i){var s="";for(n=0;n<r;n++)s+=t[n]instanceof Function?t[n].call(i,e):t[n];return s}}function X(e,t){return e.isValid()?(t=V(t,e.localeData()),q[t]||(q[t]=W(t)),q[t](e)):e.localeData().invalidDate()}function V(e,t){function r(e){return t.longDateFormat(e)||e}var n=5;I.lastIndex=0;while(n>=0&&I.test(e))e=e.replace(I,r),I.lastIndex=0,n-=1;return e}function at(e,t,n){ut[e]=typeof t=="function"?t:function(e){return e&&n?n:t}}function ft(e,t){return o(ut,e)?ut[e](t._strict,t._locale):new RegExp(lt(e))}function lt(e){return e.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(e,t,n,r,i){return t||n||r||i}).replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function ht(e,t){var n,r=t;typeof e=="string"&&(e=[e]),typeof t=="number"&&(r=function(e,n){n[t]=y(e)});for(n=0;n<e.length;n++)ct[e[n]]=r}function pt(e,t){ht(e,function(e,n,r,i){r._w=r._w||{},t(e,r._w,r,i)})}function dt(e,t,n){t!=null&&o(ct,e)&&ct[e](t,n._a,n,e)}function St(e,t){return(new Date(Date.UTC(e,t+1,0))).getUTCDate()}function Tt(e){return this._months[e.month()]}function Ct(e){return this._monthsShort[e.month()]}function kt(e,t,n){var r,i,s;this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]);for(r=0;r<12;r++){i=a([2e3,r]),n&&!this._longMonthsParse[r]&&(this._longMonthsParse[r]=new RegExp("^"+this.months(i,"").replace(".","")+"$","i"),this._shortMonthsParse[r]=new RegExp("^"+this.monthsShort(i,"").replace(".","")+"$","i")),!n&&!this._monthsParse[r]&&(s="^"+this.months(i,"")+"|^"+this.monthsShort(i,""),this._monthsParse[r]=new RegExp(s.replace(".",""),"i"));if(n&&t==="MMMM"&&this._longMonthsParse[r].test(e))return r;if(n&&t==="MMM"&&this._shortMonthsParse[r].test(e))return r;if(!n&&this._monthsParse[r].test(e))return r}}function Lt(e,t){var n;if(typeof t=="string"){t=e.localeData().monthsParse(t);if(typeof t!="number")return e}return n=Math.min(e.date(),St(e.year(),t)),e._d["set"+(e._isUTC?"UTC":"")+"Month"](t,n),e}function At(e){return e!=null?(Lt(this,e),t.updateOffset(this,!0),this):P(this,"Month")}function Ot(){return St(this.year(),this.month())}function Mt(e){var t,n=e._a;return n&&l(e).overflow===-2&&(t=n[mt]<0||n[mt]>11?mt:n[gt]<1||n[gt]>St(n[vt],n[mt])?gt:n[yt]<0||n[yt]>24||n[yt]===24&&(n[bt]!==0||n[wt]!==0||n[Et]!==0)?yt:n[bt]<0||n[bt]>59?bt:n[wt]<0||n[wt]>59?wt:n[Et]<0||n[Et]>999?Et:-1,l(e)._overflowDayOfYear&&(t<vt||t>gt)&&(t=gt),l(e).overflow=t),e}function _t(e){t.suppressDeprecationWarnings===!1&&typeof console!="undefined"&&console.warn&&console.warn("Deprecation warning: "+e)}function Dt(e,t){var n=!0,r=e+"\n"+(new Error).stack;return u(function(){return n&&(_t(r),n=!1),t.apply(this,arguments)},t)}function Ht(e,t){Pt[e]||(_t(t),Pt[e]=!0)}function qt(e){var t,n,r=e._i,i=Bt.exec(r);if(i){l(e).iso=!0;for(t=0,n=jt.length;t<n;t++)if(jt[t][1].exec(r)){e._f=jt[t][0]+(i[6]||" ");break}for(t=0,n=Ft.length;t<n;t++)if(Ft[t][1].exec(r)){e._f+=Ft[t][0];break}r.match(it)&&(e._f+="Z"),an(e)}else e._isValid=!1}function Rt(e){var n=It.exec(e._i);if(n!==null){e._d=new Date(+n[1]);return}qt(e),e._isValid===!1&&(delete e._isValid,t.createFromInputFallback(e))}function Ut(e,t,n,r,i,s,o){var u=new Date(e,t,n,r,i,s,o);return e<1970&&u.setFullYear(e),u}function zt(e){var t=new Date(Date.UTC.apply(null,arguments));return e<1970&&t.setUTCFullYear(e),t}function Wt(e){return Xt(e)?366:365}function Xt(e){return e%4===0&&e%100!==0||e%400===0}function $t(){return Xt(this.year())}function Jt(e,t,n){var r=n-t,i=n-e.day(),s;return i>r&&(i-=7),i<r-7&&(i+=7),s=vn(e).add(i,"d"),{week:Math.ceil(s.dayOfYear()/7),year:s.year()}}function Kt(e){return Jt(e,this._week.dow,this._week.doy).week}function Gt(){return this._week.dow}function Yt(){return this._week.doy}function Zt(e){var t=this.localeData().week(this);return e==null?t:this.add((e-t)*7,"d")}function en(e){var t=Jt(this,1,4).week;return e==null?t:this.add((e-t)*7,"d")}function tn(e,t,n,r,i){var s=zt(e,0,1).getUTCDay(),o,u;return s=s===0?7:s,n=n!=null?n:i,o=i-s+(s>r?7:0)-(s<i?7:0),u=7*(t-1)+(n-i)+o+1,{year:u>0?e:e-1,dayOfYear:u>0?u:Wt(e-1)+u}}function nn(e){var t=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return e==null?t:this.add(e-t,"d")}function rn(e,t,n){return e!=null?e:t!=null?t:n}function sn(e){var t=new Date;return e._useUTC?[t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()]:[t.getFullYear(),t.getMonth(),t.getDate()]}function on(e){var t,n,r=[],i,s;if(e._d)return;i=sn(e),e._w&&e._a[gt]==null&&e._a[mt]==null&&un(e),e._dayOfYear&&(s=rn(e._a[vt],i[vt]),e._dayOfYear>Wt(s)&&(l(e)._overflowDayOfYear=!0),n=zt(s,0,e._dayOfYear),e._a[mt]=n.getUTCMonth(),e._a[gt]=n.getUTCDate());for(t=0;t<3&&e._a[t]==null;++t)e._a[t]=r[t]=i[t];for(;t<7;t++)e._a[t]=r[t]=e._a[t]==null?t===2?1:0:e._a[t];e._a[yt]===24&&e._a[bt]===0&&e._a[wt]===0&&e._a[Et]===0&&(e._nextDay=!0,e._a[yt]=0),e._d=(e._useUTC?zt:Ut).apply(null,r),e._tzm!=null&&e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),e._nextDay&&(e._a[yt]=24)}function un(e){var t,n,r,i,s,o,u;t=e._w,t.GG!=null||t.W!=null||t.E!=null?(s=1,o=4,n=rn(t.GG,e._a[vt],Jt(vn(),1,4).year),r=rn(t.W,1),i=rn(t.E,1)):(s=e._locale._week.dow,o=e._locale._week.doy,n=rn(t.gg,e._a[vt],Jt(vn(),s,o).year),r=rn(t.w,1),t.d!=null?(i=t.d,i<s&&++r):t.e!=null?i=t.e+s:i=s),u=tn(n,r,i,o,s),e._a[vt]=u.year,e._dayOfYear=u.dayOfYear}function an(e){if(e._f===t.ISO_8601){qt(e);return}e._a=[],l(e).empty=!0;var n=""+e._i,r,i,s,o,u,a=n.length,f=0;s=V(e._f,e._locale).match(F)||[];for(r=0;r<s.length;r++)o=s[r],i=(n.match(ft(o,e))||[])[0],i&&(u=n.substr(0,n.indexOf(i)),u.length>0&&l(e).unusedInput.push(u),n=n.slice(n.indexOf(i)+i.length),f+=i.length),R[o]?(i?l(e).empty=!1:l(e).unusedTokens.push(o),dt(o,i,e)):e._strict&&!i&&l(e).unusedTokens.push(o);l(e).charsLeftOver=a-f,n.length>0&&l(e).unusedInput.push(n),l(e).bigHour===!0&&e._a[yt]<=12&&e._a[yt]>0&&(l(e).bigHour=undefined),e._a[yt]=fn(e._locale,e._a[yt],e._meridiem),on(e),Mt(e)}function fn(e,t,n){var r;return n==null?t:e.meridiemHour!=null?e.meridiemHour(t,n):e.isPM!=null?(r=e.isPM(n),r&&t<12&&(t+=12),!r&&t===12&&(t=0),t):t}function ln(e){var t,n,r,i,s;if(e._f.length===0){l(e).invalidFormat=!0,e._d=new Date(NaN);return}for(i=0;i<e._f.length;i++){s=0,t=d({},e),e._useUTC!=null&&(t._useUTC=e._useUTC),t._f=e._f[i],an(t);if(!c(t))continue;s+=l(t).charsLeftOver,s+=l(t).unusedTokens.length*10,l(t).score=s;if(r==null||s<r)r=s,n=t}u(e,n||t)}function cn(e){if(e._d)return;var t=_(e._i);e._a=[t.year,t.month,t.day||t.date,t.hour,t.minute,t.second,t.millisecond],on(e)}function hn(e){var t=e._i,n=e._f,s;return e._locale=e._locale||L(e._l),t===null||n===undefined&&t===""?h({nullInput:!0}):(typeof t=="string"&&(e._i=t=e._locale.preparse(t)),g(t)?new m(Mt(t)):(r(n)?ln(e):n?an(e):i(t)?e._d=t:pn(e),s=new m(Mt(e)),s._nextDay&&(s.add(1,"d"),s._nextDay=undefined),s))}function pn(e){var n=e._i;n===undefined?e._d=new Date:i(n)?e._d=new Date(+n):typeof n=="string"?Rt(e):r(n)?(e._a=s(n.slice(0),function(e){return parseInt(e,10)}),on(e)):typeof n=="object"?cn(e):typeof n=="number"?e._d=new Date(n):t.createFromInputFallback(e)}function dn(e,t,n,r,i){var s={};return typeof n=="boolean"&&(r=n,n=undefined),s._isAMomentObject=!0,s._useUTC=s._isUTC=i,s._l=n,s._i=e,s._f=t,s._strict=r,hn(s)}function vn(e,t,n,r){return dn(e,t,n,r,!1)}function yn(e,t){var n,i;t.length===1&&r(t[0])&&(t=t[0]);if(!t.length)return vn();n=t[0];for(i=1;i<t.length;++i)t[i][e](n)&&(n=t[i]);return n}function bn(){var e=[].slice.call(arguments,0);return yn("isBefore",e)}function wn(){var e=[].slice.call(arguments,0);return yn("isAfter",e)}function En(e){var t=_(e),n=t.year||0,r=t.quarter||0,i=t.month||0,s=t.week||0,o=t.day||0,u=t.hour||0,a=t.minute||0,f=t.second||0,l=t.millisecond||0;this._milliseconds=+l+f*1e3+a*6e4+u*36e5,this._days=+o+s*7,this._months=+i+r*3+n*12,this._data={},this._locale=L(),this._bubble()}function Sn(e){return e instanceof En}function xn(e,t){U(e,0,0,function(){var e=this.utcOffset(),n="+";return e<0&&(e=-e,n="-"),n+j(~~(e/60),2)+t+j(~~e%60,2)})}function Nn(e){var t=(e||"").match(it)||[],n=t[t.length-1]||[],r=(n+"").match(Tn)||["-",0,0],i=+(r[1]*60)+y(r[2]);return r[0]==="+"?i:-i}function Cn(e,n){var r,s;return n._isUTC?(r=n.clone(),s=(g(e)||i(e)?+e:+vn(e))- +r,r._d.setTime(+r._d+s),t.updateOffset(r,!1),r):vn(e).local()}function kn(e){return-Math.round(e._d.getTimezoneOffset()/15)*15}function Ln(e,n){var r=this._offset||0,i;return e!=null?(typeof e=="string"&&(e=Nn(e)),Math.abs(e)<16&&(e*=60),!this._isUTC&&n&&(i=kn(this)),this._offset=e,this._isUTC=!0,i!=null&&this.add(i,"m"),r!==e&&(!n||this._changeInProgress?Vn(this,Rn(e-r,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,t.updateOffset(this,!0),this._changeInProgress=null)),this):this._isUTC?r:kn(this)}function An(e,t){return e!=null?(typeof e!="string"&&(e=-e),this.utcOffset(e,t),this):-this.utcOffset()}function On(e){return this.utcOffset(0,e)}function Mn(e){return this._isUTC&&(this.utcOffset(0,e),this._isUTC=!1,e&&this.subtract(kn(this),"m")),this}function _n(){return this._tzm?this.utcOffset(this._tzm):typeof this._i=="string"&&this.utcOffset(Nn(this._i)),this}function Dn(e){return e?e=vn(e).utcOffset():e=0,(this.utcOffset()-e)%60===0}function Pn(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function Hn(){if(this._a){var e=this._isUTC?a(this._a):vn(this._a);return this.isValid()&&b(this._a,e.toArray())>0}return!1}function Bn(){return!this._isUTC}function jn(){return this._isUTC}function Fn(){return this._isUTC&&this._offset===0}function Rn(e,t){var n=e,r=null,i,s,u;return Sn(e)?n={ms:e._milliseconds,d:e._days,M:e._months}:typeof e=="number"?(n={},t?n[t]=e:n.milliseconds=e):(r=In.exec(e))?(i=r[1]==="-"?-1:1,n={y:0,d:y(r[gt])*i,h:y(r[yt])*i,m:y(r[bt])*i,s:y(r[wt])*i,ms:y(r[Et])*i}):(r=qn.exec(e))?(i=r[1]==="-"?-1:1,n={y:Un(r[2],i),M:Un(r[3],i),d:Un(r[4],i),h:Un(r[5],i),m:Un(r[6],i),s:Un(r[7],i),w:Un(r[8],i)}):n==null?n={}:typeof n=="object"&&("from"in n||"to"in n)&&(u=Wn(vn(n.from),vn(n.to)),n={},n.ms=u.milliseconds,n.M=u.months),s=new En(n),Sn(e)&&o(e,"_locale")&&(s._locale=e._locale),s}function Un(e,t){var n=e&&parseFloat(e.replace(",","."));return(isNaN(n)?0:n)*t}function zn(e,t){var n={milliseconds:0,months:0};return n.months=t.month()-e.month()+(t.year()-e.year())*12,e.clone().add(n.months,"M").isAfter(t)&&--n.months,n.milliseconds=+t- +e.clone().add(n.months,"M"),n}function Wn(e,t){var n;return t=Cn(t,e),e.isBefore(t)?n=zn(e,t):(n=zn(t,e),n.milliseconds=-n.milliseconds,n.months=-n.months),n}function Xn(e,t){return function(n,r){var i,s;return r!==null&&!isNaN(+r)&&(Ht(t,"moment()."+t+"(period, number) is deprecated. Please use moment()."+t+"(number, period)."),s=n,n=r,r=s),n=typeof n=="string"?+n:n,i=Rn(n,r),Vn(this,i,e),this}}function Vn(e,n,r,i){var s=n._milliseconds,o=n._days,u=n._months;i=i==null?!0:i,s&&e._d.setTime(+e._d+s*r),o&&H(e,"Date",P(e,"Date")+o*r),u&&Lt(e,P(e,"Month")+u*r),i&&t.updateOffset(e,o||u)}function Kn(e){var t=e||vn(),n=Cn(t,this).startOf("day"),r=this.diff(n,"days",!0),i=r<-6?"sameElse":r<-1?"lastWeek":r<0?"lastDay":r<1?"sameDay":r<2?"nextDay":r<7?"nextWeek":"sameElse";return this.format(this.localeData().calendar(i,this,vn(t)))}function Qn(){return new m(this)}function Gn(e,t){var n;return t=M(typeof t!="undefined"?t:"millisecond"),t==="millisecond"?(e=g(e)?e:vn(e),+this>+e):(n=g(e)?+e:+vn(e),n<+this.clone().startOf(t))}function Yn(e,t){var n;return t=M(typeof t!="undefined"?t:"millisecond"),t==="millisecond"?(e=g(e)?e:vn(e),+this<+e):(n=g(e)?+e:+vn(e),+this.clone().endOf(t)<n)}function Zn(e,t,n){return this.isAfter(e,n)&&this.isBefore(t,n)}function er(e,t){var n;return t=M(t||"millisecond"),t==="millisecond"?(e=g(e)?e:vn(e),+this===+e):(n=+vn(e),+this.clone().startOf(t)<=n&&n<=+this.clone().endOf(t))}function tr(e){return e<0?Math.ceil(e):Math.floor(e)}function nr(e,t,n){var r=Cn(e,this),i=(r.utcOffset()-this.utcOffset())*6e4,s,o;return t=M(t),t==="year"||t==="month"||t==="quarter"?(o=rr(this,r),t==="quarter"?o/=3:t==="year"&&(o/=12)):(s=this-r,o=t==="second"?s/1e3:t==="minute"?s/6e4:t==="hour"?s/36e5:t==="day"?(s-i)/864e5:t==="week"?(s-i)/6048e5:s),n?o:tr(o)}function rr(e,t){var n=(t.year()-e.year())*12+(t.month()-e.month()),r=e.clone().add(n,"months"),i,s;return t-r<0?(i=e.clone().add(n-1,"months"),s=(t-r)/(r-i)):(i=e.clone().add(n+1,"months"),s=(t-r)/(i-r)),-(n+s)}function ir(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function sr(){var e=this.clone().utc();return 0<e.year()&&e.year()<=9999?"function"==typeof Date.prototype.toISOString?this.toDate().toISOString():X(e,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):X(e,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")}function or(e){var n=X(this,e||t.defaultFormat);return this.localeData().postformat(n)}function ur(e,t){return this.isValid()?Rn({to:this,from:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()}function ar(e){return this.from(vn(),e)}function fr(e,t){return this.isValid()?Rn({from:this,to:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()}function lr(e){return this.to(vn(),e)}function cr(e){var t;return e===undefined?this._locale._abbr:(t=L(e),t!=null&&(this._locale=t),this)}function pr(){return this._locale}function dr(e){e=M(e);switch(e){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return e==="week"&&this.weekday(0),e==="isoWeek"&&this.isoWeekday(1),e==="quarter"&&this.month(Math.floor(this.month()/3)*3),this}function vr(e){return e=M(e),e===undefined||e==="millisecond"?this:this.startOf(e).add(1,e==="isoWeek"?"week":e).subtract(1,"ms")}function mr(){return+this._d-(this._offset||0)*6e4}function gr(){return Math.floor(+this/1e3)}function yr(){return this._offset?new Date(+this):this._d}function br(){var e=this;return[e.year(),e.month(),e.date(),e.hour(),e.minute(),e.second(),e.millisecond()]}function wr(){return c(this)}function Er(){return u({},l(this))}function Sr(){return l(this).overflow}function xr(e,t){U(0,[e,e.length],0,t)}function Tr(e,t,n){return Jt(vn([e,11,31+t-n]),t,n).week}function Nr(e){var t=Jt(this,this.localeData()._week.dow,this.localeData()._week.doy).year;return e==null?t:this.add(e-t,"y")}function Cr(e){var t=Jt(this,1,4).year;return e==null?t:this.add(e-t,"y")}function kr(){return Tr(this.year(),1,4)}function Lr(){var e=this.localeData()._week;return Tr(this.year(),e.dow,e.doy)}function Ar(e){return e==null?Math.ceil((this.month()+1)/3):this.month((e-1)*3+this.month()%3)}function Mr(e,t){if(typeof e=="string")if(!isNaN(e))e=parseInt(e,10);else{e=t.weekdaysParse(e);if(typeof e!="number")return null}return e}function Dr(e){return this._weekdays[e.day()]}function Hr(e){return this._weekdaysShort[e.day()]}function jr(e){return this._weekdaysMin[e.day()]}function Fr(e){var t,n,r;this._weekdaysParse||(this._weekdaysParse=[]);for(t=0;t<7;t++){this._weekdaysParse[t]||(n=vn([2e3,1]).day(t),r="^"+this.weekdays(n,"")+"|^"+this.weekdaysShort(n,"")+"|^"+this.weekdaysMin(n,""),this._weekdaysParse[t]=new RegExp(r.replace(".",""),"i"));if(this._weekdaysParse[t].test(e))return t}}function Ir(e){var t=this._isUTC?this._d.getUTCDay():this._d.getDay();return e!=null?(e=Mr(e,this.localeData()),this.add(e-t,"d")):t}function qr(e){var t=(this.day()+7-this.localeData()._week.dow)%7;return e==null?t:this.add(e-t,"d")}function Rr(e){return e==null?this.day()||7:this.day(this.day()%7?e:e-7)}function Ur(e,t){U(e,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),t)})}function zr(e,t){return t._meridiemParse}function Wr(e){return(e+"").toLowerCase().charAt(0)==="p"}function Vr(e,t,n){return e>11?n?"pm":"PM":n?"am":"AM"}function Qr(e){U(0,[e,3],0,"millisecond")}function Yr(){return this._isUTC?"UTC":""}function Zr(){return this._isUTC?"Coordinated Universal Time":""}function ni(e){return vn(e*1e3)}function ri(){return vn.apply(null,arguments).parseZone()}function si(e,t,n){var r=this._calendar[e];return typeof r=="function"?r.call(t,n):r}function ui(e){var t=this._longDateFormat[e];return!t&&this._longDateFormat[e.toUpperCase()]&&(t=this._longDateFormat[e.toUpperCase()].replace(/MMMM|MM|DD|dddd/g,function(e){return e.slice(1)}),this._longDateFormat[e]=t),t}function fi(){return this._invalidDate}function hi(e){return this._ordinal.replace("%d",e)}function pi(e){return e}function vi(e,t,n,r){var i=this._relativeTime[n];return typeof i=="function"?i(e,t,n,r):i.replace(/%d/i,e)}function mi(e,t){var n=this._relativeTime[e>0?"future":"past"];return typeof n=="function"?n(t):n.replace(/%s/i,t)}function gi(e){var t,n;for(n in e)t=e[n],typeof t=="function"?this[n]=t:this["_"+n]=t;this._ordinalParseLenient=new RegExp(this._ordinalParse.source+"|"+/\d{1,2}/.source)}function bi(e,t,n,r){var i=L(),s=a().set(r,t);return i[n](s,e)}function wi(e,t,n,r,i){typeof e=="number"&&(t=e,e=undefined),e=e||"";if(t!=null)return bi(e,t,n,i);var s,o=[];for(s=0;s<r;s++)o[s]=bi(e,s,n,i);return o}function Ei(e,t){return wi(e,t,"months",12,"month")}function Si(e,t){return wi(e,t,"monthsShort",12,"month")}function xi(e,t){return wi(e,t,"weekdays",7,"day")}function Ti(e,t){return wi(e,t,"weekdaysShort",7,"day")}function Ni(e,t){return wi(e,t,"weekdaysMin",7,"day")}function ki(){var e=this._data;return this._milliseconds=Ci(this._milliseconds),this._days=Ci(this._days),this._months=Ci(this._months),e.milliseconds=Ci(e.milliseconds),e.seconds=Ci(e.seconds),e.minutes=Ci(e.minutes),e.hours=Ci(e.hours),e.months=Ci(e.months),e.years=Ci(e.years),this}function Li(e,t,n,r){var i=Rn(t,n);return e._milliseconds+=r*i._milliseconds,e._days+=r*i._days,e._months+=r*i._months,e._bubble()}function Ai(e,t){return Li(this,e,t,1)}function Oi(e,t){return Li(this,e,t,-1)}function Mi(){var e=this._milliseconds,t=this._days,n=this._months,r=this._data,i,s,o,u=0;return r.milliseconds=e%1e3,i=tr(e/1e3),r.seconds=i%60,s=tr(i/60),r.minutes=s%60,o=tr(s/60),r.hours=o%24,t+=tr(o/24),u=tr(_i(t)),t-=tr(Di(u)),n+=tr(t/30),t%=30,u+=tr(n/12),n%=12,r.days=t,r.months=n,r.years=u,this}function _i(e){return e*400/146097}function Di(e){return e*146097/400}function Pi(e){var t,n,r=this._milliseconds;e=M(e);if(e==="month"||e==="year")return t=this._days+r/864e5,n=this._months+_i(t)*12,e==="month"?n:n/12;t=this._days+Math.round(Di(this._months/12));switch(e){case"week":return t/7+r/6048e5;case"day":return t+r/864e5;case"hour":return t*24+r/36e5;case"minute":return t*1440+r/6e4;case"second":return t*86400+r/1e3;case"millisecond":return Math.floor(t*864e5)+r;default:throw new Error("Unknown unit "+e)}}function Hi(){return this._milliseconds+this._days*864e5+this._months%12*2592e6+y(this._months/12)*31536e6}function Bi(e){return function(){return this.as(e)}}function Xi(e){return e=M(e),this[e+"s"]()}function Vi(e){return function(){return this._data[e]}}function es(){return tr(this.days()/7)}function rs(e,t,n,r,i){return i.relativeTime(t||1,!!n,e,r)}function is(e,t,n){var r=Rn(e).abs(),i=ts(r.as("s")),s=ts(r.as("m")),o=ts(r.as("h")),u=ts(r.as("d")),a=ts(r.as("M")),f=ts(r.as("y")),l=i<ns.s&&["s",i]||s===1&&["m"]||s<ns.m&&["mm",s]||o===1&&["h"]||o<ns.h&&["hh",o]||u===1&&["d"]||u<ns.d&&["dd",u]||a===1&&["M"]||a<ns.M&&["MM",a]||f===1&&["y"]||["yy",f];return l[2]=t,l[3]=+e>0,l[4]=n,rs.apply(null,l)}function ss(e,t){return ns[e]===undefined?!1:t===undefined?ns[e]:(ns[e]=t,!0)}function os(e){var t=this.localeData(),n=is(this,!e,t);return e&&(n=t.pastFuture(+this,n)),t.postformat(n)}function as(){var e=us(this.years()),t=us(this.months()),n=us(this.days()),r=us(this.hours()),i=us(this.minutes()),s=us(this.seconds()+this.milliseconds()/1e3),o=this.asSeconds();return o?(o<0?"-":"")+"P"+(e?e+"Y":"")+(t?t+"M":"")+(n?n+"D":"")+(r||i||s?"T":"")+(r?r+"H":"")+(i?i+"M":"")+(s?s+"S":""):"P0D"}var e,p=t.momentProperties=[],v=!1,E={},S,A={},F=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Q|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,4}|x|X|zz?|ZZ?|.)/g,I=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,q={},R={},$=/\d/,J=/\d\d/,K=/\d{3}/,Q=/\d{4}/,G=/[+-]?\d{6}/,Y=/\d\d?/,Z=/\d{1,3}/,et=/\d{1,4}/,tt=/[+-]?\d{1,6}/,nt=/\d+/,rt=/[+-]?\d+/,it=/Z|[+-]\d\d:?\d\d/gi,st=/[+-]?\d+(\.\d{1,3})?/,ot=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,ut={},ct={},vt=0,mt=1,gt=2,yt=3,bt=4,wt=5,Et=6;U("M",["MM",2],"Mo",function(){return this.month()+1}),U("MMM",0,0,function(e){return this.localeData().monthsShort(this,e)}),U("MMMM",0,0,function(e){return this.localeData().months(this,e)}),O("month","M"),at("M",Y),at("MM",Y,J),at("MMM",ot),at("MMMM",ot),ht(["M","MM"],function(e,t){t[mt]=y(e)-1}),ht(["MMM","MMMM"],function(e,t,n,r){var i=n._locale.monthsParse(e,r,n._strict);i!=null?t[mt]=i:l(n).invalidMonth=e});var xt="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),Nt="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),Pt={};t.suppressDeprecationWarnings=!1;var Bt=/^\s*(?:[+-]\d{6}|\d{4})-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,jt=[["YYYYYY-MM-DD",/[+-]\d{6}-\d{2}-\d{2}/],["YYYY-MM-DD",/\d{4}-\d{2}-\d{2}/],["GGGG-[W]WW-E",/\d{4}-W\d{2}-\d/],["GGGG-[W]WW",/\d{4}-W\d{2}/],["YYYY-DDD",/\d{4}-\d{3}/]],Ft=[["HH:mm:ss.SSSS",/(T| )\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]],It=/^\/?Date\((\-?\d+)/i;t.createFromInputFallback=Dt("moment construction falls back to js Date. This is discouraged and will be removed in upcoming major release. Please refer to https://github.com/moment/moment/issues/1407 for more info.",function(e){e._d=new Date(e._i+(e._useUTC?" UTC":""))}),U(0,["YY",2],0,function(){return this.year()%100}),U(0,["YYYY",4],0,"year"),U(0,["YYYYY",5],0,"year"),U(0,["YYYYYY",6,!0],0,"year"),O("year","y"),at("Y",rt),at("YY",Y,J),at("YYYY",et,Q),at("YYYYY",tt,G),at("YYYYYY",tt,G),ht(["YYYY","YYYYY","YYYYYY"],vt),ht("YY",function(e,n){n[vt]=t.parseTwoDigitYear(e)}),t.parseTwoDigitYear=function(e){return y(e)+(y(e)>68?1900:2e3)};var Vt=D("FullYear",!1);U("w",["ww",2],"wo","week"),U("W",["WW",2],"Wo","isoWeek"),O("week","w"),O("isoWeek","W"),at("w",Y),at("ww",Y,J),at("W",Y),at("WW",Y,J),pt(["w","ww","W","WW"],function(e,t,n,r){t[r.substr(0,1)]=y(e)});var Qt={dow:0,doy:6};U("DDD",["DDDD",3],"DDDo","dayOfYear"),O("dayOfYear","DDD"),at("DDD",Z),at("DDDD",K),ht(["DDD","DDDD"],function(e,t,n){n._dayOfYear=y(e)}),t.ISO_8601=function(){};var mn=Dt("moment().min is deprecated, use moment.min instead. https://github.com/moment/moment/issues/1548",function(){var e=vn.apply(null,arguments);return e<this?this:e}),gn=Dt("moment().max is deprecated, use moment.max instead. https://github.com/moment/moment/issues/1548",function(){var e=vn.apply(null,arguments);return e>this?this:e});xn("Z",":"),xn("ZZ",""),at("Z",it),at("ZZ",it),ht(["Z","ZZ"],function(e,t,n){n._useUTC=!0,n._tzm=Nn(e)});var Tn=/([\+\-]|\d\d)/gi;t.updateOffset=function(){};var In=/(\-)?(?:(\d*)\.)?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?)?/,qn=/^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/;Rn.fn=En.prototype;var $n=Xn(1,"add"),Jn=Xn(-1,"subtract");t.defaultFormat="YYYY-MM-DDTHH:mm:ssZ";var hr=Dt("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(e){return e===undefined?this.localeData():this.locale(e)});U(0,["gg",2],0,function(){return this.weekYear()%100}),U(0,["GG",2],0,function(){return this.isoWeekYear()%100}),xr("gggg","weekYear"),xr("ggggg","weekYear"),xr("GGGG","isoWeekYear"),xr("GGGGG","isoWeekYear"),O("weekYear","gg"),O("isoWeekYear","GG"),at("G",rt),at("g",rt),at("GG",Y,J),at("gg",Y,J),at("GGGG",et,Q),at("gggg",et,Q),at("GGGGG",tt,G),at("ggggg",tt,G),pt(["gggg","ggggg","GGGG","GGGGG"],function(e,t,n,r){t[r.substr(0,2)]=y(e)}),pt(["gg","GG"],function(e,n,r,i){n[i]=t.parseTwoDigitYear(e)}),U("Q",0,0,"quarter"),O("quarter","Q"),at("Q",$),ht("Q",function(e,t){t[mt]=(y(e)-1)*3}),U("D",["DD",2],"Do","date"),O("date","D"),at("D",Y),at("DD",Y,J),at("Do",function(e,t){return e?t._ordinalParse:t._ordinalParseLenient}),ht(["D","DD"],gt),ht("Do",function(e,t){t[gt]=y(e.match(Y)[0],10)});var Or=D("Date",!0);U("d",0,"do","day"),U("dd",0,0,function(e){return this.localeData().weekdaysMin(this,e)}),U("ddd",0,0,function(e){return this.localeData().weekdaysShort(this,e)}),U("dddd",0,0,function(e){return this.localeData().weekdays(this,e)}),U("e",0,0,"weekday"),U("E",0,0,"isoWeekday"),O("day","d"),O("weekday","e"),O("isoWeekday","E"),at("d",Y),at("e",Y),at("E",Y),at("dd",ot),at("ddd",ot),at("dddd",ot),pt(["dd","ddd","dddd"],function(e,t,n){var r=n._locale.weekdaysParse(e);r!=null?t.d=r:l(n).invalidWeekday=e}),pt(["d","e","E"],function(e,t,n,r){t[r]=y(e)});var _r="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),Pr="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),Br="Su_Mo_Tu_We_Th_Fr_Sa".split("_");U("H",["HH",2],0,"hour"),U("h",["hh",2],0,function(){return this.hours()%12||12}),Ur("a",!0),Ur("A",!1),O("hour","h"),at("a",zr),at("A",zr),at("H",Y),at("h",Y),at("HH",Y,J),at("hh",Y,J),ht(["H","HH"],yt),ht(["a","A"],function(e,t,n){n._isPm=n._locale.isPM(e),n._meridiem=e}),ht(["h","hh"],function(e,t,n){t[yt]=y(e),l(n).bigHour=!0});var Xr=/[ap]\.?m?\.?/i,$r=D("Hours",!0);U("m",["mm",2],0,"minute"),O("minute","m"),at("m",Y),at("mm",Y,J),ht(["m","mm"],bt);var Jr=D("Minutes",!1);U("s",["ss",2],0,"second"),O("second","s"),at("s",Y),at("ss",Y,J),ht(["s","ss"],wt);var Kr=D("Seconds",!1);U("S",0,0,function(){return~~(this.millisecond()/100)}),U(0,["SS",2],0,function(){return~~(this.millisecond()/10)}),Qr("SSS"),Qr("SSSS"),O("millisecond","ms"),at("S",Z,$),at("SS",Z,J),at("SSS",Z,K),at("SSSS",nt),ht(["S","SS","SSS","SSSS"],function(e,t){t[Et]=y(("0."+e)*1e3)});var Gr=D("Milliseconds",!1);U("z",0,0,"zoneAbbr"),U("zz",0,0,"zoneName");var ei=m.prototype;ei.add=$n,ei.calendar=Kn,ei.clone=Qn,ei.diff=nr,ei.endOf=vr,ei.format=or,ei.from=ur,ei.fromNow=ar,ei.to=fr,ei.toNow=lr,ei.get=B,ei.invalidAt=Sr,ei.isAfter=Gn,ei.isBefore=Yn,ei.isBetween=Zn,ei.isSame=er,ei.isValid=wr,ei.lang=hr,ei.locale=cr,ei.localeData=pr,ei.max=gn,ei.min=mn,ei.parsingFlags=Er,ei.set=B,ei.startOf=dr,ei.subtract=Jn,ei.toArray=br,ei.toDate=yr,ei.toISOString=sr,ei.toJSON=sr,ei.toString=ir,ei.unix=gr,ei.valueOf=mr,ei.year=Vt,ei.isLeapYear=$t,ei.weekYear=Nr,ei.isoWeekYear=Cr,ei.quarter=ei.quarters=Ar,ei.month=At,ei.daysInMonth=Ot,ei.week=ei.weeks=Zt,ei.isoWeek=ei.isoWeeks=en,ei.weeksInYear=Lr,ei.isoWeeksInYear=kr,ei.date=Or,ei.day=ei.days=Ir,ei.weekday=qr,ei.isoWeekday=Rr,ei.dayOfYear=nn,ei.hour=ei.hours=$r,ei.minute=ei.minutes=Jr,ei.second=ei.seconds=Kr,ei.millisecond=ei.milliseconds=Gr,ei.utcOffset=Ln,ei.utc=On,ei.local=Mn,ei.parseZone=_n,ei.hasAlignedHourOffset=Dn,ei.isDST=Pn,ei.isDSTShifted=Hn,ei.isLocal=Bn,ei.isUtcOffset=jn,ei.isUtc=Fn,ei.isUTC=Fn,ei.zoneAbbr=Yr,ei.zoneName=Zr,ei.dates=Dt("dates accessor is deprecated. Use date instead.",Or),ei.months=Dt("months accessor is deprecated. Use month instead",At),ei.years=Dt("years accessor is deprecated. Use year instead",Vt),ei.zone=Dt("moment().zone is deprecated, use moment().utcOffset instead. https://github.com/moment/moment/issues/1779",An);var ti=ei,ii={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},oi={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY LT",LLLL:"dddd, MMMM D, YYYY LT"},ai="Invalid date",li="%d",ci=/\d{1,2}/,di={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},yi=w.prototype;yi._calendar=ii,yi.calendar=si,yi._longDateFormat=oi,yi.longDateFormat=ui,yi._invalidDate=ai,yi.invalidDate=fi,yi._ordinal=li,yi.ordinal=hi,yi._ordinalParse=ci,yi.preparse=pi,yi.postformat=pi,yi._relativeTime=di,yi.relativeTime=vi,yi.pastFuture=mi,yi.set=gi,yi.months=Tt,yi._months=xt,yi.monthsShort=Ct,yi._monthsShort=Nt,yi.monthsParse=kt,yi.week=Kt,yi._week=Qt,yi.firstDayOfYear=Yt,yi.firstDayOfWeek=Gt,yi.weekdays=Dr,yi._weekdays=_r,yi.weekdaysMin=jr,yi._weekdaysMin=Br,yi.weekdaysShort=Hr,yi._weekdaysShort=Pr,yi.weekdaysParse=Fr,yi.isPM=Wr,yi._meridiemParse=Xr,yi.meridiem=Vr,C("en",{ordinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(e){var t=e%10,n=y(e%100/10)===1?"th":t===1?"st":t===2?"nd":t===3?"rd":"th";return e+n}}),t.lang=Dt("moment.lang is deprecated. Use moment.locale instead.",C),t.langData=Dt("moment.langData is deprecated. Use moment.localeData instead.",L);var Ci=Math.abs,ji=Bi("ms"),Fi=Bi("s"),Ii=Bi("m"),qi=Bi("h"),Ri=Bi("d"),Ui=Bi("w"),zi=Bi("M"),Wi=Bi("y"),$i=Vi("milliseconds"),Ji=Vi("seconds"),Ki=Vi("minutes"),Qi=Vi("hours"),Gi=Vi("days"),Yi=Vi("months"),Zi=Vi("years"),ts=Math.round,ns={s:45,m:45,h:22,d:26,M:11},us=Math.abs,fs=En.prototype;fs.abs=ki,fs.add=Ai,fs.subtract=Oi,fs.as=Pi,fs.asMilliseconds=ji,fs.asSeconds=Fi,fs.asMinutes=Ii,fs.asHours=qi,fs.asDays=Ri,fs.asWeeks=Ui,fs.asMonths=zi,fs.asYears=Wi,fs.valueOf=Hi,fs._bubble=Mi,fs.get=Xi,fs.milliseconds=$i,fs.seconds=Ji,fs.minutes=Ki,fs.hours=Qi,fs.days=Gi,fs.weeks=es,fs.months=Yi,fs.years=Zi,fs.humanize=os,fs.toISOString=as,fs.toString=as,fs.toJSON=as,fs.locale=cr,fs.localeData=pr,fs.toIsoString=Dt("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",as),fs.lang=hr,U("X",0,0,"unix"),U("x",0,0,"valueOf"),at("x",rt),at("X",st),ht("X",function(e,t,n){n._d=new Date(parseFloat(e,10)*1e3)}),ht("x",function(e,t,n){n._d=new Date(y(e))}),t.version="2.10.3",n(vn),t.fn=ti,t.min=bn,t.max=wn,t.utc=a,t.unix=ni,t.months=Ei,t.isDate=i,t.locale=C,t.invalid=h,t.duration=Rn,t.isMoment=g,t.weekdays=xi,t.parseZone=ri,t.localeData=L,t.isDuration=Sn,t.monthsShort=Si,t.weekdaysMin=Ni,t.defineLocale=k,t.weekdaysShort=Ti,t.normalizeUnits=M,t.relativeTimeThreshold=ss;var ls=t;return ls}),define("js/demand",["require","jquery","underscore","json2xml","moment"],function(e){function u(e){function u(e){function a(e){return n.extend({},t,{"@sourceStoreUuid":s[e.name],"@targetAgentUuid":e.targetAgentUuid,"@sourceAgentUuid":e.sourceAgentUuid,"@moment":i(e.moment).format("YYYY-MM-DDTHH:mm:ss.SSSZ"),"@vatIncluded":!0,shipmentOut:n.map(e.shipmentOuts,f)},n.pick(e,"externalcode"))}function f(e){function t(e){return{"@sum":e?l(+e*100):l(0),"@sumInCurrency":e?l(+e*100):l(0)}}return{"@quantity":e.quantity,"@goodUuid":o[e.code],"@vat":0,"@discount":0,basePrice:t(e.price),price:t(e.price)}}function l(e){return[e,".0"].join("")}var t={"@targetAgentUuid":"052d5bbc-f5c7-11e4-7a40-e89700000466","@sourceAgentUuid":"052b69fe-f5c7-11e4-7a40-e89700000461"},u={collection:{demand:n.chain(e).map(a).value()}};return r(u)}return t.when(h("Demand")).then(d(u(e))).promise()}function a(e){return e}function f(e){function i(){return n.chain(e).pluck("name").value()}function o(e){return n.map(t(e).find("warehouse").get(),t)}function u(e){function t(e){s[e.attr("name")]=e.find("> uuid").text()}n.each(e,t)}function a(e){function t(e){return e.attr("name")}return n.map(e,t)}function f(e){return n.difference(r,e)}function l(t){return n.isEmpty(t)?g(e):y({code:"warehouse",title:"Попытка импортирования в несуществующий склад!",cause:"Причина: в электронных таблицах указан неверное название склада/ов: "+t.join("\n"),advice:"Совет: проверьте, что склад с заданным именем существует в Мой Склад",status:"warning"})}var r=n.uniq(i());return t.when(c("Warehouse")).then(p).then(o).done(u).then(a).then(f).then(l).promise()}function l(e){function i(e){return n.map(t(e).find("good").get(),t)}function s(){return n.chain(e).pluck("shipmentOuts").flatten().pluck("code").value()}function u(e){function t(e){o[e.find("> code").text()]=e.find("> uuid").text()}n.each(e,t)}function a(e){function t(e){return e.find("code").text()}return n.map(e,t)}function f(e){return n.difference(r,e)}function l(t){return n.isEmpty(t)?g(e):y({code:"good",title:"Попытка импортирования несуществующего товара!",cause:"Причина: в электронных таблицах указан неверный код для товара/ов: "+t.join("\n"),advice:"Совет: проверьте, что товар с заданным кодом существует в Мой Склад",status:"warning"})}var r=n.uniq(s());return t.when(c("Good",{code:r})).then(p).then(i).done(u).then(a).then(f).then(l).promise()}function c(e,t){function r(){function e(e){function t(t){return[e[0],encodeURIComponent(t)].join(encodeURIComponent("="))}return n.chain(e[1]).map(t).flatten().value().join(";")}return"?filter="+n.chain(n.pairs(t)).map(e).value().join("")}return["https://online.moysklad.ru/exchange/rest/ms/xml/",e,"/list",t?r():""].join("")}function h(e){return["https://online.moysklad.ru/exchange/rest/ms/xml/",e,"/list/update"].join("")}function p(e){return t.get(e).then(v,m)}function d(e){return function(n){return t.ajax({type:"PUT",url:n,data:'<?xml version="1.0" encoding="UTF-8" ?>'+e,dataType:"xml",contentType:"application/xml"}).then(v,m)}}function v(e){var n=t(e),r=n.has("error").length>0;if(r){var i=n.find("error").text(),s=/Caused by.*?\n/gim.exec(i);return y({title:"Неизвестная ошибка!",cause:s.length?s[0]:i.replace(/\n/g,"<br/>"),advice:"Совет: повторите ошибку, чтобы запомнить последовательность ее возникновения, опишите ошибку в письме, скопируйте причину из этого диалога и отправьте письмо по адресу alexhalf@gmail.com"})}return e}function m(e){return e.responseXML?v(e.responseXML):e.status===403?{title:"Запрет доступа!",cause:"Причина: Сервис Мой Склад запретил доступ к своему REST сервису для данного логина",advice:"Совет: возможно истек срок в 14 дней для бесплатного эккаунта, создайте новый или обратитесь в службу поддержки Мой Склад",status:"warning"}:e.status===401?{title:"Ошибка авторизации!",cause:"Вы ввели не правильный логин или пароль",advice:"Совет: проверьте раскладку клавиатуры и выключен ли CAPSLOCK",status:"warning"}:e}function g(e){return(new t.Deferred).resolve(e).promise()}function y(e){return(new t.Deferred).reject(e).promise()}var t=e("jquery"),n=e("underscore");e("json2xml");var r=window.json2xml,i=e("moment"),s={},o={};return{checkGoods:l,checkWarehouses:f,checkDemands:a,updateDemands:u}}),define("js/sheetrock",[],function(){"use strict";var e=null,t={2014:{apiEndpoint:"https://docs.google.com/spreadsheets/d/%key%/gviz/tq?",keyFormat:new RegExp("spreadsheets/d/([^/#]+)","i"),gidFormat:new RegExp("gid=([^/&#]+)","i")},2010:{apiEndpoint:"https://spreadsheets.google.com/tq?key=%key%&",keyFormat:new RegExp("key=([^&#]+)","i"),gidFormat:new RegExp("gid=([^/&#]+)","i")}},n={loaded:{},failed:{},labels:{},header:{},offset:{}},r=0,i=window.document,s=typeof e!="function",o=window.jQuery&&window.jQuery.fn&&window.jQuery.fn.jquery,u=!1;Array.prototype.forEach||(Array.prototype.forEach=function(e){var t,n=this,r=n.length;for(t=0;t<r;t+=1)e(n[t],t)}),Array.prototype.map||(Array.prototype.map=function(e){var t=this,n=[];return t.forEach(function(t,r){n[r]=e(t,r)}),n}),Object.keys||(Object.keys=function(e){var t,n=[];for(t in e)e.hasOwnProperty(t)&&n.push(t);return n});var a=function(e,t,r){e instanceof Error||(e=new Error(e)),t&&t.request&&t.request.index&&(n.failed[t.request.index]=!0);if(!(t&&t.user&&t.user.callback))throw e;t.user.callback(e,t,r||null)},f=function(e){return e.toString().replace(/^ +/,"").replace(/ +$/,"")},l=function(e){return Math.max(0,parseInt(e,10)||0)},c=function(e,t){var n=" "+e.className+" ";return n.indexOf(" "+t+" ")!==-1},h=function(e){return e=e||{},e.jquery&&e.length&&(e=e[0]),e.nodeType&&e.nodeType===1?e:!1},p=function(){if(i&&s){var e=i.createElement("script");u=e.addEventListener&&e.removeEventListener}return{dom:!!i,jquery:o?o:!1,callbackOn404:s==="request"||u,transport:s?"jsonp":"request"}},d=function(e){var n={},r=Object.keys(t);return r.forEach(function(r){var i=t[r];i.keyFormat.test(e)&&i.gidFormat.test(e)&&(n.key=e.match(i.keyFormat)[1],n.gid=e.match(i.gidFormat)[1],n.apiEndpoint=i.apiEndpoint.replace("%key%",n.key))}),n},v=function(e){return e.key&&e.gid?e.key+"_"+e.gid+"_"+e.query:null},m=function(e){var t=e&&e.v?e.v:"";return t instanceof Array&&(t=e.f||t.join("")),f(t)},g=function(e,t,n){var r={cells:{},cellsArray:t,labels:n,num:e};return t.forEach(function(e,t){r.cells[n[t]]=e}),r},y=function(e,t){return"<"+t+">"+e+"</"+t+">"},b=function(e){var t=e.num?"td":"th",n=Object.keys(e.cells),r="";return n.forEach(function(n){r+=y(e.cells[n],t)}),y(r,"tr")},w=function(e){n.loaded[e]=!1,n.failed[e]=!1,n.labels[e]=!1,n.header[e]=0,n.offset[e]=0},E=function(e,t){var n={},r=Object.keys(e);return t.query=t.sql||t.query,t.reset=t.resetStatus||t.reset,t.fetchSize=t.chunkSize||t.fetchSize,t.rowTemplate=t.rowHandler||t.rowTemplate,r.forEach(function(r){n[r]=t[r]||e[r]}),n},S=function(e,t){return t.target=h(t.target)||h(e),t.fetchSize=l(t.fetchSize),t},x=function(e,t){var r=S(e,t),i=d(r.url);return i.query=r.query,i.index=v(i),r.reset&&i.index&&(w(i.index),i.reset=!0),r.offset=n.offset[i.index]||0,r.fetchSize&&i.index&&(i.query+=" limit "+(r.fetchSize+1),i.query+=" offset "+r.offset,n.offset[i.index]=r.offset+r.fetchSize),{user:r,request:i}},T=function(e){if(!e.user.target&&!e.user.callback)throw"No element targeted or callback provided.";if(!e.request.key||!e.request.gid)throw"No key/gid in the provided URL.";if(n.failed[e.request.index])throw"A previous request for this resource failed.";if(n.loaded[e.request.index])throw"No more rows to load!";return e},N=function(e,t){return e&&e.length===t.length?e:t},C=function(e,t){var r=e.request.index,i=n.labels[r],s=e.user.fetchSize,o=t.table.rows,u=t.table.cols,a={last:o.length-1,rowNumberOffset:n.header[r]||0};e.user.offset||(i=u.map(function(e,t){return e.label?e.label.replace(/\s/g,""):(a.last=a.last+1,a.rowNumberOffset=1,m(o[0].c[t]).replace(/\s/g,"")||e.id)}),n.offset[r]=n.offset[r]+a.rowNumberOffset,n.header[r]=a.rowNumberOffset,n.labels[r]=i);if(!s||o.length-a.rowNumberOffset<s)a.last=a.last+1,n.loaded[r]=!0;return a.labels=N(e.user.labels,i),a},k=function(e,t,n){var r=[],i=t.labels;return!e.offset&&!t.rowNumberOffset&&r.push(g(0,i,i)),n.table.rows.forEach(function(n,s){if(n.c&&s<t.last){var o=l(e.offset+s+1-t.rowNumberOffset);r.push(g(o,n.c.map(m),i))}}),r},L=function(e,t,n){if(e.tagName==="TABLE"){var r=i.createElement("thead"),s=i.createElement("tbody");r.innerHTML=t,s.innerHTML=n,e.appendChild(r),e.appendChild(s)}else e.insertAdjacentHTML("beforeEnd",t+n)},A=function(e,t){var n=e.rowTemplate||b,r=i&&i.createElement&&e.target,s=r&&e.target.tagName==="TABLE",o=r&&c(e.target,"sheetrock-header"),u="",a="";return t.forEach(function(e){if(e.num)a+=n(e);else if(s||o)u+=n(e)}),r&&L(e.target,u,a),s?y(u,"thead")+y(a,"tbody"):u+a},O=function(e,t){var n={raw:t};try{var r=n.attributes=C(e,t),i=n.rows=k(e.user,r,t);n.html=A(e.user,i),e.user.callback&&e.user.callback(null,e,n)}catch(s){a("Unexpected API response format.",e,n)}},M=function(t,n){var r={headers:{"X-DataSource-Auth":"true"},url:t.request.url},i=function(e,r,i){if(!e&&r.statusCode===200)try{i=JSON.parse(i.replace(/^\)\]\}\'\n/,"")),n(t,i)}catch(s){a(s,t,{raw:i})}else a(e||"Request failed.",t)};e(r,i)},_=function(e,t){var n=i.getElementsByTagName("head")[0],s=i.createElement("script"),o="_sheetrock_callback_"+r,f=function(){u&&(s.removeEventListener("error",c,!1),s.removeEventListener("abort",c,!1)),n.removeChild(s),delete window[o]},l=function(n){try{t(e,n)}catch(r){a(r,e,{raw:n})}finally{f()}},c=function(){a("Request failed.",e),f()};window[o]=l,e.request.url=e.request.url.replace("%callback%",o),u&&(s.addEventListener("error",c,!1),s.addEventListener("abort",c,!1)),s.type="text/javascript",s.src=e.request.url,n.appendChild(s),r+=1},D=function(e){var t=["gid="+encodeURIComponent(e.request.gid),"tq="+encodeURIComponent(e.request.query)];return s&&t.push("tqx=responseHandler:%callback%"),e.request.apiEndpoint+t.join("&")},P=function(e,t){e.request.url=D(e),s?_(e,t):M(e,t)},H={url:"",query:"",target:null,fetchSize:0,labels:[],rowTemplate:null,callback:null,reset:!1},B=function(e,t){try{e=E(H,e||{}),e=x(this,e),e=T(e),t?O(e,t):P(e,O)}catch(n){a(n,e)}return this};return B.defaults=H,B.version="1.0.0",B.environment=p(),o&&(window.jQuery.fn.sheetrock=B),B}),define("js/googleSheets",["require","js/sheetrock","jquery","underscore","moment"],function(e){function s(e,s){function a(e){return e instanceof Error?e:r.extend(e,{title:["Данные в листе",u.warehouseName,"не верны или не указаны!"].join(" ")})}function f(e){u.warehouseName=r.chain(e).first().result("cellsArray").result(u.moyskladColumnIndex).value()}function l(e){var r=new n.Deferred;return t({url:e,query:"select *",reset:!0,callback:function(e,t,n){e&&r.reject(e),r.resolve(n.rows)}}),r.promise()}function c(e){function o(e){function t(t){r.isUndefined(n[r.first(e.cellsArray)])&&(n[r.first(e.cellsArray)]={}),r.extend(n[r.first(e.cellsArray)],t)}t(r.chain(e.cells).pick(r.chain(e.cells).keys(e.cells).reject(isNaN).value()).value())}function a(e){return{name:u.warehouseName,externalcode:r.first(e.cellsArray,2).join(" "),moment:e.cellsArray[u.dayOfMonthColumnIndex],targetAgentUuid:u.targetAgentUuid,sourceAgentUuid:u.sourceAgentUuid,sum:e.cellsArray[3],shipmentOuts:r.chain(e.cells).pick(r.chain(e.cells).keys(e.cells).reject(isNaN).value()).mapObject(function(t,i){return{code:i,quantity:t,price:n[r.first(e.cellsArray)][i]}}).reject(function(e){return r.isEmpty(e.quantity)}).value()}}function f(e){return!r.isEmpty(e.cellsArray[u.smenaColumnIndex])}function l(e){return r.isEmpty(e.cellsArray[u.smenaColumnIndex])&&!r.isEmpty(e.cellsArray[u.smenaPriceColumnIndex])}function c(e){var n=e.cellsArray[u.dayOfMonthColumnIndex];if(!r.isEmpty(n)){var s=i(n);if(!s.isValid())throw t=undefined,{cause:["Дата",n,"в столбце",u.dayOfMonthColumnIndex+1,"не является датой в каком либо формате"].join(" "),advice:"Совет: Задайте дату",status:"warning"};t=s.format("YYYY-MM-DD")}if(r.isUndefined(t))throw{cause:"В одной из строк не задана дата",advice:"Совет: Задайте дату",status:"warning"};return e.cellsArray[u.dayOfMonthColumnIndex]=t,e}var t,n={};r.chain(r.rest(e,u.skipRow)).map(c).filter(l).each(o).value();var s=r.chain(r.rest(e,u.skipRow)).filter(f).map(a).value();return s}var u=r.extend({skipRow:2,moyskladColumnIndex:1,dayOfMonthColumnIndex:0,smenaColumnIndex:1,smenaPriceColumnIndex:2,warehouseName:"",targetAgentUuid:"",sourceAgentUuid:""},s);return n.when(e).then(l).done(f).then(o(c)).then(r.identity,a).promise()}function o(e){function t(e){return(new n.Deferred).reject(e).promise()}return function(){try{return e.apply(null,arguments)}catch(n){return console.log("catch error",n,this),t(n)}}}var t=e("js/sheetrock"),n=e("jquery"),r=e("underscore"),i=e("moment");return{getSheetsJSON:s}}),define("js/message",["require","jquery","underscore"],function(e){var t=e("jquery"),n=e("underscore"),r=t('<div class="Messages"/>'),i=n.template('<div class="message"><div class="title">(Сообщение) <%=title%></div><div class="cause"><%=cause%></div><div class="advice"><%=advice%></div></div>');return t(".Messages").size()<=0&&r.appendTo("body"),function(e,r){var s=t(i(n.defaults(e,{title:"",cause:"",advice:""}))).addClass(r).appendTo(".Messages");s.css("top",-s.outerHeight()).animate({top:0},1e3).click(function(){t(this).animate({top:-t(this).outerHeight()},500)}),t(window.document).scrollTop(0)}}),define("js/app",["require","taist","version","js/view","js/demand","js/googleSheets","jquery","underscore","js/message"],function(e){function l(e){return function(){try{return e.apply(null,arguments)}catch(t){return c(t)}}}function c(e){return(new o.Deferred).reject(e).promise()}function h(){return{title:"Данные успешно импортированы!",cause:"",advice:""}}function p(e){return e instanceof Error?{code:"unknown",title:"Неизвестная ошибка!",cause:e?"Причина:"+e:"Причина неизвестна",advice:"Совет: повторите ошибку, чтобы запомнить последовательность ее возникновения, опишите ошибку в письме и отправьте письмо по адресу alexhalf@gmail.com",status:"error"}:(t.log("translateUnknownError",e),e)}function d(e){return function(t){return a(t,t.status?t.status:e),t}}var t=e("taist"),n=e("version"),r=e("js/view")(),i=e("js/demand"),s=e("js/googleSheets"),o=e("jquery"),u=e("underscore"),a=e("js/message"),f={};return function(){function a(){o(".refresh-button .b-tool-button").get(0).click()}function c(t){return o.when.apply(o,u.map(t,function(t){return l(s.getSheetsJSON)(t,{targetAgentUuid:e[2].value,sourceAgentUuid:e[3].value})})).then(function(){return u.flatten(arguments)})}function v(e){return o.when(e).then(l(i.checkWarehouses)).then(l(i.checkGoods)).then(l(i.checkDemands)).then(l(i.updateDemands)).promise()}t.log(n);var e=[];r.sync.progress(function(){function t(t){function n(e){return["https://spreadsheets.google.com/spreadsheets/d/",t[0].value,"/edit#gid=",e].join("")}return e=t,u.chain(t[1].value.split(",")).map(n).value()}f={},o.when(r.load.then(t).then(c)).then(v).done(a).then(h,p).done(d("info")).fail(d("error"))})}}),define("main",["require"],function(e){return function(t,n){define("taist",function(){return t}),define("entryPoint",function(){return n}),define("jquery",function(){return window.jQuery?window.jQuery:window.$}),define("version",function(){return"moysklad-import-google-sheets-0.3.0"}),e(["js/app"],function(e){e()})}}),{start:function(e,t){return require(["main"],function(n){return n(e,t)})}}}