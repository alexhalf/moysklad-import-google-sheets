function(){var requirejs,require,define;(function(global){function isFunction(e){return ostring.call(e)==="[object Function]"}function isArray(e){return ostring.call(e)==="[object Array]"}function each(e,t){if(e){var n;for(n=0;n<e.length;n+=1)if(e[n]&&t(e[n],n,e))break}}function eachReverse(e,t){if(e){var n;for(n=e.length-1;n>-1;n-=1)if(e[n]&&t(e[n],n,e))break}}function hasProp(e,t){return hasOwn.call(e,t)}function getOwn(e,t){return hasProp(e,t)&&e[t]}function eachProp(e,t){var n;for(n in e)if(hasProp(e,n)&&t(e[n],n))break}function mixin(e,t,n,r){return t&&eachProp(t,function(t,i){if(n||!hasProp(e,i))r&&typeof t=="object"&&t&&!isArray(t)&&!isFunction(t)&&!(t instanceof RegExp)?(e[i]||(e[i]={}),mixin(e[i],t,n,r)):e[i]=t}),e}function bind(e,t){return function(){return t.apply(e,arguments)}}function scripts(){return document.getElementsByTagName("script")}function defaultOnError(e){throw e}function getGlobal(e){if(!e)return e;var t=global;return each(e.split("."),function(e){t=t[e]}),t}function makeError(e,t,n,r){var i=new Error(t+"\nhttp://requirejs.org/docs/errors.html#"+e);return i.requireType=e,i.requireModules=r,n&&(i.originalError=n),i}function newContext(e){function m(e){var t,n;for(t=0;t<e.length;t++){n=e[t];if(n===".")e.splice(t,1),t-=1;else if(n===".."){if(t===0||t===1&&e[2]===".."||e[t-1]==="..")continue;t>0&&(e.splice(t-1,2),t-=2)}}}function g(e,t,n){var r,i,s,u,a,f,l,c,h,p,d,v,g=t&&t.split("/"),y=o.map,b=y&&y["*"];e&&(e=e.split("/"),l=e.length-1,o.nodeIdCompat&&jsSuffixRegExp.test(e[l])&&(e[l]=e[l].replace(jsSuffixRegExp,"")),e[0].charAt(0)==="."&&g&&(v=g.slice(0,g.length-1),e=v.concat(e)),m(e),e=e.join("/"));if(n&&y&&(g||b)){s=e.split("/");e:for(u=s.length;u>0;u-=1){f=s.slice(0,u).join("/");if(g)for(a=g.length;a>0;a-=1){i=getOwn(y,g.slice(0,a).join("/"));if(i){i=getOwn(i,f);if(i){c=i,h=u;break e}}}!p&&b&&getOwn(b,f)&&(p=getOwn(b,f),d=u)}!c&&p&&(c=p,h=d),c&&(s.splice(0,h,c),e=s.join("/"))}return r=getOwn(o.pkgs,e),r?r:e}function y(e){isBrowser&&each(scripts(),function(t){if(t.getAttribute("data-requiremodule")===e&&t.getAttribute("data-requirecontext")===r.contextName)return t.parentNode.removeChild(t),!0})}function b(e){var t=getOwn(o.paths,e);if(t&&isArray(t)&&t.length>1)return t.shift(),r.require.undef(e),r.makeRequire(null,{skipMap:!0})([e]),!0}function w(e){var t,n=e?e.indexOf("!"):-1;return n>-1&&(t=e.substring(0,n),e=e.substring(n+1,e.length)),[t,e]}function E(e,t,n,i){var s,o,u,a,f=null,l=t?t.name:null,h=e,p=!0,m="";return e||(p=!1,e="_@r"+(d+=1)),a=w(e),f=a[0],e=a[1],f&&(f=g(f,l,i),o=getOwn(c,f)),e&&(f?o&&o.normalize?m=o.normalize(e,function(e){return g(e,l,i)}):m=e.indexOf("!")===-1?g(e,l,i):e:(m=g(e,l,i),a=w(m),f=a[0],m=a[1],n=!0,s=r.nameToUrl(m))),u=f&&!o&&!n?"_unnormalized"+(v+=1):"",{prefix:f,name:m,parentMap:t,unnormalized:!!u,url:s,originalName:h,isDefine:p,id:(f?f+"!"+m:m)+u}}function S(e){var t=e.id,n=getOwn(u,t);return n||(n=u[t]=new r.Module(e)),n}function x(e,t,n){var r=e.id,i=getOwn(u,r);hasProp(c,r)&&(!i||i.defineEmitComplete)?t==="defined"&&n(c[r]):(i=S(e),i.error&&t==="error"?n(i.error):i.on(t,n))}function T(e,t){var n=e.requireModules,r=!1;t?t(e):(each(n,function(t){var n=getOwn(u,t);n&&(n.error=e,n.events.error&&(r=!0,n.emit("error",e)))}),r||req.onError(e))}function N(){globalDefQueue.length&&(apsp.apply(l,[l.length,0].concat(globalDefQueue)),globalDefQueue=[])}function C(e){delete u[e],delete a[e]}function k(e,t,n){var r=e.map.id;e.error?e.emit("error",e.error):(t[r]=!0,each(e.depMaps,function(r,i){var s=r.id,o=getOwn(u,s);o&&!e.depMatched[i]&&!n[s]&&(getOwn(t,s)?(e.defineDep(i,c[s]),e.check()):k(o,t,n))}),n[r]=!0)}function L(){var e,n,i=o.waitSeconds*1e3,u=i&&r.startTime+i<(new Date).getTime(),f=[],l=[],c=!1,h=!0;if(t)return;t=!0,eachProp(a,function(e){var t=e.map,r=t.id;if(!e.enabled)return;t.isDefine||l.push(e);if(!e.error)if(!e.inited&&u)b(r)?(n=!0,c=!0):(f.push(r),y(r));else if(!e.inited&&e.fetched&&t.isDefine){c=!0;if(!t.prefix)return h=!1}});if(u&&f.length)return e=makeError("timeout","Load timeout for modules: "+f,null,f),e.contextName=r.contextName,T(e);h&&each(l,function(e){k(e,{},{})}),(!u||n)&&c&&(isBrowser||isWebWorker)&&!s&&(s=setTimeout(function(){s=0,L()},50)),t=!1}function A(e){hasProp(c,e[0])||S(E(e[0],null,!0)).init(e[1],e[2])}function O(e,t,n,r){e.detachEvent&&!isOpera?r&&e.detachEvent(r,t):e.removeEventListener(n,t,!1)}function M(e){var t=e.currentTarget||e.srcElement;return O(t,r.onScriptLoad,"load","onreadystatechange"),O(t,r.onScriptError,"error"),{node:t,id:t&&t.getAttribute("data-requiremodule")}}function _(){var e;N();while(l.length){e=l.shift();if(e[0]===null)return T(makeError("mismatch","Mismatched anonymous define() module: "+e[e.length-1]));A(e)}}var t,n,r,i,s,o={waitSeconds:7,baseUrl:"./",paths:{},bundles:{},pkgs:{},shim:{},config:{}},u={},a={},f={},l=[],c={},h={},p={},d=1,v=1;return i={require:function(e){return e.require?e.require:e.require=r.makeRequire(e.map)},exports:function(e){e.usingExports=!0;if(e.map.isDefine)return e.exports?c[e.map.id]=e.exports:e.exports=c[e.map.id]={}},module:function(e){return e.module?e.module:e.module={id:e.map.id,uri:e.map.url,config:function(){return getOwn(o.config,e.map.id)||{}},exports:e.exports||(e.exports={})}}},n=function(e){this.events=getOwn(f,e.id)||{},this.map=e,this.shim=getOwn(o.shim,e.id),this.depExports=[],this.depMaps=[],this.depMatched=[],this.pluginMaps={},this.depCount=0},n.prototype={init:function(e,t,n,r){r=r||{};if(this.inited)return;this.factory=t,n?this.on("error",n):this.events.error&&(n=bind(this,function(e){this.emit("error",e)})),this.depMaps=e&&e.slice(0),this.errback=n,this.inited=!0,this.ignore=r.ignore,r.enabled||this.enabled?this.enable():this.check()},defineDep:function(e,t){this.depMatched[e]||(this.depMatched[e]=!0,this.depCount-=1,this.depExports[e]=t)},fetch:function(){if(this.fetched)return;this.fetched=!0,r.startTime=(new Date).getTime();var e=this.map;if(!this.shim)return e.prefix?this.callPlugin():this.load();r.makeRequire(this.map,{enableBuildCallback:!0})(this.shim.deps||[],bind(this,function(){return e.prefix?this.callPlugin():this.load()}))},load:function(){var e=this.map.url;h[e]||(h[e]=!0,r.load(this.map.id,e))},check:function(){if(!this.enabled||this.enabling)return;var e,t,n=this.map.id,i=this.depExports,s=this.exports,o=this.factory;if(!this.inited)this.fetch();else if(this.error)this.emit("error",this.error);else if(!this.defining){this.defining=!0;if(this.depCount<1&&!this.defined){if(isFunction(o)){if(this.events.error&&this.map.isDefine||req.onError!==defaultOnError)try{s=r.execCb(n,o,i,s)}catch(u){e=u}else s=r.execCb(n,o,i,s);this.map.isDefine&&s===undefined&&(t=this.module,t?s=t.exports:this.usingExports&&(s=this.exports));if(e)return e.requireMap=this.map,e.requireModules=this.map.isDefine?[this.map.id]:null,e.requireType=this.map.isDefine?"define":"require",T(this.error=e)}else s=o;this.exports=s,this.map.isDefine&&!this.ignore&&(c[n]=s,req.onResourceLoad&&req.onResourceLoad(r,this.map,this.depMaps)),C(n),this.defined=!0}this.defining=!1,this.defined&&!this.defineEmitted&&(this.defineEmitted=!0,this.emit("defined",this.exports),this.defineEmitComplete=!0)}},callPlugin:function(){var e=this.map,t=e.id,n=E(e.prefix);this.depMaps.push(n),x(n,"defined",bind(this,function(n){var i,s,a,f=getOwn(p,this.map.id),l=this.map.name,c=this.map.parentMap?this.map.parentMap.name:null,h=r.makeRequire(e.parentMap,{enableBuildCallback:!0});if(this.map.unnormalized){n.normalize&&(l=n.normalize(l,function(e){return g(e,c,!0)})||""),s=E(e.prefix+"!"+l,this.map.parentMap),x(s,"defined",bind(this,function(e){this.init([],function(){return e},null,{enabled:!0,ignore:!0})})),a=getOwn(u,s.id),a&&(this.depMaps.push(s),this.events.error&&a.on("error",bind(this,function(e){this.emit("error",e)})),a.enable());return}if(f){this.map.url=r.nameToUrl(f),this.load();return}i=bind(this,function(e){this.init([],function(){return e},null,{enabled:!0})}),i.error=bind(this,function(e){this.inited=!0,this.error=e,e.requireModules=[t],eachProp(u,function(e){e.map.id.indexOf(t+"_unnormalized")===0&&C(e.map.id)}),T(e)}),i.fromText=bind(this,function(n,s){var u=e.name,a=E(u),f=useInteractive;s&&(n=s),f&&(useInteractive=!1),S(a),hasProp(o.config,t)&&(o.config[u]=o.config[t]);try{req.exec(n)}catch(l){return T(makeError("fromtexteval","fromText eval for "+t+" failed: "+l,l,[t]))}f&&(useInteractive=!0),this.depMaps.push(a),r.completeLoad(u),h([u],i)}),n.load(e.name,h,i,o)})),r.enable(n,this),this.pluginMaps[n.id]=n},enable:function(){a[this.map.id]=this,this.enabled=!0,this.enabling=!0,each(this.depMaps,bind(this,function(e,t){var n,s,o;if(typeof e=="string"){e=E(e,this.map.isDefine?this.map:this.map.parentMap,!1,!this.skipMap),this.depMaps[t]=e,o=getOwn(i,e.id);if(o){this.depExports[t]=o(this);return}this.depCount+=1,x(e,"defined",bind(this,function(e){this.defineDep(t,e),this.check()})),this.errback?x(e,"error",bind(this,this.errback)):this.events.error&&x(e,"error",bind(this,function(e){this.emit("error",e)}))}n=e.id,s=u[n],!hasProp(i,n)&&s&&!s.enabled&&r.enable(e,this)})),eachProp(this.pluginMaps,bind(this,function(e){var t=getOwn(u,e.id);t&&!t.enabled&&r.enable(e,this)})),this.enabling=!1,this.check()},on:function(e,t){var n=this.events[e];n||(n=this.events[e]=[]),n.push(t)},emit:function(e,t){each(this.events[e],function(e){e(t)}),e==="error"&&delete this.events[e]}},r={config:o,contextName:e,registry:u,defined:c,urlFetched:h,defQueue:l,Module:n,makeModuleMap:E,nextTick:req.nextTick,onError:T,configure:function(e){e.baseUrl&&e.baseUrl.charAt(e.baseUrl.length-1)!=="/"&&(e.baseUrl+="/");var t=o.shim,n={paths:!0,bundles:!0,config:!0,map:!0};eachProp(e,function(e,t){n[t]?(o[t]||(o[t]={}),mixin(o[t],e,!0,!0)):o[t]=e}),e.bundles&&eachProp(e.bundles,function(e,t){each(e,function(e){e!==t&&(p[e]=t)})}),e.shim&&(eachProp(e.shim,function(e,n){isArray(e)&&(e={deps:e}),(e.exports||e.init)&&!e.exportsFn&&(e.exportsFn=r.makeShimExports(e)),t[n]=e}),o.shim=t),e.packages&&each(e.packages,function(e){var t,n;e=typeof e=="string"?{name:e}:e,n=e.name,t=e.location,t&&(o.paths[n]=e.location),o.pkgs[n]=e.name+"/"+(e.main||"main").replace(currDirRegExp,"").replace(jsSuffixRegExp,"")}),eachProp(u,function(e,t){!e.inited&&!e.map.unnormalized&&(e.map=E(t))}),(e.deps||e.callback)&&r.require(e.deps||[],e.callback)},makeShimExports:function(e){function t(){var t;return e.init&&(t=e.init.apply(global,arguments)),t||e.exports&&getGlobal(e.exports)}return t},makeRequire:function(t,n){function s(o,a,f){var l,h,p;return n.enableBuildCallback&&a&&isFunction(a)&&(a.__requireJsBuild=!0),typeof o=="string"?isFunction(a)?T(makeError("requireargs","Invalid require call"),f):t&&hasProp(i,o)?i[o](u[t.id]):req.get?req.get(r,o,t,s):(h=E(o,t,!1,!0),l=h.id,hasProp(c,l)?c[l]:T(makeError("notloaded",'Module name "'+l+'" has not been loaded yet for context: '+e+(t?"":". Use require([])")))):(_(),r.nextTick(function(){_(),p=S(E(null,t)),p.skipMap=n.skipMap,p.init(o,a,f,{enabled:!0}),L()}),s)}return n=n||{},mixin(s,{isBrowser:isBrowser,toUrl:function(e){var n,i=e.lastIndexOf("."),s=e.split("/")[0],o=s==="."||s==="..";return i!==-1&&(!o||i>1)&&(n=e.substring(i,e.length),e=e.substring(0,i)),r.nameToUrl(g(e,t&&t.id,!0),n,!0)},defined:function(e){return hasProp(c,E(e,t,!1,!0).id)},specified:function(e){return e=E(e,t,!1,!0).id,hasProp(c,e)||hasProp(u,e)}}),t||(s.undef=function(e){N();var n=E(e,t,!0),r=getOwn(u,e);y(e),delete c[e],delete h[n.url],delete f[e],eachReverse(l,function(t,n){t[0]===e&&l.splice(n,1)}),r&&(r.events.defined&&(f[e]=r.events),C(e))}),s},enable:function(e){var t=getOwn(u,e.id);t&&S(e).enable()},completeLoad:function(e){var t,n,r,i=getOwn(o.shim,e)||{},s=i.exports;N();while(l.length){n=l.shift();if(n[0]===null){n[0]=e;if(t)break;t=!0}else n[0]===e&&(t=!0);A(n)}r=getOwn(u,e);if(!t&&!hasProp(c,e)&&r&&!r.inited){if(o.enforceDefine&&(!s||!getGlobal(s))){if(b(e))return;return T(makeError("nodefine","No define call for "+e,null,[e]))}A([e,i.deps||[],i.exportsFn])}L()},nameToUrl:function(e,t,n){var i,s,u,a,f,l,c,h=getOwn(o.pkgs,e);h&&(e=h),c=getOwn(p,e);if(c)return r.nameToUrl(c,t,n);if(req.jsExtRegExp.test(e))f=e+(t||"");else{i=o.paths,s=e.split("/");for(u=s.length;u>0;u-=1){a=s.slice(0,u).join("/"),l=getOwn(i,a);if(l){isArray(l)&&(l=l[0]),s.splice(0,u,l);break}}f=s.join("/"),f+=t||(/^data\:|\?/.test(f)||n?"":".js"),f=(f.charAt(0)==="/"||f.match(/^[\w\+\.\-]+:/)?"":o.baseUrl)+f}return o.urlArgs?f+((f.indexOf("?")===-1?"?":"&")+o.urlArgs):f},load:function(e,t){req.load(r,e,t)},execCb:function(e,t,n,r){return t.apply(r,n)},onScriptLoad:function(e){if(e.type==="load"||readyRegExp.test((e.currentTarget||e.srcElement).readyState)){interactiveScript=null;var t=M(e);r.completeLoad(t.id)}},onScriptError:function(e){var t=M(e);if(!b(t.id))return T(makeError("scripterror","Script error for: "+t.id,e,[t.id]))}},r.require=r.makeRequire(),r}function getInteractiveScript(){return interactiveScript&&interactiveScript.readyState==="interactive"?interactiveScript:(eachReverse(scripts(),function(e){if(e.readyState==="interactive")return interactiveScript=e}),interactiveScript)}var req,s,head,baseElement,dataMain,src,interactiveScript,currentlyAddingScript,mainScript,subPath,version="2.1.17",commentRegExp=/(\/\*([\s\S]*?)\*\/|([^:]|^)\/\/(.*)$)/mg,cjsRequireRegExp=/[^.]\s*require\s*\(\s*["']([^'"\s]+)["']\s*\)/g,jsSuffixRegExp=/\.js$/,currDirRegExp=/^\.\//,op=Object.prototype,ostring=op.toString,hasOwn=op.hasOwnProperty,ap=Array.prototype,apsp=ap.splice,isBrowser=typeof window!="undefined"&&typeof navigator!="undefined"&&!!window.document,isWebWorker=!isBrowser&&typeof importScripts!="undefined",readyRegExp=isBrowser&&navigator.platform==="PLAYSTATION 3"?/^complete$/:/^(complete|loaded)$/,defContextName="_",isOpera=typeof opera!="undefined"&&opera.toString()==="[object Opera]",contexts={},cfg={},globalDefQueue=[],useInteractive=!1;if(typeof define!="undefined")return;if(typeof requirejs!="undefined"){if(isFunction(requirejs))return;cfg=requirejs,requirejs=undefined}typeof require!="undefined"&&!isFunction(require)&&(cfg=require,require=undefined),req=requirejs=function(e,t,n,r){var i,s,o=defContextName;return!isArray(e)&&typeof e!="string"&&(s=e,isArray(t)?(e=t,t=n,n=r):e=[]),s&&s.context&&(o=s.context),i=getOwn(contexts,o),i||(i=contexts[o]=req.s.newContext(o)),s&&i.configure(s),i.require(e,t,n)},req.config=function(e){return req(e)},req.nextTick=typeof setTimeout!="undefined"?function(e){setTimeout(e,4)}:function(e){e()},require||(require=req),req.version=version,req.jsExtRegExp=/^\/|:|\?|\.js$/,req.isBrowser=isBrowser,s=req.s={contexts:contexts,newContext:newContext},req({}),each(["toUrl","undef","defined","specified"],function(e){req[e]=function(){var t=contexts[defContextName];return t.require[e].apply(t,arguments)}}),isBrowser&&(head=s.head=document.getElementsByTagName("head")[0],baseElement=document.getElementsByTagName("base")[0],baseElement&&(head=s.head=baseElement.parentNode)),req.onError=defaultOnError,req.createNode=function(e,t,n){var r=e.xhtml?document.createElementNS("http://www.w3.org/1999/xhtml","html:script"):document.createElement("script");return r.type=e.scriptType||"text/javascript",r.charset="utf-8",r.async=!0,r},req.load=function(e,t,n){var r=e&&e.config||{},i;if(isBrowser)return i=req.createNode(r,t,n),i.setAttribute("data-requirecontext",e.contextName),i.setAttribute("data-requiremodule",t),i.attachEvent&&!(i.attachEvent.toString&&i.attachEvent.toString().indexOf("[native code")<0)&&!isOpera?(useInteractive=!0,i.attachEvent("onreadystatechange",e.onScriptLoad)):(i.addEventListener("load",e.onScriptLoad,!1),i.addEventListener("error",e.onScriptError,!1)),i.src=n,currentlyAddingScript=i,baseElement?head.insertBefore(i,baseElement):head.appendChild(i),currentlyAddingScript=null,i;if(isWebWorker)try{importScripts(n),e.completeLoad(t)}catch(s){e.onError(makeError("importscripts","importScripts failed for "+t+" at "+n,s,[t]))}},isBrowser&&!cfg.skipDataMain&&eachReverse(scripts(),function(e){head||(head=e.parentNode),dataMain=e.getAttribute("data-main");if(dataMain)return mainScript=dataMain,cfg.baseUrl||(src=mainScript.split("/"),mainScript=src.pop(),subPath=src.length?src.join("/")+"/":"./",cfg.baseUrl=subPath),mainScript=mainScript.replace(jsSuffixRegExp,""),req.jsExtRegExp.test(mainScript)&&(mainScript=dataMain),cfg.deps=cfg.deps?cfg.deps.concat(mainScript):[mainScript],!0}),define=function(e,t,n){var r,i;typeof e!="string"&&(n=t,t=e,e=null),isArray(t)||(n=t,t=null),!t&&isFunction(n)&&(t=[],n.length&&(n.toString().replace(commentRegExp,"").replace(cjsRequireRegExp,function(e,n){t.push(n)}),t=(n.length===1?["require"]:["require","exports","module"]).concat(t))),useInteractive&&(r=currentlyAddingScript||getInteractiveScript(),r&&(e||(e=r.getAttribute("data-requiremodule")),i=contexts[r.getAttribute("data-requirecontext")])),(i?i.defQueue:globalDefQueue).push([e,t,n])},define.amd={jQuery:!0},req.exec=function(text){return eval(text)},req(cfg)})(this),define("requirejs",function(){}),function(){function x(e){function t(t,n,r,i,s,o){for(;s>=0&&s<o;s+=e){var u=i?i[s]:s;r=n(r,t[u],u,t)}return r}return function(n,r,i,s){r=v(r,s,4);var o=!S(n)&&d.keys(n),u=(o||n).length,a=e>0?0:u-1;return arguments.length<3&&(i=n[o?o[a]:a],a+=e),t(n,r,i,o,a,u)}}function C(e){return function(t,n,r){n=m(n,r);var i=E(t),s=e>0?0:i-1;for(;s>=0&&s<i;s+=e)if(n(t[s],s,t))return s;return-1}}function k(e,t,n){return function(r,i,s){var u=0,a=E(r);if(typeof s=="number")e>0?u=s>=0?s:Math.max(s+a,u):a=s>=0?Math.min(s+1,a):s+a+1;else if(n&&s&&a)return s=n(r,i),r[s]===i?s:-1;if(i!==i)return s=t(o.call(r,u,a),d.isNaN),s>=0?s+u:-1;for(s=e>0?u:a-1;s>=0&&s<a;s+=e)if(r[s]===i)return s;return-1}}function M(e,t){var n=O.length,i=e.constructor,s=d.isFunction(i)&&i.prototype||r,o="constructor";d.has(e,o)&&!d.contains(t,o)&&t.push(o);while(n--)o=O[n],o in e&&e[o]!==s[o]&&!d.contains(t,o)&&t.push(o)}var e=this,t=e._,n=Array.prototype,r=Object.prototype,i=Function.prototype,s=n.push,o=n.slice,u=r.toString,a=r.hasOwnProperty,f=Array.isArray,l=Object.keys,c=i.bind,h=Object.create,p=function(){},d=function(e){if(e instanceof d)return e;if(!(this instanceof d))return new d(e);this._wrapped=e};typeof exports!="undefined"?(typeof module!="undefined"&&module.exports&&(exports=module.exports=d),exports._=d):e._=d,d.VERSION="1.8.3";var v=function(e,t,n){if(t===void 0)return e;switch(n==null?3:n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,i){return e.call(t,n,r,i)};case 4:return function(n,r,i,s){return e.call(t,n,r,i,s)}}return function(){return e.apply(t,arguments)}},m=function(e,t,n){return e==null?d.identity:d.isFunction(e)?v(e,t,n):d.isObject(e)?d.matcher(e):d.property(e)};d.iteratee=function(e,t){return m(e,t,Infinity)};var g=function(e,t){return function(n){var r=arguments.length;if(r<2||n==null)return n;for(var i=1;i<r;i++){var s=arguments[i],o=e(s),u=o.length;for(var a=0;a<u;a++){var f=o[a];if(!t||n[f]===void 0)n[f]=s[f]}}return n}},y=function(e){if(!d.isObject(e))return{};if(h)return h(e);p.prototype=e;var t=new p;return p.prototype=null,t},b=function(e){return function(t){return t==null?void 0:t[e]}},w=Math.pow(2,53)-1,E=b("length"),S=function(e){var t=E(e);return typeof t=="number"&&t>=0&&t<=w};d.each=d.forEach=function(e,t,n){t=v(t,n);var r,i;if(S(e))for(r=0,i=e.length;r<i;r++)t(e[r],r,e);else{var s=d.keys(e);for(r=0,i=s.length;r<i;r++)t(e[s[r]],s[r],e)}return e},d.map=d.collect=function(e,t,n){t=m(t,n);var r=!S(e)&&d.keys(e),i=(r||e).length,s=Array(i);for(var o=0;o<i;o++){var u=r?r[o]:o;s[o]=t(e[u],u,e)}return s},d.reduce=d.foldl=d.inject=x(1),d.reduceRight=d.foldr=x(-1),d.find=d.detect=function(e,t,n){var r;S(e)?r=d.findIndex(e,t,n):r=d.findKey(e,t,n);if(r!==void 0&&r!==-1)return e[r]},d.filter=d.select=function(e,t,n){var r=[];return t=m(t,n),d.each(e,function(e,n,i){t(e,n,i)&&r.push(e)}),r},d.reject=function(e,t,n){return d.filter(e,d.negate(m(t)),n)},d.every=d.all=function(e,t,n){t=m(t,n);var r=!S(e)&&d.keys(e),i=(r||e).length;for(var s=0;s<i;s++){var o=r?r[s]:s;if(!t(e[o],o,e))return!1}return!0},d.some=d.any=function(e,t,n){t=m(t,n);var r=!S(e)&&d.keys(e),i=(r||e).length;for(var s=0;s<i;s++){var o=r?r[s]:s;if(t(e[o],o,e))return!0}return!1},d.contains=d.includes=d.include=function(e,t,n,r){S(e)||(e=d.values(e));if(typeof n!="number"||r)n=0;return d.indexOf(e,t,n)>=0},d.invoke=function(e,t){var n=o.call(arguments,2),r=d.isFunction(t);return d.map(e,function(e){var i=r?t:e[t];return i==null?i:i.apply(e,n)})},d.pluck=function(e,t){return d.map(e,d.property(t))},d.where=function(e,t){return d.filter(e,d.matcher(t))},d.findWhere=function(e,t){return d.find(e,d.matcher(t))},d.max=function(e,t,n){var r=-Infinity,i=-Infinity,s,o;if(t==null&&e!=null){e=S(e)?e:d.values(e);for(var u=0,a=e.length;u<a;u++)s=e[u],s>r&&(r=s)}else t=m(t,n),d.each(e,function(e,n,s){o=t(e,n,s);if(o>i||o===-Infinity&&r===-Infinity)r=e,i=o});return r},d.min=function(e,t,n){var r=Infinity,i=Infinity,s,o;if(t==null&&e!=null){e=S(e)?e:d.values(e);for(var u=0,a=e.length;u<a;u++)s=e[u],s<r&&(r=s)}else t=m(t,n),d.each(e,function(e,n,s){o=t(e,n,s);if(o<i||o===Infinity&&r===Infinity)r=e,i=o});return r},d.shuffle=function(e){var t=S(e)?e:d.values(e),n=t.length,r=Array(n);for(var i=0,s;i<n;i++)s=d.random(0,i),s!==i&&(r[i]=r[s]),r[s]=t[i];return r},d.sample=function(e,t,n){return t==null||n?(S(e)||(e=d.values(e)),e[d.random(e.length-1)]):d.shuffle(e).slice(0,Math.max(0,t))},d.sortBy=function(e,t,n){return t=m(t,n),d.pluck(d.map(e,function(e,n,r){return{value:e,index:n,criteria:t(e,n,r)}}).sort(function(e,t){var n=e.criteria,r=t.criteria;if(n!==r){if(n>r||n===void 0)return 1;if(n<r||r===void 0)return-1}return e.index-t.index}),"value")};var T=function(e){return function(t,n,r){var i={};return n=m(n,r),d.each(t,function(r,s){var o=n(r,s,t);e(i,r,o)}),i}};d.groupBy=T(function(e,t,n){d.has(e,n)?e[n].push(t):e[n]=[t]}),d.indexBy=T(function(e,t,n){e[n]=t}),d.countBy=T(function(e,t,n){d.has(e,n)?e[n]++:e[n]=1}),d.toArray=function(e){return e?d.isArray(e)?o.call(e):S(e)?d.map(e,d.identity):d.values(e):[]},d.size=function(e){return e==null?0:S(e)?e.length:d.keys(e).length},d.partition=function(e,t,n){t=m(t,n);var r=[],i=[];return d.each(e,function(e,n,s){(t(e,n,s)?r:i).push(e)}),[r,i]},d.first=d.head=d.take=function(e,t,n){return e==null?void 0:t==null||n?e[0]:d.initial(e,e.length-t)},d.initial=function(e,t,n){return o.call(e,0,Math.max(0,e.length-(t==null||n?1:t)))},d.last=function(e,t,n){return e==null?void 0:t==null||n?e[e.length-1]:d.rest(e,Math.max(0,e.length-t))},d.rest=d.tail=d.drop=function(e,t,n){return o.call(e,t==null||n?1:t)},d.compact=function(e){return d.filter(e,d.identity)};var N=function(e,t,n,r){var i=[],s=0;for(var o=r||0,u=E(e);o<u;o++){var a=e[o];if(S(a)&&(d.isArray(a)||d.isArguments(a))){t||(a=N(a,t,n));var f=0,l=a.length;i.length+=l;while(f<l)i[s++]=a[f++]}else n||(i[s++]=a)}return i};d.flatten=function(e,t){return N(e,t,!1)},d.without=function(e){return d.difference(e,o.call(arguments,1))},d.uniq=d.unique=function(e,t,n,r){d.isBoolean(t)||(r=n,n=t,t=!1),n!=null&&(n=m(n,r));var i=[],s=[];for(var o=0,u=E(e);o<u;o++){var a=e[o],f=n?n(a,o,e):a;t?((!o||s!==f)&&i.push(a),s=f):n?d.contains(s,f)||(s.push(f),i.push(a)):d.contains(i,a)||i.push(a)}return i},d.union=function(){return d.uniq(N(arguments,!0,!0))},d.intersection=function(e){var t=[],n=arguments.length;for(var r=0,i=E(e);r<i;r++){var s=e[r];if(d.contains(t,s))continue;for(var o=1;o<n;o++)if(!d.contains(arguments[o],s))break;o===n&&t.push(s)}return t},d.difference=function(e){var t=N(arguments,!0,!0,1);return d.filter(e,function(e){return!d.contains(t,e)})},d.zip=function(){return d.unzip(arguments)},d.unzip=function(e){var t=e&&d.max(e,E).length||0,n=Array(t);for(var r=0;r<t;r++)n[r]=d.pluck(e,r);return n},d.object=function(e,t){var n={};for(var r=0,i=E(e);r<i;r++)t?n[e[r]]=t[r]:n[e[r][0]]=e[r][1];return n},d.findIndex=C(1),d.findLastIndex=C(-1),d.sortedIndex=function(e,t,n,r){n=m(n,r,1);var i=n(t),s=0,o=E(e);while(s<o){var u=Math.floor((s+o)/2);n(e[u])<i?s=u+1:o=u}return s},d.indexOf=k(1,d.findIndex,d.sortedIndex),d.lastIndexOf=k(-1,d.findLastIndex),d.range=function(e,t,n){t==null&&(t=e||0,e=0),n=n||1;var r=Math.max(Math.ceil((t-e)/n),0),i=Array(r);for(var s=0;s<r;s++,e+=n)i[s]=e;return i};var L=function(e,t,n,r,i){if(r instanceof t){var s=y(e.prototype),o=e.apply(s,i);return d.isObject(o)?o:s}return e.apply(n,i)};d.bind=function(e,t){if(c&&e.bind===c)return c.apply(e,o.call(arguments,1));if(!d.isFunction(e))throw new TypeError("Bind must be called on a function");var n=o.call(arguments,2),r=function(){return L(e,r,t,this,n.concat(o.call(arguments)))};return r},d.partial=function(e){var t=o.call(arguments,1),n=function(){var r=0,i=t.length,s=Array(i);for(var o=0;o<i;o++)s[o]=t[o]===d?arguments[r++]:t[o];while(r<arguments.length)s.push(arguments[r++]);return L(e,n,this,this,s)};return n},d.bindAll=function(e){var t,n=arguments.length,r;if(n<=1)throw new Error("bindAll must be passed function names");for(t=1;t<n;t++)r=arguments[t],e[r]=d.bind(e[r],e);return e},d.memoize=function(e,t){var n=function(r){var i=n.cache,s=""+(t?t.apply(this,arguments):r);return d.has(i,s)||(i[s]=e.apply(this,arguments)),i[s]};return n.cache={},n},d.delay=function(e,t){var n=o.call(arguments,2);return setTimeout(function(){return e.apply(null,n)},t)},d.defer=d.partial(d.delay,d,1),d.throttle=function(e,t,n){var r,i,s,o=null,u=0;n||(n={});var a=function(){u=n.leading===!1?0:d.now(),o=null,s=e.apply(r,i),o||(r=i=null)};return function(){var f=d.now();!u&&n.leading===!1&&(u=f);var l=t-(f-u);return r=this,i=arguments,l<=0||l>t?(o&&(clearTimeout(o),o=null),u=f,s=e.apply(r,i),o||(r=i=null)):!o&&n.trailing!==!1&&(o=setTimeout(a,l)),s}},d.debounce=function(e,t,n){var r,i,s,o,u,a=function(){var f=d.now()-o;f<t&&f>=0?r=setTimeout(a,t-f):(r=null,n||(u=e.apply(s,i),r||(s=i=null)))};return function(){s=this,i=arguments,o=d.now();var f=n&&!r;return r||(r=setTimeout(a,t)),f&&(u=e.apply(s,i),s=i=null),u}},d.wrap=function(e,t){return d.partial(t,e)},d.negate=function(e){return function(){return!e.apply(this,arguments)}},d.compose=function(){var e=arguments,t=e.length-1;return function(){var n=t,r=e[t].apply(this,arguments);while(n--)r=e[n].call(this,r);return r}},d.after=function(e,t){return function(){if(--e<1)return t.apply(this,arguments)}},d.before=function(e,t){var n;return function(){return--e>0&&(n=t.apply(this,arguments)),e<=1&&(t=null),n}},d.once=d.partial(d.before,2);var A=!{toString:null}.propertyIsEnumerable("toString"),O=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"];d.keys=function(e){if(!d.isObject(e))return[];if(l)return l(e);var t=[];for(var n in e)d.has(e,n)&&t.push(n);return A&&M(e,t),t},d.allKeys=function(e){if(!d.isObject(e))return[];var t=[];for(var n in e)t.push(n);return A&&M(e,t),t},d.values=function(e){var t=d.keys(e),n=t.length,r=Array(n);for(var i=0;i<n;i++)r[i]=e[t[i]];return r},d.mapObject=function(e,t,n){t=m(t,n);var r=d.keys(e),i=r.length,s={},o;for(var u=0;u<i;u++)o=r[u],s[o]=t(e[o],o,e);return s},d.pairs=function(e){var t=d.keys(e),n=t.length,r=Array(n);for(var i=0;i<n;i++)r[i]=[t[i],e[t[i]]];return r},d.invert=function(e){var t={},n=d.keys(e);for(var r=0,i=n.length;r<i;r++)t[e[n[r]]]=n[r];return t},d.functions=d.methods=function(e){var t=[];for(var n in e)d.isFunction(e[n])&&t.push(n);return t.sort()},d.extend=g(d.allKeys),d.extendOwn=d.assign=g(d.keys),d.findKey=function(e,t,n){t=m(t,n);var r=d.keys(e),i;for(var s=0,o=r.length;s<o;s++){i=r[s];if(t(e[i],i,e))return i}},d.pick=function(e,t,n){var r={},i=e,s,o;if(i==null)return r;d.isFunction(t)?(o=d.allKeys(i),s=v(t,n)):(o=N(arguments,!1,!1,1),s=function(e,t,n){return t in n},i=Object(i));for(var u=0,a=o.length;u<a;u++){var f=o[u],l=i[f];s(l,f,i)&&(r[f]=l)}return r},d.omit=function(e,t,n){if(d.isFunction(t))t=d.negate(t);else{var r=d.map(N(arguments,!1,!1,1),String);t=function(e,t){return!d.contains(r,t)}}return d.pick(e,t,n)},d.defaults=g(d.allKeys,!0),d.create=function(e,t){var n=y(e);return t&&d.extendOwn(n,t),n},d.clone=function(e){return d.isObject(e)?d.isArray(e)?e.slice():d.extend({},e):e},d.tap=function(e,t){return t(e),e},d.isMatch=function(e,t){var n=d.keys(t),r=n.length;if(e==null)return!r;var i=Object(e);for(var s=0;s<r;s++){var o=n[s];if(t[o]!==i[o]||!(o in i))return!1}return!0};var _=function(e,t,n,r){if(e===t)return e!==0||1/e===1/t;if(e==null||t==null)return e===t;e instanceof d&&(e=e._wrapped),t instanceof d&&(t=t._wrapped);var i=u.call(e);if(i!==u.call(t))return!1;switch(i){case"[object RegExp]":case"[object String]":return""+e==""+t;case"[object Number]":if(+e!==+e)return+t!==+t;return+e===0?1/+e===1/t:+e===+t;case"[object Date]":case"[object Boolean]":return+e===+t}var s=i==="[object Array]";if(!s){if(typeof e!="object"||typeof t!="object")return!1;var o=e.constructor,a=t.constructor;if(o!==a&&!(d.isFunction(o)&&o instanceof o&&d.isFunction(a)&&a instanceof a)&&"constructor"in e&&"constructor"in t)return!1}n=n||[],r=r||[];var f=n.length;while(f--)if(n[f]===e)return r[f]===t;n.push(e),r.push(t);if(s){f=e.length;if(f!==t.length)return!1;while(f--)if(!_(e[f],t[f],n,r))return!1}else{var l=d.keys(e),c;f=l.length;if(d.keys(t).length!==f)return!1;while(f--){c=l[f];if(!d.has(t,c)||!_(e[c],t[c],n,r))return!1}}return n.pop(),r.pop(),!0};d.isEqual=function(e,t){return _(e,t)},d.isEmpty=function(e){return e==null?!0:S(e)&&(d.isArray(e)||d.isString(e)||d.isArguments(e))?e.length===0:d.keys(e).length===0},d.isElement=function(e){return!!e&&e.nodeType===1},d.isArray=f||function(e){return u.call(e)==="[object Array]"},d.isObject=function(e){var t=typeof e;return t==="function"||t==="object"&&!!e},d.each(["Arguments","Function","String","Number","Date","RegExp","Error"],function(e){d["is"+e]=function(t){return u.call(t)==="[object "+e+"]"}}),d.isArguments(arguments)||(d.isArguments=function(e){return d.has(e,"callee")}),typeof /./!="function"&&typeof Int8Array!="object"&&(d.isFunction=function(e){return typeof e=="function"||!1}),d.isFinite=function(e){return isFinite(e)&&!isNaN(parseFloat(e))},d.isNaN=function(e){return d.isNumber(e)&&e!==+e},d.isBoolean=function(e){return e===!0||e===!1||u.call(e)==="[object Boolean]"},d.isNull=function(e){return e===null},d.isUndefined=function(e){return e===void 0},d.has=function(e,t){return e!=null&&a.call(e,t)},d.noConflict=function(){return e._=t,this},d.identity=function(e){return e},d.constant=function(e){return function(){return e}},d.noop=function(){},d.property=b,d.propertyOf=function(e){return e==null?function(){}:function(t){return e[t]}},d.matcher=d.matches=function(e){return e=d.extendOwn({},e),function(t){return d.isMatch(t,e)}},d.times=function(e,t,n){var r=Array(Math.max(0,e));t=v(t,n,1);for(var i=0;i<e;i++)r[i]=t(i);return r},d.random=function(e,t){return t==null&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))},d.now=Date.now||function(){return(new Date).getTime()};var D={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},P=d.invert(D),H=function(e){var t=function(t){return e[t]},n="(?:"+d.keys(e).join("|")+")",r=RegExp(n),i=RegExp(n,"g");return function(e){return e=e==null?"":""+e,r.test(e)?e.replace(i,t):e}};d.escape=H(D),d.unescape=H(P),d.result=function(e,t,n){var r=e==null?void 0:e[t];return r===void 0&&(r=n),d.isFunction(r)?r.call(e):r};var B=0;d.uniqueId=function(e){var t=++B+"";return e?e+t:t},d.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var j=/(.)^/,F={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},I=/\\|'|\r|\n|\u2028|\u2029/g,q=function(e){return"\\"+F[e]};d.template=function(e,t,n){!t&&n&&(t=n),t=d.defaults({},t,d.templateSettings);var r=RegExp([(t.escape||j).source,(t.interpolate||j).source,(t.evaluate||j).source].join("|")+"|$","g"),i=0,s="__p+='";e.replace(r,function(t,n,r,o,u){return s+=e.slice(i,u).replace(I,q),i=u+t.length,n?s+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'":r?s+="'+\n((__t=("+r+"))==null?'':__t)+\n'":o&&(s+="';\n"+o+"\n__p+='"),t}),s+="';\n",t.variable||(s="with(obj||{}){\n"+s+"}\n"),s="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+s+"return __p;\n";try{var o=new Function(t.variable||"obj","_",s)}catch(u){throw u.source=s,u}var a=function(e){return o.call(this,e,d)},f=t.variable||"obj";return a.source="function("+f+"){\n"+s+"}",a},d.chain=function(e){var t=d(e);return t._chain=!0,t};var R=function(e,t){return e._chain?d(t).chain():t};d.mixin=function(e){d.each(d.functions(e),function(t){var n=d[t]=e[t];d.prototype[t]=function(){var e=[this._wrapped];return s.apply(e,arguments),R(this,n.apply(d,e))}})},d.mixin(d),d.each(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var t=n[e];d.prototype[e]=function(){var n=this._wrapped;return t.apply(n,arguments),(e==="shift"||e==="splice")&&n.length===0&&delete n[0],R(this,n)}}),d.each(["concat","join","slice"],function(e){var t=n[e];d.prototype[e]=function(){return R(this,t.apply(this._wrapped,arguments))}}),d.prototype.value=function(){return this._wrapped},d.prototype.valueOf=d.prototype.toJSON=d.prototype.value,d.prototype.toString=function(){return""+this._wrapped},typeof define=="function"&&define.amd&&define("underscore",[],function(){return d})}.call(this),function(){var e=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],t=/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,n=/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im,r=[],i={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g},s=function(e,t){var n=i,r="var __p=[],print=function(){__p.push.apply(__p,arguments);};with(obj||{}){__p.push('"+e.replace(/\\/g,"\\\\").replace(/'/g,"\\'").replace(n.interpolate,function(e,t){return"',"+t.replace(/\\'/g,"'")+",'"}).replace(n.evaluate||null,function(e,t){return"');"+t.replace(/\\'/g,"'").replace(/[\r\n\t]/g," ")+"; __p.push('"}).replace(/\r/g,"").replace(/\n/g,"").replace(/\t/g,"")+"');}return __p.join('');";return r};define("tpl",[],function(){var i,o,u;return typeof window!="undefined"&&window.navigator&&window.document?o=function(e,t){var n=i.createXhr();n.open("GET",e,!0),n.onreadystatechange=function(e){n.readyState===4&&t(n.responseText)},n.send(null)}:typeof process!="undefined"&&process.versions&&!!process.versions.node&&(u=require.nodeRequire("fs"),o=function(e,t){t(u.readFileSync(e,"utf8"))}),i={version:"0.24.0",strip:function(e){if(e){e=e.replace(t,"");var r=e.match(n);r&&(e=r[1])}else e="";return e},jsEscape:function(e){return e.replace(/(['\\])/g,"\\$1").replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"").replace(/[\t]/g,"").replace(/[\r]/g,"")},createXhr:function(){var t,n,r;if(typeof XMLHttpRequest!="undefined")return new XMLHttpRequest;for(n=0;n<3;n++){r=e[n];try{t=new ActiveXObject(r)}catch(i){}if(t){e=[r];break}}if(!t)throw new Error("require.getXhr(): XMLHttpRequest not available");return t},get:o,load:function(e,t,n,o){var u=!1,a,f=e.indexOf("."),l=e.substring(0,f),c=e.substring(f+1,e.length);f=c.indexOf("!"),f!==-1&&(u=c.substring(f+1,c.length),u=u==="strip",c=c.substring(0,f)),a="nameToUrl"in t?t.nameToUrl(l,"."+c):t.toUrl(l+"."+c),i.get(a,function(t){t=s(t),o.isBuild||(t=new Function("obj",t)),t=u?i.strip(t):t,o.isBuild&&o.inlineText&&(r[e]=t),n(t)})},write:function(e,t,n){if(t in r){var s=i.jsEscape(r[t]);n("define('"+e+"!"+t+"', function() {return function(obj) { "+s.replace(/(\\')/g,"'").replace(/(\\\\)/g,"\\")+"}});\n")}}}})}(),define("tpl!tpls/inputText.html",function(){return function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push('<div class="form-group">    <label for="taist-',id,'">        ',label,'    </label>    <input id="taist-',id,'" class="form-control taistField" type="text" placeholder="',placeholder,'" /></div>');return __p.join("")}}),define("tpl!tpls/inputSelectList.html",function(){return function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push('<div class="form-group">    <label for="taist-',id,'">        ',label,'    </label>    <div class="fuelux input-group">        <div class="btn-group btn-group-xs selectlist" id="taist-',id,'">            <button class="btn btn-default btn-xs dropdown-toggle" data-toggle="dropdown" type="button">                <span class="selected-label"></span>                <span class="caret"></span>                <span class="sr-only">Toggle Dropdown</span>            </button>            <ul class="dropdown-menu" role="menu">                <li data-value="">                    <a href="#">                        ',placeholder,"                    </a>                </li>                "),_.each(_.result(this,"selectList"),function(e){__p.push('                    <li data-value="',e.value,'">                        <a href="',e.value,'">                            ',e.title,"                        </a>                    </li>                    ")}),__p.push("            </ul>        </div>    </div></div>");return __p.join("")}}),define("tpl!tpls/inputPillbox.html",function(){return function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push('<div class="form-group">    <label for="taist-',id,'">        ',label,'    </label>    <div class="fuelux input-group col-sm-12">        <div class="pillbox" id="taist-',id,'">            <ul class="clearfix pill-group">                <li class="pillbox-input-wrap btn-group dropup">                    <input type="text" class="taistField form-control input-sm dropdown-toggle pillbox-add-item" placeholder="',placeholder,'" />                    <button type="button" class="dropdown-toggle sr-only">                        <span class="caret"></span>                        <span class="sr-only">Toggle Dropdown</span>                    </button>                    <ul class="suggest dropdown-menu" role="menu" data-toggle="dropdown" data-flip="auto">                    </ul>                </li>            </ul>        </div>    </div></div>');return __p.join("")}}),define("tpl!tpls/importToolbar.html",function(){return function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push('<div class="Messages panel panel-default">    <div class="head panel-heading">        <div class="panel-buttons btn-group" role="group">            <button type="button" data-toggle="modal" data-target=".modal.',id,'" class="btn propertiesController">=</button>            <button type="button" class="btn bar">                <div class="bar">                    <div class="progress">                        <div class="spinner progress-bar progress-bar-striped" role="progressbar" aria-valuenow="100"></div>                    </div>                </div>            </button>            <button type="button" class="btn logController collapsed" data-toggle="collapse" data-target=".logMessages">                <span class="caret"></span>            </button>            <button type="button" class="btn importController">Импорт</button>        </div>    </div>    <div class="logMessages pannel-collapse well well-sm"></div></div>');return __p.join("")}}),define("tpl!tpls/importProperties.html",function(){return function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push('<div class="bower properties ',id,'">    <div class="modal ',id,' fade" data-backdrop="false">        <div class="modal-dialog">            <div class="modal-content">                <div class="modal-header">                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>                    <h4 class="modal-title">Настройка импорта из Google Таблицы</h4>                </div>                <div class="modal-body">                    <div class="container-fluid">                        <form></form>                    </div>                </div>                <div class="modal-footer">                    <button type="button" class="btn btn-default" data-dismiss="modal">Закрыть</button>                </div>            </div>            <!-- /.modal-content -->        </div>        <!-- /.modal-dialog -->    </div>    <!-- /.modal --></div>');return __p.join("")}}),define("tpl!tpls/inputButton.html",function(){return function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push('<div class="form-group">    <label for="taist-',id,'">        ',label,'    </label>    <div>        <button id="taist-',id,'" class="btn btn-default btn-xs" type="button">            ',placeholder,"        </button>    </div></div>");return __p.join("")}}),define("tpl!tpls/userInfo.html",function(){return function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push('<img class="img-rounded" style="width: 50px; height: 50px; margin-right: 5px;" src="',picture,'"/>',name," (",email,")");return __p.join("")}}),define("js/message",["require","jquery","underscore"],function(e){function o(e,o){var u=n.mapObject(e,function(t,r){return n.isFunction(e[r])?e[r].call(null,e):e[r]}),a=n.defaults(u,{title:"",cause:"",advice:""});n.isUndefined(o)&&t(".Messages .body").empty();var f=t(r(a)).addClass(o?o:"info").prependTo(i);s.call(null,o,a),f.show(1e3).click(function(){t(this).find(".cause, .advice").slideToggle(1e3)})}function u(e,t){i.appendTo(e),s=t}var t=e("jquery"),n=e("underscore"),r=n.template('<div class="message"><div class="title"><%=title%></div><% if (cause) { %><div class="cause"><%=cause%></div><% } %><% if (advice) { %><div class="advice"><%=advice%></div><% } %></div>'),i=t('<div class="body"/>'),s=t.noop;return{init:u,log:o}}),!function(e){function t(e){return e=e.replace(/\r\n/g,"\n")}function n(e){return e=e.replace(/</g,"&lt;").replace(/&/g,"&amp;"),t(e)}e.json2xml=function(e){var r=function(e,i,s){var o="";if(e instanceof Array)for(var u=0,a=e.length;a>u;u++)o+=r(e[u],i,s+"");else if("object"==typeof e){var f=!1;o+=s+"<"+i;for(var l in e)"@"==l.charAt(0)?o+=" "+l.substr(1)+'="'+e[l].toString()+'"':f=!0;if(o+=f?">\n":"/>",f){for(var l in e)"#text"==l?o+=n(e[l]):"#cdata"==l?o+="<![CDATA["+t(e[l])+"]]>":"@"!=l.charAt(0)&&(o+=r(e[l],l,s+"	"));o+=("\n"==o.charAt(o.length-1)?s:"")+"</"+i+">\n"}}else o+=s+"<"+i+">"+n(e&&e.toString&&e.toString()||"")+"</"+i+">\n";return o},i="";for(var s in e)i+=r(e[s],s,"");return i}}(window),define("json2xml",function(){}),function(e,t){typeof exports=="object"&&typeof module!="undefined"?module.exports=t():typeof define=="function"&&define.amd?define("moment",t):e.moment=t()}(this,function(){"use strict";function t(){return e.apply(null,arguments)}function n(t){e=t}function r(e){return Object.prototype.toString.call(e)==="[object Array]"}function i(e){return e instanceof Date||Object.prototype.toString.call(e)==="[object Date]"}function s(e,t){var n=[],r;for(r=0;r<e.length;++r)n.push(t(e[r],r));return n}function o(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function u(e,t){for(var n in t)o(t,n)&&(e[n]=t[n]);return o(t,"toString")&&(e.toString=t.toString),o(t,"valueOf")&&(e.valueOf=t.valueOf),e}function a(e,t,n,r){return dn(e,t,n,r,!0).utc()}function f(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1}}function l(e){return e._pf==null&&(e._pf=f()),e._pf}function c(e){if(e._isValid==null){var t=l(e);e._isValid=!isNaN(e._d.getTime())&&t.overflow<0&&!t.empty&&!t.invalidMonth&&!t.nullInput&&!t.invalidFormat&&!t.userInvalidated,e._strict&&(e._isValid=e._isValid&&t.charsLeftOver===0&&t.unusedTokens.length===0&&t.bigHour===undefined)}return e._isValid}function h(e){var t=a(NaN);return e!=null?u(l(t),e):l(t).userInvalidated=!0,t}function d(e,t){var n,r,i;typeof t._isAMomentObject!="undefined"&&(e._isAMomentObject=t._isAMomentObject),typeof t._i!="undefined"&&(e._i=t._i),typeof t._f!="undefined"&&(e._f=t._f),typeof t._l!="undefined"&&(e._l=t._l),typeof t._strict!="undefined"&&(e._strict=t._strict),typeof t._tzm!="undefined"&&(e._tzm=t._tzm),typeof t._isUTC!="undefined"&&(e._isUTC=t._isUTC),typeof t._offset!="undefined"&&(e._offset=t._offset),typeof t._pf!="undefined"&&(e._pf=l(t)),typeof t._locale!="undefined"&&(e._locale=t._locale);if(p.length>0)for(n in p)r=p[n],i=t[r],typeof i!="undefined"&&(e[r]=i);return e}function m(e){d(this,e),this._d=new Date(+e._d),v===!1&&(v=!0,t.updateOffset(this),v=!1)}function g(e){return e instanceof m||e!=null&&e._isAMomentObject!=null}function y(e){var t=+e,n=0;return t!==0&&isFinite(t)&&(t>=0?n=Math.floor(t):n=Math.ceil(t)),n}function b(e,t,n){var r=Math.min(e.length,t.length),i=Math.abs(e.length-t.length),s=0,o;for(o=0;o<r;o++)(n&&e[o]!==t[o]||!n&&y(e[o])!==y(t[o]))&&s++;return s+i}function w(){}function x(e){return e?e.toLowerCase().replace("_","-"):e}function T(e){var t=0,n,r,i,s;while(t<e.length){s=x(e[t]).split("-"),n=s.length,r=x(e[t+1]),r=r?r.split("-"):null;while(n>0){i=N(s.slice(0,n).join("-"));if(i)return i;if(r&&r.length>=n&&b(s,r,!0)>=n-1)break;n--}t++}return null}function N(e){var t=null;if(!E[e]&&typeof module!="undefined"&&module&&module.exports)try{t=S._abbr,require("./locale/"+e),C(t)}catch(n){}return E[e]}function C(e,t){var n;return e&&(typeof t=="undefined"?n=L(e):n=k(e,t),n&&(S=n)),S._abbr}function k(e,t){return t!==null?(t.abbr=e,E[e]||(E[e]=new w),E[e].set(t),C(e),E[e]):(delete E[e],null)}function L(e){var t;e&&e._locale&&e._locale._abbr&&(e=e._locale._abbr);if(!e)return S;if(!r(e)){t=N(e);if(t)return t;e=[e]}return T(e)}function O(e,t){var n=e.toLowerCase();A[n]=A[n+"s"]=A[t]=e}function M(e){return typeof e=="string"?A[e]||A[e.toLowerCase()]:undefined}function _(e){var t={},n,r;for(r in e)o(e,r)&&(n=M(r),n&&(t[n]=e[r]));return t}function D(e,n){return function(r){return r!=null?(H(this,e,r),t.updateOffset(this,n),this):P(this,e)}}function P(e,t){return e._d["get"+(e._isUTC?"UTC":"")+t]()}function H(e,t,n){return e._d["set"+(e._isUTC?"UTC":"")+t](n)}function B(e,t){var n;if(typeof e=="object")for(n in e)this.set(n,e[n]);else{e=M(e);if(typeof this[e]=="function")return this[e](t)}return this}function j(e,t,n){var r=""+Math.abs(e),i=e>=0;while(r.length<t)r="0"+r;return(i?n?"+":"":"-")+r}function U(e,t,n,r){var i=r;typeof r=="string"&&(i=function(){return this[r]()}),e&&(R[e]=i),t&&(R[t[0]]=function(){return j(i.apply(this,arguments),t[1],t[2])}),n&&(R[n]=function(){return this.localeData().ordinal(i.apply(this,arguments),e)})}function z(e){return e.match(/\[[\s\S]/)?e.replace(/^\[|\]$/g,""):e.replace(/\\/g,"")}function W(e){var t=e.match(F),n,r;for(n=0,r=t.length;n<r;n++)R[t[n]]?t[n]=R[t[n]]:t[n]=z(t[n]);return function(i){var s="";for(n=0;n<r;n++)s+=t[n]instanceof Function?t[n].call(i,e):t[n];return s}}function X(e,t){return e.isValid()?(t=V(t,e.localeData()),q[t]||(q[t]=W(t)),q[t](e)):e.localeData().invalidDate()}function V(e,t){function r(e){return t.longDateFormat(e)||e}var n=5;I.lastIndex=0;while(n>=0&&I.test(e))e=e.replace(I,r),I.lastIndex=0,n-=1;return e}function at(e,t,n){ut[e]=typeof t=="function"?t:function(e){return e&&n?n:t}}function ft(e,t){return o(ut,e)?ut[e](t._strict,t._locale):new RegExp(lt(e))}function lt(e){return e.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(e,t,n,r,i){return t||n||r||i}).replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function ht(e,t){var n,r=t;typeof e=="string"&&(e=[e]),typeof t=="number"&&(r=function(e,n){n[t]=y(e)});for(n=0;n<e.length;n++)ct[e[n]]=r}function pt(e,t){ht(e,function(e,n,r,i){r._w=r._w||{},t(e,r._w,r,i)})}function dt(e,t,n){t!=null&&o(ct,e)&&ct[e](t,n._a,n,e)}function St(e,t){return(new Date(Date.UTC(e,t+1,0))).getUTCDate()}function Tt(e){return this._months[e.month()]}function Ct(e){return this._monthsShort[e.month()]}function kt(e,t,n){var r,i,s;this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]);for(r=0;r<12;r++){i=a([2e3,r]),n&&!this._longMonthsParse[r]&&(this._longMonthsParse[r]=new RegExp("^"+this.months(i,"").replace(".","")+"$","i"),this._shortMonthsParse[r]=new RegExp("^"+this.monthsShort(i,"").replace(".","")+"$","i")),!n&&!this._monthsParse[r]&&(s="^"+this.months(i,"")+"|^"+this.monthsShort(i,""),this._monthsParse[r]=new RegExp(s.replace(".",""),"i"));if(n&&t==="MMMM"&&this._longMonthsParse[r].test(e))return r;if(n&&t==="MMM"&&this._shortMonthsParse[r].test(e))return r;if(!n&&this._monthsParse[r].test(e))return r}}function Lt(e,t){var n;if(typeof t=="string"){t=e.localeData().monthsParse(t);if(typeof t!="number")return e}return n=Math.min(e.date(),St(e.year(),t)),e._d["set"+(e._isUTC?"UTC":"")+"Month"](t,n),e}function At(e){return e!=null?(Lt(this,e),t.updateOffset(this,!0),this):P(this,"Month")}function Ot(){return St(this.year(),this.month())}function Mt(e){var t,n=e._a;return n&&l(e).overflow===-2&&(t=n[mt]<0||n[mt]>11?mt:n[gt]<1||n[gt]>St(n[vt],n[mt])?gt:n[yt]<0||n[yt]>24||n[yt]===24&&(n[bt]!==0||n[wt]!==0||n[Et]!==0)?yt:n[bt]<0||n[bt]>59?bt:n[wt]<0||n[wt]>59?wt:n[Et]<0||n[Et]>999?Et:-1,l(e)._overflowDayOfYear&&(t<vt||t>gt)&&(t=gt),l(e).overflow=t),e}function _t(e){t.suppressDeprecationWarnings===!1&&typeof console!="undefined"&&console.warn&&console.warn("Deprecation warning: "+e)}function Dt(e,t){var n=!0,r=e+"\n"+(new Error).stack;return u(function(){return n&&(_t(r),n=!1),t.apply(this,arguments)},t)}function Ht(e,t){Pt[e]||(_t(t),Pt[e]=!0)}function qt(e){var t,n,r=e._i,i=Bt.exec(r);if(i){l(e).iso=!0;for(t=0,n=jt.length;t<n;t++)if(jt[t][1].exec(r)){e._f=jt[t][0]+(i[6]||" ");break}for(t=0,n=Ft.length;t<n;t++)if(Ft[t][1].exec(r)){e._f+=Ft[t][0];break}r.match(it)&&(e._f+="Z"),an(e)}else e._isValid=!1}function Rt(e){var n=It.exec(e._i);if(n!==null){e._d=new Date(+n[1]);return}qt(e),e._isValid===!1&&(delete e._isValid,t.createFromInputFallback(e))}function Ut(e,t,n,r,i,s,o){var u=new Date(e,t,n,r,i,s,o);return e<1970&&u.setFullYear(e),u}function zt(e){var t=new Date(Date.UTC.apply(null,arguments));return e<1970&&t.setUTCFullYear(e),t}function Wt(e){return Xt(e)?366:365}function Xt(e){return e%4===0&&e%100!==0||e%400===0}function $t(){return Xt(this.year())}function Jt(e,t,n){var r=n-t,i=n-e.day(),s;return i>r&&(i-=7),i<r-7&&(i+=7),s=vn(e).add(i,"d"),{week:Math.ceil(s.dayOfYear()/7),year:s.year()}}function Kt(e){return Jt(e,this._week.dow,this._week.doy).week}function Gt(){return this._week.dow}function Yt(){return this._week.doy}function Zt(e){var t=this.localeData().week(this);return e==null?t:this.add((e-t)*7,"d")}function en(e){var t=Jt(this,1,4).week;return e==null?t:this.add((e-t)*7,"d")}function tn(e,t,n,r,i){var s=zt(e,0,1).getUTCDay(),o,u;return s=s===0?7:s,n=n!=null?n:i,o=i-s+(s>r?7:0)-(s<i?7:0),u=7*(t-1)+(n-i)+o+1,{year:u>0?e:e-1,dayOfYear:u>0?u:Wt(e-1)+u}}function nn(e){var t=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return e==null?t:this.add(e-t,"d")}function rn(e,t,n){return e!=null?e:t!=null?t:n}function sn(e){var t=new Date;return e._useUTC?[t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()]:[t.getFullYear(),t.getMonth(),t.getDate()]}function on(e){var t,n,r=[],i,s;if(e._d)return;i=sn(e),e._w&&e._a[gt]==null&&e._a[mt]==null&&un(e),e._dayOfYear&&(s=rn(e._a[vt],i[vt]),e._dayOfYear>Wt(s)&&(l(e)._overflowDayOfYear=!0),n=zt(s,0,e._dayOfYear),e._a[mt]=n.getUTCMonth(),e._a[gt]=n.getUTCDate());for(t=0;t<3&&e._a[t]==null;++t)e._a[t]=r[t]=i[t];for(;t<7;t++)e._a[t]=r[t]=e._a[t]==null?t===2?1:0:e._a[t];e._a[yt]===24&&e._a[bt]===0&&e._a[wt]===0&&e._a[Et]===0&&(e._nextDay=!0,e._a[yt]=0),e._d=(e._useUTC?zt:Ut).apply(null,r),e._tzm!=null&&e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),e._nextDay&&(e._a[yt]=24)}function un(e){var t,n,r,i,s,o,u;t=e._w,t.GG!=null||t.W!=null||t.E!=null?(s=1,o=4,n=rn(t.GG,e._a[vt],Jt(vn(),1,4).year),r=rn(t.W,1),i=rn(t.E,1)):(s=e._locale._week.dow,o=e._locale._week.doy,n=rn(t.gg,e._a[vt],Jt(vn(),s,o).year),r=rn(t.w,1),t.d!=null?(i=t.d,i<s&&++r):t.e!=null?i=t.e+s:i=s),u=tn(n,r,i,o,s),e._a[vt]=u.year,e._dayOfYear=u.dayOfYear}function an(e){if(e._f===t.ISO_8601){qt(e);return}e._a=[],l(e).empty=!0;var n=""+e._i,r,i,s,o,u,a=n.length,f=0;s=V(e._f,e._locale).match(F)||[];for(r=0;r<s.length;r++)o=s[r],i=(n.match(ft(o,e))||[])[0],i&&(u=n.substr(0,n.indexOf(i)),u.length>0&&l(e).unusedInput.push(u),n=n.slice(n.indexOf(i)+i.length),f+=i.length),R[o]?(i?l(e).empty=!1:l(e).unusedTokens.push(o),dt(o,i,e)):e._strict&&!i&&l(e).unusedTokens.push(o);l(e).charsLeftOver=a-f,n.length>0&&l(e).unusedInput.push(n),l(e).bigHour===!0&&e._a[yt]<=12&&e._a[yt]>0&&(l(e).bigHour=undefined),e._a[yt]=fn(e._locale,e._a[yt],e._meridiem),on(e),Mt(e)}function fn(e,t,n){var r;return n==null?t:e.meridiemHour!=null?e.meridiemHour(t,n):e.isPM!=null?(r=e.isPM(n),r&&t<12&&(t+=12),!r&&t===12&&(t=0),t):t}function ln(e){var t,n,r,i,s;if(e._f.length===0){l(e).invalidFormat=!0,e._d=new Date(NaN);return}for(i=0;i<e._f.length;i++){s=0,t=d({},e),e._useUTC!=null&&(t._useUTC=e._useUTC),t._f=e._f[i],an(t);if(!c(t))continue;s+=l(t).charsLeftOver,s+=l(t).unusedTokens.length*10,l(t).score=s;if(r==null||s<r)r=s,n=t}u(e,n||t)}function cn(e){if(e._d)return;var t=_(e._i);e._a=[t.year,t.month,t.day||t.date,t.hour,t.minute,t.second,t.millisecond],on(e)}function hn(e){var t=e._i,n=e._f,s;return e._locale=e._locale||L(e._l),t===null||n===undefined&&t===""?h({nullInput:!0}):(typeof t=="string"&&(e._i=t=e._locale.preparse(t)),g(t)?new m(Mt(t)):(r(n)?ln(e):n?an(e):i(t)?e._d=t:pn(e),s=new m(Mt(e)),s._nextDay&&(s.add(1,"d"),s._nextDay=undefined),s))}function pn(e){var n=e._i;n===undefined?e._d=new Date:i(n)?e._d=new Date(+n):typeof n=="string"?Rt(e):r(n)?(e._a=s(n.slice(0),function(e){return parseInt(e,10)}),on(e)):typeof n=="object"?cn(e):typeof n=="number"?e._d=new Date(n):t.createFromInputFallback(e)}function dn(e,t,n,r,i){var s={};return typeof n=="boolean"&&(r=n,n=undefined),s._isAMomentObject=!0,s._useUTC=s._isUTC=i,s._l=n,s._i=e,s._f=t,s._strict=r,hn(s)}function vn(e,t,n,r){return dn(e,t,n,r,!1)}function yn(e,t){var n,i;t.length===1&&r(t[0])&&(t=t[0]);if(!t.length)return vn();n=t[0];for(i=1;i<t.length;++i)t[i][e](n)&&(n=t[i]);return n}function bn(){var e=[].slice.call(arguments,0);return yn("isBefore",e)}function wn(){var e=[].slice.call(arguments,0);return yn("isAfter",e)}function En(e){var t=_(e),n=t.year||0,r=t.quarter||0,i=t.month||0,s=t.week||0,o=t.day||0,u=t.hour||0,a=t.minute||0,f=t.second||0,l=t.millisecond||0;this._milliseconds=+l+f*1e3+a*6e4+u*36e5,this._days=+o+s*7,this._months=+i+r*3+n*12,this._data={},this._locale=L(),this._bubble()}function Sn(e){return e instanceof En}function xn(e,t){U(e,0,0,function(){var e=this.utcOffset(),n="+";return e<0&&(e=-e,n="-"),n+j(~~(e/60),2)+t+j(~~e%60,2)})}function Nn(e){var t=(e||"").match(it)||[],n=t[t.length-1]||[],r=(n+"").match(Tn)||["-",0,0],i=+(r[1]*60)+y(r[2]);return r[0]==="+"?i:-i}function Cn(e,n){var r,s;return n._isUTC?(r=n.clone(),s=(g(e)||i(e)?+e:+vn(e))- +r,r._d.setTime(+r._d+s),t.updateOffset(r,!1),r):vn(e).local()}function kn(e){return-Math.round(e._d.getTimezoneOffset()/15)*15}function Ln(e,n){var r=this._offset||0,i;return e!=null?(typeof e=="string"&&(e=Nn(e)),Math.abs(e)<16&&(e*=60),!this._isUTC&&n&&(i=kn(this)),this._offset=e,this._isUTC=!0,i!=null&&this.add(i,"m"),r!==e&&(!n||this._changeInProgress?Vn(this,Rn(e-r,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,t.updateOffset(this,!0),this._changeInProgress=null)),this):this._isUTC?r:kn(this)}function An(e,t){return e!=null?(typeof e!="string"&&(e=-e),this.utcOffset(e,t),this):-this.utcOffset()}function On(e){return this.utcOffset(0,e)}function Mn(e){return this._isUTC&&(this.utcOffset(0,e),this._isUTC=!1,e&&this.subtract(kn(this),"m")),this}function _n(){return this._tzm?this.utcOffset(this._tzm):typeof this._i=="string"&&this.utcOffset(Nn(this._i)),this}function Dn(e){return e?e=vn(e).utcOffset():e=0,(this.utcOffset()-e)%60===0}function Pn(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function Hn(){if(this._a){var e=this._isUTC?a(this._a):vn(this._a);return this.isValid()&&b(this._a,e.toArray())>0}return!1}function Bn(){return!this._isUTC}function jn(){return this._isUTC}function Fn(){return this._isUTC&&this._offset===0}function Rn(e,t){var n=e,r=null,i,s,u;return Sn(e)?n={ms:e._milliseconds,d:e._days,M:e._months}:typeof e=="number"?(n={},t?n[t]=e:n.milliseconds=e):(r=In.exec(e))?(i=r[1]==="-"?-1:1,n={y:0,d:y(r[gt])*i,h:y(r[yt])*i,m:y(r[bt])*i,s:y(r[wt])*i,ms:y(r[Et])*i}):(r=qn.exec(e))?(i=r[1]==="-"?-1:1,n={y:Un(r[2],i),M:Un(r[3],i),d:Un(r[4],i),h:Un(r[5],i),m:Un(r[6],i),s:Un(r[7],i),w:Un(r[8],i)}):n==null?n={}:typeof n=="object"&&("from"in n||"to"in n)&&(u=Wn(vn(n.from),vn(n.to)),n={},n.ms=u.milliseconds,n.M=u.months),s=new En(n),Sn(e)&&o(e,"_locale")&&(s._locale=e._locale),s}function Un(e,t){var n=e&&parseFloat(e.replace(",","."));return(isNaN(n)?0:n)*t}function zn(e,t){var n={milliseconds:0,months:0};return n.months=t.month()-e.month()+(t.year()-e.year())*12,e.clone().add(n.months,"M").isAfter(t)&&--n.months,n.milliseconds=+t- +e.clone().add(n.months,"M"),n}function Wn(e,t){var n;return t=Cn(t,e),e.isBefore(t)?n=zn(e,t):(n=zn(t,e),n.milliseconds=-n.milliseconds,n.months=-n.months),n}function Xn(e,t){return function(n,r){var i,s;return r!==null&&!isNaN(+r)&&(Ht(t,"moment()."+t+"(period, number) is deprecated. Please use moment()."+t+"(number, period)."),s=n,n=r,r=s),n=typeof n=="string"?+n:n,i=Rn(n,r),Vn(this,i,e),this}}function Vn(e,n,r,i){var s=n._milliseconds,o=n._days,u=n._months;i=i==null?!0:i,s&&e._d.setTime(+e._d+s*r),o&&H(e,"Date",P(e,"Date")+o*r),u&&Lt(e,P(e,"Month")+u*r),i&&t.updateOffset(e,o||u)}function Kn(e){var t=e||vn(),n=Cn(t,this).startOf("day"),r=this.diff(n,"days",!0),i=r<-6?"sameElse":r<-1?"lastWeek":r<0?"lastDay":r<1?"sameDay":r<2?"nextDay":r<7?"nextWeek":"sameElse";return this.format(this.localeData().calendar(i,this,vn(t)))}function Qn(){return new m(this)}function Gn(e,t){var n;return t=M(typeof t!="undefined"?t:"millisecond"),t==="millisecond"?(e=g(e)?e:vn(e),+this>+e):(n=g(e)?+e:+vn(e),n<+this.clone().startOf(t))}function Yn(e,t){var n;return t=M(typeof t!="undefined"?t:"millisecond"),t==="millisecond"?(e=g(e)?e:vn(e),+this<+e):(n=g(e)?+e:+vn(e),+this.clone().endOf(t)<n)}function Zn(e,t,n){return this.isAfter(e,n)&&this.isBefore(t,n)}function er(e,t){var n;return t=M(t||"millisecond"),t==="millisecond"?(e=g(e)?e:vn(e),+this===+e):(n=+vn(e),+this.clone().startOf(t)<=n&&n<=+this.clone().endOf(t))}function tr(e){return e<0?Math.ceil(e):Math.floor(e)}function nr(e,t,n){var r=Cn(e,this),i=(r.utcOffset()-this.utcOffset())*6e4,s,o;return t=M(t),t==="year"||t==="month"||t==="quarter"?(o=rr(this,r),t==="quarter"?o/=3:t==="year"&&(o/=12)):(s=this-r,o=t==="second"?s/1e3:t==="minute"?s/6e4:t==="hour"?s/36e5:t==="day"?(s-i)/864e5:t==="week"?(s-i)/6048e5:s),n?o:tr(o)}function rr(e,t){var n=(t.year()-e.year())*12+(t.month()-e.month()),r=e.clone().add(n,"months"),i,s;return t-r<0?(i=e.clone().add(n-1,"months"),s=(t-r)/(r-i)):(i=e.clone().add(n+1,"months"),s=(t-r)/(i-r)),-(n+s)}function ir(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function sr(){var e=this.clone().utc();return 0<e.year()&&e.year()<=9999?"function"==typeof Date.prototype.toISOString?this.toDate().toISOString():X(e,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):X(e,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")}function or(e){var n=X(this,e||t.defaultFormat);return this.localeData().postformat(n)}function ur(e,t){return this.isValid()?Rn({to:this,from:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()}function ar(e){return this.from(vn(),e)}function fr(e,t){return this.isValid()?Rn({from:this,to:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()}function lr(e){return this.to(vn(),e)}function cr(e){var t;return e===undefined?this._locale._abbr:(t=L(e),t!=null&&(this._locale=t),this)}function pr(){return this._locale}function dr(e){e=M(e);switch(e){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return e==="week"&&this.weekday(0),e==="isoWeek"&&this.isoWeekday(1),e==="quarter"&&this.month(Math.floor(this.month()/3)*3),this}function vr(e){return e=M(e),e===undefined||e==="millisecond"?this:this.startOf(e).add(1,e==="isoWeek"?"week":e).subtract(1,"ms")}function mr(){return+this._d-(this._offset||0)*6e4}function gr(){return Math.floor(+this/1e3)}function yr(){return this._offset?new Date(+this):this._d}function br(){var e=this;return[e.year(),e.month(),e.date(),e.hour(),e.minute(),e.second(),e.millisecond()]}function wr(){return c(this)}function Er(){return u({},l(this))}function Sr(){return l(this).overflow}function xr(e,t){U(0,[e,e.length],0,t)}function Tr(e,t,n){return Jt(vn([e,11,31+t-n]),t,n).week}function Nr(e){var t=Jt(this,this.localeData()._week.dow,this.localeData()._week.doy).year;return e==null?t:this.add(e-t,"y")}function Cr(e){var t=Jt(this,1,4).year;return e==null?t:this.add(e-t,"y")}function kr(){return Tr(this.year(),1,4)}function Lr(){var e=this.localeData()._week;return Tr(this.year(),e.dow,e.doy)}function Ar(e){return e==null?Math.ceil((this.month()+1)/3):this.month((e-1)*3+this.month()%3)}function Mr(e,t){if(typeof e=="string")if(!isNaN(e))e=parseInt(e,10);else{e=t.weekdaysParse(e);if(typeof e!="number")return null}return e}function Dr(e){return this._weekdays[e.day()]}function Hr(e){return this._weekdaysShort[e.day()]}function jr(e){return this._weekdaysMin[e.day()]}function Fr(e){var t,n,r;this._weekdaysParse||(this._weekdaysParse=[]);for(t=0;t<7;t++){this._weekdaysParse[t]||(n=vn([2e3,1]).day(t),r="^"+this.weekdays(n,"")+"|^"+this.weekdaysShort(n,"")+"|^"+this.weekdaysMin(n,""),this._weekdaysParse[t]=new RegExp(r.replace(".",""),"i"));if(this._weekdaysParse[t].test(e))return t}}function Ir(e){var t=this._isUTC?this._d.getUTCDay():this._d.getDay();return e!=null?(e=Mr(e,this.localeData()),this.add(e-t,"d")):t}function qr(e){var t=(this.day()+7-this.localeData()._week.dow)%7;return e==null?t:this.add(e-t,"d")}function Rr(e){return e==null?this.day()||7:this.day(this.day()%7?e:e-7)}function Ur(e,t){U(e,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),t)})}function zr(e,t){return t._meridiemParse}function Wr(e){return(e+"").toLowerCase().charAt(0)==="p"}function Vr(e,t,n){return e>11?n?"pm":"PM":n?"am":"AM"}function Qr(e){U(0,[e,3],0,"millisecond")}function Yr(){return this._isUTC?"UTC":""}function Zr(){return this._isUTC?"Coordinated Universal Time":""}function ni(e){return vn(e*1e3)}function ri(){return vn.apply(null,arguments).parseZone()}function si(e,t,n){var r=this._calendar[e];return typeof r=="function"?r.call(t,n):r}function ui(e){var t=this._longDateFormat[e];return!t&&this._longDateFormat[e.toUpperCase()]&&(t=this._longDateFormat[e.toUpperCase()].replace(/MMMM|MM|DD|dddd/g,function(e){return e.slice(1)}),this._longDateFormat[e]=t),t}function fi(){return this._invalidDate}function hi(e){return this._ordinal.replace("%d",e)}function pi(e){return e}function vi(e,t,n,r){var i=this._relativeTime[n];return typeof i=="function"?i(e,t,n,r):i.replace(/%d/i,e)}function mi(e,t){var n=this._relativeTime[e>0?"future":"past"];return typeof n=="function"?n(t):n.replace(/%s/i,t)}function gi(e){var t,n;for(n in e)t=e[n],typeof t=="function"?this[n]=t:this["_"+n]=t;this._ordinalParseLenient=new RegExp(this._ordinalParse.source+"|"+/\d{1,2}/.source)}function bi(e,t,n,r){var i=L(),s=a().set(r,t);return i[n](s,e)}function wi(e,t,n,r,i){typeof e=="number"&&(t=e,e=undefined),e=e||"";if(t!=null)return bi(e,t,n,i);var s,o=[];for(s=0;s<r;s++)o[s]=bi(e,s,n,i);return o}function Ei(e,t){return wi(e,t,"months",12,"month")}function Si(e,t){return wi(e,t,"monthsShort",12,"month")}function xi(e,t){return wi(e,t,"weekdays",7,"day")}function Ti(e,t){return wi(e,t,"weekdaysShort",7,"day")}function Ni(e,t){return wi(e,t,"weekdaysMin",7,"day")}function ki(){var e=this._data;return this._milliseconds=Ci(this._milliseconds),this._days=Ci(this._days),this._months=Ci(this._months),e.milliseconds=Ci(e.milliseconds),e.seconds=Ci(e.seconds),e.minutes=Ci(e.minutes),e.hours=Ci(e.hours),e.months=Ci(e.months),e.years=Ci(e.years),this}function Li(e,t,n,r){var i=Rn(t,n);return e._milliseconds+=r*i._milliseconds,e._days+=r*i._days,e._months+=r*i._months,e._bubble()}function Ai(e,t){return Li(this,e,t,1)}function Oi(e,t){return Li(this,e,t,-1)}function Mi(){var e=this._milliseconds,t=this._days,n=this._months,r=this._data,i,s,o,u=0;return r.milliseconds=e%1e3,i=tr(e/1e3),r.seconds=i%60,s=tr(i/60),r.minutes=s%60,o=tr(s/60),r.hours=o%24,t+=tr(o/24),u=tr(_i(t)),t-=tr(Di(u)),n+=tr(t/30),t%=30,u+=tr(n/12),n%=12,r.days=t,r.months=n,r.years=u,this}function _i(e){return e*400/146097}function Di(e){return e*146097/400}function Pi(e){var t,n,r=this._milliseconds;e=M(e);if(e==="month"||e==="year")return t=this._days+r/864e5,n=this._months+_i(t)*12,e==="month"?n:n/12;t=this._days+Math.round(Di(this._months/12));switch(e){case"week":return t/7+r/6048e5;case"day":return t+r/864e5;case"hour":return t*24+r/36e5;case"minute":return t*1440+r/6e4;case"second":return t*86400+r/1e3;case"millisecond":return Math.floor(t*864e5)+r;default:throw new Error("Unknown unit "+e)}}function Hi(){return this._milliseconds+this._days*864e5+this._months%12*2592e6+y(this._months/12)*31536e6}function Bi(e){return function(){return this.as(e)}}function Xi(e){return e=M(e),this[e+"s"]()}function Vi(e){return function(){return this._data[e]}}function es(){return tr(this.days()/7)}function rs(e,t,n,r,i){return i.relativeTime(t||1,!!n,e,r)}function is(e,t,n){var r=Rn(e).abs(),i=ts(r.as("s")),s=ts(r.as("m")),o=ts(r.as("h")),u=ts(r.as("d")),a=ts(r.as("M")),f=ts(r.as("y")),l=i<ns.s&&["s",i]||s===1&&["m"]||s<ns.m&&["mm",s]||o===1&&["h"]||o<ns.h&&["hh",o]||u===1&&["d"]||u<ns.d&&["dd",u]||a===1&&["M"]||a<ns.M&&["MM",a]||f===1&&["y"]||["yy",f];return l[2]=t,l[3]=+e>0,l[4]=n,rs.apply(null,l)}function ss(e,t){return ns[e]===undefined?!1:t===undefined?ns[e]:(ns[e]=t,!0)}function os(e){var t=this.localeData(),n=is(this,!e,t);return e&&(n=t.pastFuture(+this,n)),t.postformat(n)}function as(){var e=us(this.years()),t=us(this.months()),n=us(this.days()),r=us(this.hours()),i=us(this.minutes()),s=us(this.seconds()+this.milliseconds()/1e3),o=this.asSeconds();return o?(o<0?"-":"")+"P"+(e?e+"Y":"")+(t?t+"M":"")+(n?n+"D":"")+(r||i||s?"T":"")+(r?r+"H":"")+(i?i+"M":"")+(s?s+"S":""):"P0D"}var e,p=t.momentProperties=[],v=!1,E={},S,A={},F=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Q|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,4}|x|X|zz?|ZZ?|.)/g,I=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,q={},R={},$=/\d/,J=/\d\d/,K=/\d{3}/,Q=/\d{4}/,G=/[+-]?\d{6}/,Y=/\d\d?/,Z=/\d{1,3}/,et=/\d{1,4}/,tt=/[+-]?\d{1,6}/,nt=/\d+/,rt=/[+-]?\d+/,it=/Z|[+-]\d\d:?\d\d/gi,st=/[+-]?\d+(\.\d{1,3})?/,ot=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,ut={},ct={},vt=0,mt=1,gt=2,yt=3,bt=4,wt=5,Et=6;U("M",["MM",2],"Mo",function(){return this.month()+1}),U("MMM",0,0,function(e){return this.localeData().monthsShort(this,e)}),U("MMMM",0,0,function(e){return this.localeData().months(this,e)}),O("month","M"),at("M",Y),at("MM",Y,J),at("MMM",ot),at("MMMM",ot),ht(["M","MM"],function(e,t){t[mt]=y(e)-1}),ht(["MMM","MMMM"],function(e,t,n,r){var i=n._locale.monthsParse(e,r,n._strict);i!=null?t[mt]=i:l(n).invalidMonth=e});var xt="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),Nt="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),Pt={};t.suppressDeprecationWarnings=!1;var Bt=/^\s*(?:[+-]\d{6}|\d{4})-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,jt=[["YYYYYY-MM-DD",/[+-]\d{6}-\d{2}-\d{2}/],["YYYY-MM-DD",/\d{4}-\d{2}-\d{2}/],["GGGG-[W]WW-E",/\d{4}-W\d{2}-\d/],["GGGG-[W]WW",/\d{4}-W\d{2}/],["YYYY-DDD",/\d{4}-\d{3}/]],Ft=[["HH:mm:ss.SSSS",/(T| )\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]],It=/^\/?Date\((\-?\d+)/i;t.createFromInputFallback=Dt("moment construction falls back to js Date. This is discouraged and will be removed in upcoming major release. Please refer to https://github.com/moment/moment/issues/1407 for more info.",function(e){e._d=new Date(e._i+(e._useUTC?" UTC":""))}),U(0,["YY",2],0,function(){return this.year()%100}),U(0,["YYYY",4],0,"year"),U(0,["YYYYY",5],0,"year"),U(0,["YYYYYY",6,!0],0,"year"),O("year","y"),at("Y",rt),at("YY",Y,J),at("YYYY",et,Q),at("YYYYY",tt,G),at("YYYYYY",tt,G),ht(["YYYY","YYYYY","YYYYYY"],vt),ht("YY",function(e,n){n[vt]=t.parseTwoDigitYear(e)}),t.parseTwoDigitYear=function(e){return y(e)+(y(e)>68?1900:2e3)};var Vt=D("FullYear",!1);U("w",["ww",2],"wo","week"),U("W",["WW",2],"Wo","isoWeek"),O("week","w"),O("isoWeek","W"),at("w",Y),at("ww",Y,J),at("W",Y),at("WW",Y,J),pt(["w","ww","W","WW"],function(e,t,n,r){t[r.substr(0,1)]=y(e)});var Qt={dow:0,doy:6};U("DDD",["DDDD",3],"DDDo","dayOfYear"),O("dayOfYear","DDD"),at("DDD",Z),at("DDDD",K),ht(["DDD","DDDD"],function(e,t,n){n._dayOfYear=y(e)}),t.ISO_8601=function(){};var mn=Dt("moment().min is deprecated, use moment.min instead. https://github.com/moment/moment/issues/1548",function(){var e=vn.apply(null,arguments);return e<this?this:e}),gn=Dt("moment().max is deprecated, use moment.max instead. https://github.com/moment/moment/issues/1548",function(){var e=vn.apply(null,arguments);return e>this?this:e});xn("Z",":"),xn("ZZ",""),at("Z",it),at("ZZ",it),ht(["Z","ZZ"],function(e,t,n){n._useUTC=!0,n._tzm=Nn(e)});var Tn=/([\+\-]|\d\d)/gi;t.updateOffset=function(){};var In=/(\-)?(?:(\d*)\.)?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?)?/,qn=/^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/;Rn.fn=En.prototype;var $n=Xn(1,"add"),Jn=Xn(-1,"subtract");t.defaultFormat="YYYY-MM-DDTHH:mm:ssZ";var hr=Dt("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(e){return e===undefined?this.localeData():this.locale(e)});U(0,["gg",2],0,function(){return this.weekYear()%100}),U(0,["GG",2],0,function(){return this.isoWeekYear()%100}),xr("gggg","weekYear"),xr("ggggg","weekYear"),xr("GGGG","isoWeekYear"),xr("GGGGG","isoWeekYear"),O("weekYear","gg"),O("isoWeekYear","GG"),at("G",rt),at("g",rt),at("GG",Y,J),at("gg",Y,J),at("GGGG",et,Q),at("gggg",et,Q),at("GGGGG",tt,G),at("ggggg",tt,G),pt(["gggg","ggggg","GGGG","GGGGG"],function(e,t,n,r){t[r.substr(0,2)]=y(e)}),pt(["gg","GG"],function(e,n,r,i){n[i]=t.parseTwoDigitYear(e)}),U("Q",0,0,"quarter"),O("quarter","Q"),at("Q",$),ht("Q",function(e,t){t[mt]=(y(e)-1)*3}),U("D",["DD",2],"Do","date"),O("date","D"),at("D",Y),at("DD",Y,J),at("Do",function(e,t){return e?t._ordinalParse:t._ordinalParseLenient}),ht(["D","DD"],gt),ht("Do",function(e,t){t[gt]=y(e.match(Y)[0],10)});var Or=D("Date",!0);U("d",0,"do","day"),U("dd",0,0,function(e){return this.localeData().weekdaysMin(this,e)}),U("ddd",0,0,function(e){return this.localeData().weekdaysShort(this,e)}),U("dddd",0,0,function(e){return this.localeData().weekdays(this,e)}),U("e",0,0,"weekday"),U("E",0,0,"isoWeekday"),O("day","d"),O("weekday","e"),O("isoWeekday","E"),at("d",Y),at("e",Y),at("E",Y),at("dd",ot),at("ddd",ot),at("dddd",ot),pt(["dd","ddd","dddd"],function(e,t,n){var r=n._locale.weekdaysParse(e);r!=null?t.d=r:l(n).invalidWeekday=e}),pt(["d","e","E"],function(e,t,n,r){t[r]=y(e)});var _r="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),Pr="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),Br="Su_Mo_Tu_We_Th_Fr_Sa".split("_");U("H",["HH",2],0,"hour"),U("h",["hh",2],0,function(){return this.hours()%12||12}),Ur("a",!0),Ur("A",!1),O("hour","h"),at("a",zr),at("A",zr),at("H",Y),at("h",Y),at("HH",Y,J),at("hh",Y,J),ht(["H","HH"],yt),ht(["a","A"],function(e,t,n){n._isPm=n._locale.isPM(e),n._meridiem=e}),ht(["h","hh"],function(e,t,n){t[yt]=y(e),l(n).bigHour=!0});var Xr=/[ap]\.?m?\.?/i,$r=D("Hours",!0);U("m",["mm",2],0,"minute"),O("minute","m"),at("m",Y),at("mm",Y,J),ht(["m","mm"],bt);var Jr=D("Minutes",!1);U("s",["ss",2],0,"second"),O("second","s"),at("s",Y),at("ss",Y,J),ht(["s","ss"],wt);var Kr=D("Seconds",!1);U("S",0,0,function(){return~~(this.millisecond()/100)}),U(0,["SS",2],0,function(){return~~(this.millisecond()/10)}),Qr("SSS"),Qr("SSSS"),O("millisecond","ms"),at("S",Z,$),at("SS",Z,J),at("SSS",Z,K),at("SSSS",nt),ht(["S","SS","SSS","SSSS"],function(e,t){t[Et]=y(("0."+e)*1e3)});var Gr=D("Milliseconds",!1);U("z",0,0,"zoneAbbr"),U("zz",0,0,"zoneName");var ei=m.prototype;ei.add=$n,ei.calendar=Kn,ei.clone=Qn,ei.diff=nr,ei.endOf=vr,ei.format=or,ei.from=ur,ei.fromNow=ar,ei.to=fr,ei.toNow=lr,ei.get=B,ei.invalidAt=Sr,ei.isAfter=Gn,ei.isBefore=Yn,ei.isBetween=Zn,ei.isSame=er,ei.isValid=wr,ei.lang=hr,ei.locale=cr,ei.localeData=pr,ei.max=gn,ei.min=mn,ei.parsingFlags=Er,ei.set=B,ei.startOf=dr,ei.subtract=Jn,ei.toArray=br,ei.toDate=yr,ei.toISOString=sr,ei.toJSON=sr,ei.toString=ir,ei.unix=gr,ei.valueOf=mr,ei.year=Vt,ei.isLeapYear=$t,ei.weekYear=Nr,ei.isoWeekYear=Cr,ei.quarter=ei.quarters=Ar,ei.month=At,ei.daysInMonth=Ot,ei.week=ei.weeks=Zt,ei.isoWeek=ei.isoWeeks=en,ei.weeksInYear=Lr,ei.isoWeeksInYear=kr,ei.date=Or,ei.day=ei.days=Ir,ei.weekday=qr,ei.isoWeekday=Rr,ei.dayOfYear=nn,ei.hour=ei.hours=$r,ei.minute=ei.minutes=Jr,ei.second=ei.seconds=Kr,ei.millisecond=ei.milliseconds=Gr,ei.utcOffset=Ln,ei.utc=On,ei.local=Mn,ei.parseZone=_n,ei.hasAlignedHourOffset=Dn,ei.isDST=Pn,ei.isDSTShifted=Hn,ei.isLocal=Bn,ei.isUtcOffset=jn,ei.isUtc=Fn,ei.isUTC=Fn,ei.zoneAbbr=Yr,ei.zoneName=Zr,ei.dates=Dt("dates accessor is deprecated. Use date instead.",Or),ei.months=Dt("months accessor is deprecated. Use month instead",At),ei.years=Dt("years accessor is deprecated. Use year instead",Vt),ei.zone=Dt("moment().zone is deprecated, use moment().utcOffset instead. https://github.com/moment/moment/issues/1779",An);var ti=ei,ii={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},oi={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY LT",LLLL:"dddd, MMMM D, YYYY LT"},ai="Invalid date",li="%d",ci=/\d{1,2}/,di={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},yi=w.prototype;yi._calendar=ii,yi.calendar=si,yi._longDateFormat=oi,yi.longDateFormat=ui,yi._invalidDate=ai,yi.invalidDate=fi,yi._ordinal=li,yi.ordinal=hi,yi._ordinalParse=ci,yi.preparse=pi,yi.postformat=pi,yi._relativeTime=di,yi.relativeTime=vi,yi.pastFuture=mi,yi.set=gi,yi.months=Tt,yi._months=xt,yi.monthsShort=Ct,yi._monthsShort=Nt,yi.monthsParse=kt,yi.week=Kt,yi._week=Qt,yi.firstDayOfYear=Yt,yi.firstDayOfWeek=Gt,yi.weekdays=Dr,yi._weekdays=_r,yi.weekdaysMin=jr,yi._weekdaysMin=Br,yi.weekdaysShort=Hr,yi._weekdaysShort=Pr,yi.weekdaysParse=Fr,yi.isPM=Wr,yi._meridiemParse=Xr,yi.meridiem=Vr,C("en",{ordinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(e){var t=e%10,n=y(e%100/10)===1?"th":t===1?"st":t===2?"nd":t===3?"rd":"th";return e+n}}),t.lang=Dt("moment.lang is deprecated. Use moment.locale instead.",C),t.langData=Dt("moment.langData is deprecated. Use moment.localeData instead.",L);var Ci=Math.abs,ji=Bi("ms"),Fi=Bi("s"),Ii=Bi("m"),qi=Bi("h"),Ri=Bi("d"),Ui=Bi("w"),zi=Bi("M"),Wi=Bi("y"),$i=Vi("milliseconds"),Ji=Vi("seconds"),Ki=Vi("minutes"),Qi=Vi("hours"),Gi=Vi("days"),Yi=Vi("months"),Zi=Vi("years"),ts=Math.round,ns={s:45,m:45,h:22,d:26,M:11},us=Math.abs,fs=En.prototype;fs.abs=ki,fs.add=Ai,fs.subtract=Oi,fs.as=Pi,fs.asMilliseconds=ji,fs.asSeconds=Fi,fs.asMinutes=Ii,fs.asHours=qi,fs.asDays=Ri,fs.asWeeks=Ui,fs.asMonths=zi,fs.asYears=Wi,fs.valueOf=Hi,fs._bubble=Mi,fs.get=Xi,fs.milliseconds=$i,fs.seconds=Ji,fs.minutes=Ki,fs.hours=Qi,fs.days=Gi,fs.weeks=es,fs.months=Yi,fs.years=Zi,fs.humanize=os,fs.toISOString=as,fs.toString=as,fs.toJSON=as,fs.locale=cr,fs.localeData=pr,fs.toIsoString=Dt("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",as),fs.lang=hr,U("X",0,0,"unix"),U("x",0,0,"valueOf"),at("x",rt),at("X",st),ht("X",function(e,t,n){n._d=new Date(parseFloat(e,10)*1e3)}),ht("x",function(e,t,n){n._d=new Date(y(e))}),t.version="2.10.3",n(vn),t.fn=ti,t.min=bn,t.max=wn,t.utc=a,t.unix=ni,t.months=Ei,t.isDate=i,t.locale=C,t.invalid=h,t.duration=Rn,t.isMoment=g,t.weekdays=xi,t.parseZone=ri,t.localeData=L,t.isDuration=Sn,t.monthsShort=Si,t.weekdaysMin=Ni,t.defineLocale=k,t.weekdaysShort=Ti,t.normalizeUnits=M,t.relativeTimeThreshold=ss;var ls=t;return ls}),define("js/utils",["require","underscore","jquery","js/message"],function(e){function i(e){return(new n.Deferred).resolve(e).promise()}function s(e){return(new n.Deferred).reject(e).promise()}function o(e){return function(){try{return e.apply(null,arguments)}catch(t){return s(t)}}}function u(e){return function(t){return e.data=t,e.arguments=arguments,r.log(e,e.status?e.status:"info"),e}}function a(e){return function(t){return r.log(t,t.status?t.status:e),t}}function f(e){return function(){return t.object(e,arguments)}}function l(e,r){return function(i){var s=t.map(e,function(e){return e()});return n.when.apply(null,[i].concat(s)).then(f(r))}}function c(e){return function(n){return t.extend({},n,e)}}var t=e("underscore"),n=e("jquery"),r=e("js/message");return{resolve:i,reject:s,tryCatch:o,logData:u,inform:a,combineData:f,combineDeferredData:l,extendData:c}}),define("js/rest",["require","underscore","jquery","js/utils"],function(e){function i(e,n){function r(){function e(e){function n(t){return[encodeURIComponent(e[0]),encodeURIComponent(t)].join("")}return t.chain(e[1]).map(n).flatten().value().join(";")}return"?filter="+t.chain(t.pairs(n)).map(e).value().join(";")}return["https://online.moysklad.ru/exchange/rest/ms/xml/",e,"/list",n?r():""].join("")}function s(e){return"https://spreadsheets.google.com/feeds/spreadsheets/private/full?access_token="+e}function o(e){return["https://spreadsheets.google.com/feeds/worksheets/",e.key,"/private/full?alt=json&access_token=",e.accessToken].join("")}function u(e){return n.get(e).then(l,c)}function a(e){return n.ajax({url:e,type:"GET",dataType:"jsonp",timeout:5e3}).then(l,c)}function f(e){return function(t){return n.ajax({type:"PUT",url:e,data:'<?xml version="1.0" encoding="UTF-8" ?>'+t,dataType:"xml",contentType:"application/xml"}).then(l,c)}}function l(e){var t=n(e),i=t.has("error").length>0;if(i){var s=t.find("error").text(),o=/Caused by.*?\n/gim.exec(s);return r.reject({title:"Неизвестная ошибка!",cause:o.length?o[0]:s.replace(/\n/g,"<br/>"),advice:"Совет: повторите ошибку, чтобы запомнить последовательность ее возникновения, опишите ошибку в письме, скопируйте причину из этого диалога и отправьте письмо по адресу alexhalf@gmail.com"})}return e}function c(e){return e.responseXML?l(e.responseXML):e.status===404?{code:404,title:"Нет данных!",cause:"Причина: Запрошен не существующий ресурс",advice:"Совет: Обратитесь к разработчику Аддона alexhalf@gmail, данную проблему можно разрешить только совместно",status:"error"}:e.status===403?{title:"Запрет доступа!",cause:"Причина: Сервис Мой Склад запретил доступ к своему REST сервису для данного логина",advice:"Совет: возможно истек срок в 14 дней для бесплатного эккаунта, создайте новый или обратитесь в службу поддержки Мой Склад",status:"warning"}:e.status===401?{title:"Ошибка авторизации!",cause:"Вы ввели не правильный логин или пароль",advice:"Совет: проверьте раскладку клавиатуры и выключен ли CAPSLOCK",status:"warning"}:e.status===502?{title:"Технические работы!",cause:"Причина: МойСклад будет недоступен в течение непродолжительного времени или у вас проблемы с прокси сервером или интернетом.",advice:"Совет: Дождитесь окончания технических работ на сервисе Мой Склад",status:"warning"}:e.status===429?{title:"Ограничение доступа!",cause:"Причина: Превышено ограничение на количество запросов в единицу времени.<br/>"+JSON.stringify(e),advice:"Совет: Обратитесь к разработчику Аддона alexhalf@gmail, данную проблему можно разрешить только совместно",status:"error"}:e}var t=e("underscore"),n=e("jquery"),r=e("js/utils");return{createMoySkladGetUrl:i,createGoogleSpreadSheetsUrl:s,createGoogleGetWorksheetsUrl:o,getRequest:u,getCROSRequest:a,putRequest:f}}),define("js/demand",["require","jquery","underscore","json2xml","moment","js/rest","js/utils"],function(e){function c(){function e(e){return n.map(t(e).find("myCompany").get(),t)}function r(e){function t(e){return{name:e.attr("name"),uuid:e.find(">uuid").text()}}return n.map(e,t)}return t.when(s.createMoySkladGetUrl("MyCompany")).done(l.preGetMyCompany).then(s.getRequest).then(e).then(r).done(l.afterGetMyCompany).promise()}function h(){function e(e){return n.map(t(e).find("company").get(),t)}function r(e){function t(e){return{name:e.attr("name"),uuid:e.find(">uuid").text()}}return n.map(e,t)}return t.when(s.createMoySkladGetUrl("Company")).done(l.preGetContragents).then(s.getRequest).then(e).then(r).done(l.afterGetContragents).promise()}function p(e){function l(e){return n.isEmpty(e)?o.reject({code:"nothingImport",title:"Нечего импортировать!",cause:"Причина: нечего импортировать из google таблицы или все данные были ранее импортированы",advice:"Совет: проверьте, что в таблице google есть новые данные или удалите уже существующие отгрузки в сервисе Мой Склад, чтобы их заново импортировать",status:"success"}):e}function c(e){function o(e){function r(t){var r={"@metadataUuid":n.chain(t).values().first()};return r[t.type]=e[n.chain(t).keys().first()],r}return n.extend({},t,{"@sourceStoreUuid":u[e.name],"@targetAgentUuid":e.targetAgentUuid,"@sourceAgentUuid":e.sourceAgentUuid,"@moment":i(e.moment).add(12,"hours").format("YYYY-MM-DDTHH:mm:ss.SSSZ"),"@vatIncluded":!0,"@applicable":!0,attribute:n.map([{employee:f.Demand["Сотрудник"],type:"@valueString"},{clock:f.Demand["Часы"],type:"@doubleValue"},{salary:f.Demand["Зарплата"],type:"@doubleValue"}],r),shipmentOut:n.map(e.shipmentOuts,l)},n.pick(e,"externalcode"))}function l(e){function t(e){return{"@sum":e?c(+e*100):c(0),"@sumInCurrency":e?c(+e*100):c(0)}}return{"@quantity":e.quantity,"@goodUuid":a[e.code],"@vat":0,"@discount":0,basePrice:t(e.price),price:t(e.price)}}function c(e){return[e,".0"].join("")}var t={"@targetAgentUuid":"","@sourceAgentUuid":""},s={collection:{demand:n.chain(e).map(o).value()}};return r(s)}return t.when(v()).then(n.constant(e)).then(l).then(o.tryCatch(c)).then(o.tryCatch(s.putRequest(y("Demand")))).promise()}function d(e){function h(){return n.chain(e).pluck("externalcode").value()}function p(){return n.chain(e).pluck("externalcode").object(n.values(e)).value()}function d(e){n.map(e,function(e){var t=e.find("sum");t&&(u[e.find("externalcode").text()]=+t.attr("sum")/100)})}function v(e){function r(){return t(this).find("deleted").length>0}return n.map(t(e).find("demand").not(r).get(),t)}function m(e){function t(e){return e.find("externalcode").text()}return n.map(e,t)}function g(t){function s(e){var t=n.contains(i,e.externalcode);return t||+o[e.externalcode].sum!==+u[e.externalcode]&&l.checkDifferenceSum.call(null,{smenaSum:+o[e.externalcode].sum,demandSum:+u[e.externalcode],externalCode:e.externalcode}),t}var i=n.difference(r,t);return n.filter(e,s)}var r=n.uniq(h()),o=p(),u={},a=i(n.first(e).moment,"YYYY-MM-DD"),f=i(a).add(1,"months"),c="YYYYMM01000000";return t.when(s.createMoySkladGetUrl("Demand",{"moment>=":[a.format(c)],"moment<":[f.format(c)]})).then(s.getRequest).then(v).done(d).then(m).then(g).promise()}function v(){function e(){return n.has(f,"Demand")?n.difference(["Зарплата","Сотрудник","Часы"],n.keys(f.Demand)):["Demand"]}function r(e){if(n.isEmpty(e))return;return o.reject({code:"attributeMetadata",title:"Нет дополнительных полей в шаблоне Отгрузки!",cause:"Причина: в шаблоне документа Отгрузка текущего аккаунта Мой Склад не найдены слудующие поле/я: "+e.join("\n"),advice:"Совет: проверьте, что в шаблоне документа Отгрузка созданы перечисленные поля",status:"warning"})}function i(e){function r(e){function r(e){return[e.attr("name"),e.find("uuid").text()]}return[e.attr("name"),n.chain(e.find("attributeMetadata").get()).map(t).map(r).object().value()]}return n.chain(t(e).find("embeddedEntityMetadata").get()).map(t).map(r).object().value()}return t.when(s.createMoySkladGetUrl("EmbeddedEntityMetadata")).then(s.getRequest).then(o.tryCatch(i)).then(n.partial(n.extend,f)).then(e).then(r).promise()}function m(e){function i(){return n.chain(e).pluck("name").value()}function a(e){return n.map(t(e).find("warehouse").get(),t)}function f(e){function t(e){u[e.attr("name")]=e.find("> uuid").text()}n.each(e,t)}function c(e){function t(e){return e.attr("name")}return n.map(e,t)}function h(e){return n.difference(r,e)}function p(t){return n.isEmpty(t)?o.resolve(e):o.reject({code:"warehouse",title:"Несуществующий склад!",cause:"Причина: в электронных таблицах указано неверное название склада/ов: "+t.join("\n"),advice:"Совет: проверьте, что склад с заданным именем существует в Мой Склад",status:"warning"})}var r=n.uniq(i());return t.when(s.createMoySkladGetUrl("Warehouse")).done(l.preGetRequestWarehouse).then(s.getRequest).then(a).done(f).then(c).then(h).then(p).promise()}function g(e){function i(e){return n.map(t(e).find("good").get(),t)}function u(){return n.chain(e).pluck("shipmentOuts").flatten().pluck("code").value()}function f(e){function t(e){a[e.find("> code").text()]=e.find("> uuid").text()}n.each(e,t)}function l(e){function t(e){return e.find("code").text()}return n.map(e,t)}function c(e){return n.difference(r,e)}function h(t){return n.isEmpty(t)?o.resolve(e):o.reject({code:"good",title:"Несуществующий товар!",cause:"Причина: в электронных таблицах указан несуществующий код товара/ов: "+t.join("\n"),advice:"Совет: проверьте, что товар с заданным кодом существует в Мой Склад",status:"warning"})}var r=n.uniq(u());return t.when(s.createMoySkladGetUrl("Good",{"code=":r})).then(s.getRequest).then(i).done(f).then(l).then(c).then(h).promise()}function y(e){return["https://online.moysklad.ru/exchange/rest/ms/xml/",e,"/list/update"].join("")}var t=e("jquery"),n=e("underscore");e("json2xml");var r=window.json2xml,i=e("moment"),s=e("js/rest"),o=e("js/utils"),u={},a={},f={},l={preGetRequestWarehouse:o.logData({title:"Получение списка складов из Мой Склад",cause:n.template("<%=data%>"),status:"info"}),checkDifferenceSum:o.logData({title:"Сумма одного из документов Отгрузки не совпадает с импортируемыми данными",cause:n.template("Причина: в смене <%=data.externalCode%> сумма выручки в google sheets <%=data.smenaSum%> не совпадает с суммой <%=data.demandSum%> в существующем документе Отгрузка в Мой Склад"),status:"warning"}),preGetContragents:o.logData({title:"Получение контрагентов",cause:n.template("<%=data%>"),status:"info"}),afterGetContragents:o.logData({title:"Контрагенты загружены",cause:n.template("<%=JSON.stringify(data)%>"),status:"success"}),preGetMyCompany:o.logData({title:"Получение компаний",cause:n.template("<%=data%>"),status:"info"}),afterGetMyCompany:o.logData({title:"Компании загружены",cause:n.template("<%=JSON.stringify(data)%>"),status:"success"})};return{checkGoods:g,checkWarehouses:m,checkDemands:d,updateDemands:p,getContragents:h,getMyCompanies:c}}),define("js/sheetrock",[],function(){"use strict";var e=null,t={2014:{apiEndpoint:"https://docs.google.com/spreadsheets/d/%key%/gviz/tq?",keyFormat:new RegExp("spreadsheets/d/([^/#]+)","i"),gidFormat:new RegExp("gid=([^/&#]+)","i")},2010:{apiEndpoint:"https://spreadsheets.google.com/tq?key=%key%&",keyFormat:new RegExp("key=([^&#]+)","i"),gidFormat:new RegExp("gid=([^/&#]+)","i")}},n={loaded:{},failed:{},labels:{},header:{},offset:{}},r=0,i=window.document,s=typeof e!="function",o=window.jQuery&&window.jQuery.fn&&window.jQuery.fn.jquery,u=!1;Array.prototype.forEach||(Array.prototype.forEach=function(e){var t,n=this,r=n.length;for(t=0;t<r;t+=1)e(n[t],t)}),Array.prototype.map||(Array.prototype.map=function(e){var t=this,n=[];return t.forEach(function(t,r){n[r]=e(t,r)}),n}),Object.keys||(Object.keys=function(e){var t,n=[];for(t in e)e.hasOwnProperty(t)&&n.push(t);return n});var a=function(e,t,r){e instanceof Error||(e=new Error(e)),t&&t.request&&t.request.index&&(n.failed[t.request.index]=!0);if(!(t&&t.user&&t.user.callback))throw e;t.user.callback(e,t,r||null)},f=function(e){return e.toString().replace(/^ +/,"").replace(/ +$/,"")},l=function(e){return Math.max(0,parseInt(e,10)||0)},c=function(e,t){var n=" "+e.className+" ";return n.indexOf(" "+t+" ")!==-1},h=function(e){return e=e||{},e.jquery&&e.length&&(e=e[0]),e.nodeType&&e.nodeType===1?e:!1},p=function(){if(i&&s){var e=i.createElement("script");u=e.addEventListener&&e.removeEventListener}return{dom:!!i,jquery:o?o:!1,callbackOn404:s==="request"||u,transport:s?"jsonp":"request"}},d=function(e){var n={},r=Object.keys(t);return r.forEach(function(r){var i=t[r];i.keyFormat.test(e)&&i.gidFormat.test(e)&&(n.key=e.match(i.keyFormat)[1],n.gid=e.match(i.gidFormat)[1],n.apiEndpoint=i.apiEndpoint.replace("%key%",n.key))}),n},v=function(e){return e.key&&e.gid?e.key+"_"+e.gid+"_"+e.query:null},m=function(e){var t=e&&e.v?e.v:"";return t instanceof Array&&(t=e.f||t.join("")),f(t)},g=function(e,t,n){var r={cells:{},cellsArray:t,labels:n,num:e};return t.forEach(function(e,t){r.cells[n[t]]=e}),r},y=function(e,t){return"<"+t+">"+e+"</"+t+">"},b=function(e){var t=e.num?"td":"th",n=Object.keys(e.cells),r="";return n.forEach(function(n){r+=y(e.cells[n],t)}),y(r,"tr")},w=function(e){n.loaded[e]=!1,n.failed[e]=!1,n.labels[e]=!1,n.header[e]=0,n.offset[e]=0},E=function(e,t){var n={},r=Object.keys(e);return t.query=t.sql||t.query,t.reset=t.resetStatus||t.reset,t.fetchSize=t.chunkSize||t.fetchSize,t.rowTemplate=t.rowHandler||t.rowTemplate,r.forEach(function(r){n[r]=t[r]||e[r]}),n},S=function(e,t){return t.target=h(t.target)||h(e),t.fetchSize=l(t.fetchSize),t},x=function(e,t){var r=S(e,t),i=d(r.url);return i.query=r.query,i.index=v(i),r.reset&&i.index&&(w(i.index),i.reset=!0),r.offset=n.offset[i.index]||0,r.fetchSize&&i.index&&(i.query+=" limit "+(r.fetchSize+1),i.query+=" offset "+r.offset,n.offset[i.index]=r.offset+r.fetchSize),{user:r,request:i}},T=function(e){if(!e.user.target&&!e.user.callback)throw"No element targeted or callback provided.";if(!e.request.key||!e.request.gid)throw"No key/gid in the provided URL.";if(n.failed[e.request.index])throw"A previous request for this resource failed.";if(n.loaded[e.request.index])throw"No more rows to load!";return e},N=function(e,t){return e&&e.length===t.length?e:t},C=function(e,t){var r=e.request.index,i=n.labels[r],s=e.user.fetchSize,o=t.table.rows,u=t.table.cols,a={last:o.length-1,rowNumberOffset:n.header[r]||0};e.user.offset||(i=u.map(function(e,t){return e.label?e.label.replace(/\s/g,""):(a.last=a.last+1,a.rowNumberOffset=1,m(o[0].c[t]).replace(/\s/g,"")||e.id)}),n.offset[r]=n.offset[r]+a.rowNumberOffset,n.header[r]=a.rowNumberOffset,n.labels[r]=i);if(!s||o.length-a.rowNumberOffset<s)a.last=a.last+1,n.loaded[r]=!0;return a.labels=N(e.user.labels,i),a},k=function(e,t,n){var r=[],i=t.labels;return!e.offset&&!t.rowNumberOffset&&r.push(g(0,i,i)),n.table.rows.forEach(function(n,s){if(n.c&&s<t.last){var o=l(e.offset+s+1-t.rowNumberOffset);r.push(g(o,n.c.map(m),i))}}),r},L=function(e,t,n){if(e.tagName==="TABLE"){var r=i.createElement("thead"),s=i.createElement("tbody");r.innerHTML=t,s.innerHTML=n,e.appendChild(r),e.appendChild(s)}else e.insertAdjacentHTML("beforeEnd",t+n)},A=function(e,t){var n=e.rowTemplate||b,r=i&&i.createElement&&e.target,s=r&&e.target.tagName==="TABLE",o=r&&c(e.target,"sheetrock-header"),u="",a="";return t.forEach(function(e){if(e.num)a+=n(e);else if(s||o)u+=n(e)}),r&&L(e.target,u,a),s?y(u,"thead")+y(a,"tbody"):u+a},O=function(e,t){var n={raw:t};try{var r=n.attributes=C(e,t),i=n.rows=k(e.user,r,t);n.html=A(e.user,i),e.user.callback&&e.user.callback(null,e,n)}catch(s){a("Unexpected API response format.",e,n)}},M=function(t,n){var r={headers:{"X-DataSource-Auth":"true"},url:t.request.url},i=function(e,r,i){if(!e&&r.statusCode===200)try{i=JSON.parse(i.replace(/^\)\]\}\'\n/,"")),n(t,i)}catch(s){a(s,t,{raw:i})}else a(e||"Request failed.",t)};e(r,i)},_=function(e,t){var n=i.getElementsByTagName("head")[0],s=i.createElement("script"),o="_sheetrock_callback_"+r,f=function(){u&&(s.removeEventListener("error",c,!1),s.removeEventListener("abort",c,!1)),n.removeChild(s),delete window[o]},l=function(n){try{t(e,n)}catch(r){a(r,e,{raw:n})}finally{f()}},c=function(){a("Request failed.",e),f()};window[o]=l,e.request.url=e.request.url.replace("%callback%",o),u&&(s.addEventListener("error",c,!1),s.addEventListener("abort",c,!1)),s.type="text/javascript",s.src=e.request.url,n.appendChild(s),r+=1},D=function(e){var t=["gid="+encodeURIComponent(e.request.gid),"tq="+encodeURIComponent(e.request.query)];return s&&t.push("tqx=responseHandler:%callback%"),e.request.apiEndpoint+t.join("&")},P=function(e,t){e.request.url=D(e),s?_(e,t):M(e,t)},H={url:"",query:"",target:null,fetchSize:0,labels:[],rowTemplate:null,callback:null,reset:!1},B=function(e,t){try{e=E(H,e||{}),e=x(this,e),e=T(e),t?O(e,t):P(e,O)}catch(n){a(n,e)}return this};return B.defaults=H,B.version="1.0.0",B.environment=p(),o&&(window.jQuery.fn.sheetrock=B),B}),define("js/googleSheets",["require","js/sheetrock","jquery","underscore","moment","js/rest","js/utils","https://apis.google.com/js/client.js?onload=define"],function(e){function a(e){function t(e){function t(e){return{title:e.find("title").text(),value:e.find("id").text()}}return r.chain(n(e).find("entry").get()).map(n).map(t).value()}return n.when(e).then(s.createGoogleSpreadSheetsUrl).done(u.preGetGoogleRequest).then(s.getRequest).then(t).done(u.afterGetGoogleRequest).promise()}function f(e){function t(e){function t(e){return{title:e.title.$t,uri:r.chain(e.link).findWhere({rel:"http://schemas.google.com/visualization/2008#visualizationApi"}).value()}}return r.chain(e).result("feed").result("entry").map(t).value()}return n.when(l(e.googleUser?e.googleUser:undefined),e.key).then(o.combineData(["accessToken","key"])).then(s.createGoogleGetWorksheetsUrl).done(u.preGetWorksheetsRequest).then(s.getCROSRequest).done(u.afterGetWorksheetsRequest).then(o.tryCatch(t)).done(u.afterGetTitleAndVisualizationURI).promise()}function l(t){r.isUndefined(window.gapi)&&(u.preLoadGapiClient(),e("https://apis.google.com/js/client.js?onload=define"));var i=window.gapi;return n.when(i.client).then(r.constant(t)).done(u.preOauth2).then(h).then(c).done(u.afterOauth2).promise()}function c(e){return r.result(e,"access_token")}function h(e){function s(){return e===!0?!1:!0}function u(e){return r.isUndefined(e.error)?e:o.reject("token.error")}function a(t){return r.isUndefined(t.error)?t:l(!1,i?e:undefined)()}function f(){var e=new n.Deferred;return t.load("auth2",e.resolve),e.promise()}function l(e,i){function s(){return i===!0&&e===!1}return function(){var o=new n.Deferred;return t.auth.authorize(r.extend({client_id:"826937441599-d0p5ei9tadqm50v77urf6049fq2dmenk.apps.googleusercontent.com",scope:"https://spreadsheets.google.com/feeds profile https://www.googleapis.com/auth/userinfo.email",immediate:e,approval_prompt:s()?"force":"auto",login_hint:i,authuser:-1}),o.resolve,o.reject),r.delay(function(){o.reject("authorize.timeout")},6e4),o.promise()}}var t=window.gapi,i=!r.isEmpty(n.trim(e))&&e!==!0;return n.when(f()).then(l(s(),e)).then(a).then(u).promise()}function p(){var e=new n.Deferred,t=window.gapi;return t.client.load("oauth2","v2",function(){t.client.oauth2.userinfo.get().execute(function(t){e.resolve(t)})}),e.promise()}function d(e,s){function a(e){return e instanceof Error?e:r.extend(e,{title:["Данные в листе",u.warehouseName,"не верны или не указаны!"].join(" ")})}function f(e){var i=new n.Deferred;return t({url:e,query:"select *",reset:!0,callback:function(t,n,s){if(t){i.reject(t);return}if(r.isNull(s)){var o=new Error("Нет данных из worksheet листа: "+e);i.reject(o);return}i.resolve(s.rows)}}),i.promise()}function l(e){function f(e){var t=!r.isEmpty(n.trim(e.cellsArray[u.clock]));return t||o.logData({title:"Нет данных для импорта!",cause:r.template("Причина: в смене <%=data.externalCode%> не указано число отработанных часов в google листе"),status:"warning"})({externalCode:h(e)}),t}function l(e){var t=!r.isEmpty(n.trim(e.cellsArray[u.salary]));return t||o.logData({title:"Нет данных для импорта!",cause:r.template("Причина: в смене <%=data.externalCode%> не указана зарплата в google листе"),status:"warning"})({externalCode:h(e)}),t}function c(e){function t(t){r.isUndefined(s[r.first(e.cellsArray)])&&(s[r.first(e.cellsArray)]={}),r.extend(s[r.first(e.cellsArray)],t)}t(r.chain(e.cells).pick(r.chain(e.cells).keys(e.cells).reject(isNaN).value()).value())}function h(e){return r.first(e.cellsArray,2).join(" ")}function p(e){return{name:u.warehouseName,externalcode:h(e),moment:e.cellsArray[u.dayOfMonthColumnIndex],targetAgentUuid:u.targetAgentUuid,sourceAgentUuid:u.sourceAgentUuid,sum:e.cellsArray[3],employee:e.cellsArray[u.smenaColumnIndex],clock:e.cellsArray[u.clock],salary:e.cellsArray[u.salary],shipmentOuts:r.chain(e.cells).pick(r.chain(e.cells).keys(e.cells).reject(isNaN).value()).mapObject(function(t,n){return{code:n,quantity:t,price:s[r.first(e.cellsArray)][n]}}).reject(function(e){return r.isEmpty(e.quantity)}).value()}}function d(e){return!r.isEmpty(e.cellsArray[u.smenaColumnIndex])}function v(e){return r.isEmpty(e.cellsArray[u.smenaColumnIndex])&&!r.isEmpty(e.cellsArray[u.smenaPriceColumnIndex])}function m(e){var n=new RegExp("^Date\\((.*)\\)"),s=e.cellsArray[u.dayOfMonthColumnIndex],o=n.exec(s);if(!r.isEmpty(s)&&!r.isEmpty(o)){var a=r.map(r.last(o).split(","),Number),f=i(a);if(!f.isValid())throw t=undefined,{cause:["Дата",s,"в столбце",u.dayOfMonthColumnIndex+1,"не является датой в каком либо формате"].join(" "),advice:"Совет: Задайте дату",status:"warning"};t=f.format("YYYY-MM-DD")}if(r.isUndefined(t))throw{cause:"В одной из строк не задана дата",advice:"Совет: Задайте дату",status:"warning"};return e.cellsArray[u.dayOfMonthColumnIndex]=t,e}var t,s={};r.chain(r.rest(e,u.skipRow)).map(m).filter(v).each(c).value();var a=r.chain(r.rest(e,u.skipRow)).filter(d).filter(f).filter(l).map(p).value();return a}var u=r.extend({skipRow:2,moyskladColumnIndex:1,dayOfMonthColumnIndex:0,smenaColumnIndex:1,smenaPriceColumnIndex:2,clock:2,salary:4,warehouseName:e.text,targetAgentUuid:"",sourceAgentUuid:""},s);return n.when(e.value).then(f).then(o.tryCatch(l)).then(r.identity,a).promise()}var t=e("js/sheetrock"),n=e("jquery"),r=e("underscore"),i=e("moment"),s=e("js/rest"),o=e("js/utils"),u={preLoadGapiClient:o.logData({title:"Загружаю Google API",status:"info"}),afterLoadGapiClient:o.logData({title:"Загружено Google API",status:"success"}),preOauth2:o.logData({title:"Запрашиваю аутентификацию в Google",cause:r.template("<%=JSON.stringify(data)%>"),status:"info"}),afterOauth2:o.logData({title:"Аутентифицирован в Google",cause:r.template("<%=JSON.stringify(data)%>"),status:"success"}),preGetGoogleRequest:o.logData({title:"Получение доступных таблиц Google пользователя",status:"info"}),afterGetGoogleRequest:o.logData({title:"Получен список Google таблиц пользователя",cause:r.template("<%=JSON.stringify(data)%>"),status:"success"}),preGetWorksheetsRequest:o.logData({title:"Получение списка листов в таблице Google пользователя",cause:r.template("<%=JSON.stringify(data)%>"),status:"info"}),afterGetWorksheetsRequest:o.logData({title:"Получен список листов Google таблицы пользователя",cause:r.template("<%=JSON.stringify(data)%>"),status:"success"}),afterGetTitleAndVisualizationURI:o.logData({title:"Получен Vizualization URI для доступа к листам Google таблиц пользователя",cause:r.template("<%=JSON.stringify(data)%>"),status:"success"})};return{getSheetsJSON:d,getWorksheets:f,getSpreadSheets:a,googleLogging:l,getUserinfo:p}});if(typeof jQuery=="undefined")throw new Error("Bootstrap's JavaScript requires jQuery");return+function(e){"use strict";var t=e.fn.jquery.split(" ")[0].split(".");if(t[0]<2&&t[1]<9||t[0]==1&&t[1]==9&&t[2]<1)throw new Error("Bootstrap's JavaScript requires jQuery version 1.9.1 or higher")}(jQuery),+function(e){"use strict";function t(){var e=document.createElement("bootstrap"),t={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var n in t)if(e.style[n]!==undefined)return{end:t[n]};return!1}e.fn.emulateTransitionEnd=function(t){var n=!1,r=this;e(this).one("bsTransitionEnd",function(){n=!0});var i=function(){n||e(r).trigger(e.support.transition.end)};return setTimeout(i,t),this},e(function(){e.support.transition=t();if(!e.support.transition)return;e.event.special.bsTransitionEnd={bindType:e.support.transition.end,delegateType:e.support.transition.end,handle:function(t){if(e(t.target).is(this))return t.handleObj.handler.apply(this,arguments)}}})}(jQuery),+function(e){"use strict";function r(t){return this.each(function(){var r=e(this),i=r.data("bs.alert");i||r.data("bs.alert",i=new n(this)),typeof t=="string"&&i[t].call(r)})}var t='[data-dismiss="alert"]',n=function(n){e(n).on("click",t,this.close)};n.VERSION="3.3.4",n.TRANSITION_DURATION=150,n.prototype.close=function(t){function o(){s.detach().trigger("closed.bs.alert").remove()}var r=e(this),i=r.attr("data-target");i||(i=r.attr("href"),i=i&&i.replace(/.*(?=#[^\s]*$)/,""));var s=e(i);t&&t.preventDefault(),s.length||(s=r.closest(".alert")),s.trigger(t=e.Event("close.bs.alert"));if(t.isDefaultPrevented())return;s.removeClass("in"),e.support.transition&&s.hasClass("fade")?s.one("bsTransitionEnd",o).emulateTransitionEnd(n.TRANSITION_DURATION):o()};var i=e.fn.alert;e.fn.alert=r,e.fn.alert.Constructor=n,e.fn.alert.noConflict=function(){return e.fn.alert=i,this},e(document).on("click.bs.alert.data-api",t,n.prototype.close)}(jQuery),+function(e){"use strict";function n(n){return this.each(function(){var r=e(this),i=r.data("bs.button"),s=typeof n=="object"&&n;i||r.data("bs.button",i=new t(this,s)),n=="toggle"?i.toggle():n&&i.setState(n)})}var t=function(n,r){this.$element=e(n),this.options=e.extend({},t.DEFAULTS,r),this.isLoading=!1};t.VERSION="3.3.4",t.DEFAULTS={loadingText:"loading..."},t.prototype.setState=function(t){var n="disabled",r=this.$element,i=r.is("input")?"val":"html",s=r.data();t+="Text",s.resetText==null&&r.data("resetText",r[i]()),setTimeout(e.proxy(function(){r[i](s[t]==null?this.options[t]:s[t]),t=="loadingText"?(this.isLoading=!0,r.addClass(n).attr(n,n)):this.isLoading&&(this.isLoading=!1,r.removeClass(n).removeAttr(n))},this),0)},t.prototype.toggle=function(){var e=!0,t=this.$element.closest('[data-toggle="buttons"]');if(t.length){var n=this.$element.find("input");n.prop("type")=="radio"&&(n.prop("checked")&&this.$element.hasClass("active")?e=!1:t.find(".active").removeClass("active")),e&&n.prop("checked",!this.$element.hasClass("active")).trigger("change")}else this.$element.attr("aria-pressed",!this.$element.hasClass("active"));e&&this.$element.toggleClass("active")};var r=e.fn.button;e.fn.button=n,e.fn.button.Constructor=t,e.fn.button.noConflict=function(){return e.fn.button=r,this},e(document).on("click.bs.button.data-api",'[data-toggle^="button"]',function(t){var r=e(t.target);r.hasClass("btn")||(r=r.closest(".btn")),n.call(r,"toggle"),t.preventDefault()}).on("focus.bs.button.data-api blur.bs.button.data-api",'[data-toggle^="button"]',function(t){e(t.target).closest(".btn").toggleClass("focus",/^focus(in)?$/.test(t.type))})}(jQuery),+function(e){"use strict";function n(n){return this.each(function(){var r=e(this),i=r.data("bs.carousel"),s=e.extend({},t.DEFAULTS,r.data(),typeof n=="object"&&n),o=typeof n=="string"?n:s.slide;i||r.data("bs.carousel",i=new t(this,s)),typeof n=="number"?i.to(n):o?i[o]():s.interval&&i.pause().cycle()})}var t=function(t,n){this.$element=e(t),this.$indicators=this.$element.find(".carousel-indicators"),this.options=n,this.paused=null,this.sliding=null,this.interval=null,this.$active=null,this.$items=null,this.options.keyboard&&this.$element.on("keydown.bs.carousel",e.proxy(this.keydown,this)),this.options.pause=="hover"&&!("ontouchstart"in document.documentElement)&&this.$element.on("mouseenter.bs.carousel",e.proxy(this.pause,this)).on("mouseleave.bs.carousel",e.proxy(this.cycle,this))};t.VERSION="3.3.4",t.TRANSITION_DURATION=600,t.DEFAULTS={interval:5e3,pause:"hover",wrap:!0,keyboard:!0},t.prototype.keydown=function(e){if(/input|textarea/i.test(e.target.tagName))return;switch(e.which){case 37:this.prev();break;case 39:this.next();break;default:return}e.preventDefault()},t.prototype.cycle=function(t){return t||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval(e.proxy(this.next,this),this.options.interval)),this},t.prototype.getItemIndex=function(e){return this.$items=e.parent().children(".item"),this.$items.index(e||this.$active)},t.prototype.getItemForDirection=function(e,t){var n=this.getItemIndex(t),r=e=="prev"&&n===0||e=="next"&&n==this.$items.length-1;if(r&&!this.options.wrap)return t;var i=e=="prev"?-1:1,s=(n+i)%this.$items.length;return this.$items.eq(s)},t.prototype.to=function(e){var t=this,n=this.getItemIndex(this.$active=this.$element.find(".item.active"));if(e>this.$items.length-1||e<0)return;return this.sliding?this.$element.one("slid.bs.carousel",function(){t.to(e)}):n==e?this.pause().cycle():this.slide(e>n?"next":"prev",this.$items.eq(e))},t.prototype.pause=function(t){return t||(this.paused=!0),this.$element.find(".next, .prev").length&&e.support.transition&&(this.$element.trigger(e.support.transition.end),this.cycle(!0)),this.interval=clearInterval(this.interval),this},t.prototype.next=function(){if(this.sliding)return;return this.slide("next")},t.prototype.prev=function(){if(this.sliding)return;return this.slide("prev")},t.prototype.slide=function(n,r){var i=this.$element.find(".item.active"),s=r||this.getItemForDirection(n,i),o=this.interval,u=n=="next"?"left":"right",a=this;if(s.hasClass("active"))return this.sliding=!1;var f=s[0],l=e.Event("slide.bs.carousel",{relatedTarget:f,direction:u});this.$element.trigger(l);if(l.isDefaultPrevented())return;this.sliding=!0,o&&this.pause();if(this.$indicators.length){this.$indicators.find(".active").removeClass("active");var c=e(this.$indicators.children()[this.getItemIndex(s)]);c&&c.addClass("active")}var h=e.Event("slid.bs.carousel",{relatedTarget:f,direction:u});return e.support.transition&&this.$element.hasClass("slide")?(s.addClass(n),s[0].offsetWidth,i.addClass(u),s.addClass(u),i.one("bsTransitionEnd",function(){s.removeClass([n,u].join(" ")).addClass("active"),i.removeClass(["active",u].join(" ")),a.sliding=!1,setTimeout(function(){a.$element.trigger(h)},0)}).emulateTransitionEnd(t.TRANSITION_DURATION)):(i.removeClass("active"),s.addClass("active"),this.sliding=!1,this.$element.trigger(h)),o&&this.cycle(),this};var r=e.fn.carousel;e.fn.carousel=n,e.fn.carousel.Constructor=t,e.fn.carousel.noConflict=function(){return e.fn.carousel=r,this};var i=function(t){var r,i=e(this),s=e(i.attr("data-target")||(r=i.attr("href"))&&r.replace(/.*(?=#[^\s]+$)/,""));if(!s.hasClass("carousel"))return;var o=e.extend({},s.data(),i.data()),u=i.attr("data-slide-to");u&&(o.interval=!1),n.call(s,o),u&&s.data("bs.carousel").to(u),t.preventDefault()};e(document).on("click.bs.carousel.data-api","[data-slide]",i).on("click.bs.carousel.data-api","[data-slide-to]",i),e(window).on("load",function(){e('[data-ride="carousel"]').each(function(){var t=e(this);n.call(t,t.data())})})}(jQuery),+function(e){"use strict";function n(t){var n,r=t.attr("data-target")||(n=t.attr("href"))&&n.replace(/.*(?=#[^\s]+$)/,"");return e(r)}function r(n){return this.each(function(){var r=e(this),i=r.data("bs.collapse"),s=e.extend({},t.DEFAULTS,r.data(),typeof n=="object"&&n);!i&&s.toggle&&/show|hide/.test(n)&&(s.toggle=!1),i||r.data("bs.collapse",i=new t(this,s)),typeof n=="string"&&i[n]()})}var t=function(n,r){this.$element=e(n),this.options=e.extend({},t.DEFAULTS,r),this.$trigger=e('[data-toggle="collapse"][href="#'+n.id+'"],'+'[data-toggle="collapse"][data-target="#'+n.id+'"]'),this.transitioning=null,this.options.parent?this.$parent=this.getParent():this.addAriaAndCollapsedClass(this.$element,this.$trigger),this.options.toggle&&this.toggle()};t.VERSION="3.3.4",t.TRANSITION_DURATION=350,t.DEFAULTS={toggle:!0},t.prototype.dimension=function(){var e=this.$element.hasClass("width");return e?"width":"height"},t.prototype.show=function(){if(this.transitioning||this.$element.hasClass("in"))return;var n,i=this.$parent&&this.$parent.children(".panel").children(".in, .collapsing");if(i&&i.length){n=i.data("bs.collapse");if(n&&n.transitioning)return}var s=e.Event("show.bs.collapse");this.$element.trigger(s);if(s.isDefaultPrevented())return;i&&i.length&&(r.call(i,"hide"),n||i.data("bs.collapse",null));var o=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[o](0).attr("aria-expanded",!0),this.$trigger.removeClass("collapsed").attr("aria-expanded",!0),this.transitioning=1;var u=function(){this.$element.removeClass("collapsing").addClass("collapse in")[o](""),this.transitioning=0,this.$element.trigger("shown.bs.collapse")};if(!e.support.transition)return u.call(this);var a=e.camelCase(["scroll",o].join("-"));this.$element.one("bsTransitionEnd",e.proxy(u,this)).emulateTransitionEnd(t.TRANSITION_DURATION)[o](this.$element[0][a])},t.prototype.hide=function(){if(this.transitioning||!this.$element.hasClass("in"))return;var n=e.Event("hide.bs.collapse");this.$element.trigger(n);if(n.isDefaultPrevented())return;var r=this.dimension();this.$element[r](this.$element[r]())[0].offsetHeight,this.$element.addClass("collapsing").removeClass("collapse in").attr("aria-expanded",!1),this.$trigger.addClass("collapsed").attr("aria-expanded",!1),this.transitioning=1;var i=function(){this.transitioning=0,this.$element.removeClass("collapsing").addClass("collapse").trigger("hidden.bs.collapse")};if(!e.support.transition)return i.call(this);this.$element[r](0).one("bsTransitionEnd",e.proxy(i,this)).emulateTransitionEnd(t.TRANSITION_DURATION)},t.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()},t.prototype.getParent=function(){return e(this.options.parent).find('[data-toggle="collapse"][data-parent="'+this.options.parent+'"]').each(e.proxy(function(t,r){var i=e(r);this.addAriaAndCollapsedClass(n(i),i)},this)).end()},t.prototype.addAriaAndCollapsedClass=function(e,t){var n=e.hasClass("in");e.attr("aria-expanded",n),t.toggleClass("collapsed",!n).attr("aria-expanded",n)};var i=e.fn.collapse;e.fn.collapse=r,e.fn.collapse.Constructor=t,e.fn.collapse.noConflict=function(){return e.fn.collapse=i,this},e(document).on("click.bs.collapse.data-api",'[data-toggle="collapse"]',function(t){var i=e(this);i.attr("data-target")||t.preventDefault();var s=n(i),o=s.data("bs.collapse"),u=o?"toggle":i.data();r.call(s,u)})}(jQuery),+function(e){"use strict";function i(r){if(r&&r.which===3)return;e(t).remove(),e(n).each(function(){var t=e(this),n=s(t),i={relatedTarget:this};if(!n.hasClass("open"))return;n.trigger(r=e.Event("hide.bs.dropdown",i));if(r.isDefaultPrevented())return;t.attr("aria-expanded","false"),n.removeClass("open").trigger("hidden.bs.dropdown",i)})}function s(t){var n=t.attr("data-target");n||(n=t.attr("href"),n=n&&/#[A-Za-z]/.test(n)&&n.replace(/.*(?=#[^\s]*$)/,""));var r=n&&e(n);return r&&r.length?r:t.parent()}function o(t){return this.each(function(){var n=e(this),i=n.data("bs.dropdown");i||n.data("bs.dropdown",i=new r(this)),typeof t=="string"&&i[t].call(n)})}var t=".dropdown-backdrop",n='[data-toggle="dropdown"]',r=function(t){e(t).on("click.bs.dropdown",this.toggle)};r.VERSION="3.3.4",r.prototype.toggle=function(t){var n=e(this);if(n.is(".disabled, :disabled"))return;var r=s(n),o=r.hasClass("open");i();if(!o){"ontouchstart"in document.documentElement&&!r.closest(".navbar-nav").length&&e('<div class="dropdown-backdrop"/>').insertAfter(e(this)).on("click",i);var u={relatedTarget:this};r.trigger(t=e.Event("show.bs.dropdown",u));if(t.isDefaultPrevented())return;n.trigger("focus").attr("aria-expanded","true"),r.toggleClass("open").trigger("shown.bs.dropdown",u)}return!1},r.prototype.keydown=function(t){if(!/(38|40|27|32)/.test(t.which)||/input|textarea/i.test(t.target.tagName))return;var r=e(this);t.preventDefault(),t.stopPropagation();if(r.is(".disabled, :disabled"))return;var i=s(r),o=i.hasClass("open");if(!o&&t.which!=27||o&&t.which==27)return t.which==27&&i.find(n).trigger("focus"),r.trigger("click");var u=" li:not(.disabled):visible a",a=i.find('[role="menu"]'+u+', [role="listbox"]'+u);if(!a.length)return;var f=a.index(t.target);t.which==38&&f>0&&f--,t.which==40&&f<a.length-1&&f++,~f||(f=0),a.eq(f).trigger("focus")};var u=e.fn.dropdown;e.fn.dropdown=o,e.fn.dropdown.Constructor=r,e.fn.dropdown.noConflict=function(){return e.fn.dropdown=u,this},e(document).on("click.bs.dropdown.data-api",i).on("click.bs.dropdown.data-api",".dropdown form",function(e){e.stopPropagation()}).on("click.bs.dropdown.data-api",n,r.prototype.toggle).on("keydown.bs.dropdown.data-api",n,r.prototype.keydown).on("keydown.bs.dropdown.data-api",'[role="menu"]',r.prototype.keydown).on("keydown.bs.dropdown.data-api",'[role="listbox"]',r.prototype.keydown)}(jQuery),+function(e){"use strict";function n(n,r){return this.each(function(){var i=e(this),s=i.data("bs.modal"),o=e.extend({},t.DEFAULTS,i.data(),typeof n=="object"&&n);s||i.data("bs.modal",s=new t(this,o)),typeof n=="string"?s[n](r):o.show&&s.show(r)})}var t=function(t,n){this.options=n,this.$body=e(document.body),this.$element=e(t),this.$dialog=this.$element.find(".modal-dialog"),this.$backdrop=null,this.isShown=null,this.originalBodyPad=null,this.scrollbarWidth=0,this.ignoreBackdropClick=!1,this.options.remote&&this.$element.find(".modal-content").load(this.options.remote,e.proxy(function(){this.$element.trigger("loaded.bs.modal")},this))};t.VERSION="3.3.4",t.TRANSITION_DURATION=300,t.BACKDROP_TRANSITION_DURATION=150,t.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},t.prototype.toggle=function(e){return this.isShown?this.hide():this.show(e)},t.prototype.show=function(n){var r=this,i=e.Event("show.bs.modal",{relatedTarget:n});this.$element.trigger(i);if(this.isShown||i.isDefaultPrevented())return;this.isShown=!0,this.checkScrollbar(),this.setScrollbar(),this.$body.addClass("modal-open"),this.escape(),this.resize(),this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',e.proxy(this.hide,this)),this.$dialog.on("mousedown.dismiss.bs.modal",function(){r.$element.one("mouseup.dismiss.bs.modal",function(t){e(t.target).is(r.$element)&&(r.ignoreBackdropClick=!0)})}),this.backdrop(function(){var i=e.support.transition&&r.$element.hasClass("fade");r.$element.parent().length||r.$element.appendTo(r.$body),r.$element.show().scrollTop(0),r.adjustDialog(),i&&r.$element[0].offsetWidth,r.$element.addClass("in").attr("aria-hidden",!1),r.enforceFocus();var s=e.Event("shown.bs.modal",{relatedTarget:n});i?r.$dialog.one("bsTransitionEnd",function(){r.$element.trigger("focus").trigger(s)}).emulateTransitionEnd(t.TRANSITION_DURATION):r.$element.trigger("focus").trigger(s)})},t.prototype.hide=function(n){n&&n.preventDefault(),n=e.Event("hide.bs.modal"),this.$element.trigger(n);if(!this.isShown||n.isDefaultPrevented())return;this.isShown=!1,this.escape(),this.resize(),e(document).off("focusin.bs.modal"),this.$element.removeClass("in").attr("aria-hidden",!0).off("click.dismiss.bs.modal").off("mouseup.dismiss.bs.modal"),this.$dialog.off("mousedown.dismiss.bs.modal"),e.support.transition&&this.$element.hasClass("fade")?this.$element.one("bsTransitionEnd",e.proxy(this.hideModal,this)).emulateTransitionEnd(t.TRANSITION_DURATION):this.hideModal()},t.prototype.enforceFocus=function(){e(document).off("focusin.bs.modal").on("focusin.bs.modal",e.proxy(function(e){this.$element[0]!==e.target&&!this.$element.has(e.target).length&&this.$element.trigger("focus")},this))},t.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keydown.dismiss.bs.modal",e.proxy(function(e){e.which==27&&this.hide()},this)):this.isShown||this.$element.off("keydown.dismiss.bs.modal")},t.prototype.resize=function(){this.isShown?e(window).on("resize.bs.modal",e.proxy(this.handleUpdate,this)):e(window).off("resize.bs.modal")},t.prototype.hideModal=function(){var e=this;this.$element.hide(),this.backdrop(function(){e.$body.removeClass("modal-open"),e.resetAdjustments(),e.resetScrollbar(),e.$element.trigger("hidden.bs.modal")})},t.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},t.prototype.backdrop=function(n){var r=this,i=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var s=e.support.transition&&i;this.$backdrop=e('<div class="modal-backdrop '+i+'" />').appendTo(this.$body),this.$element.on("click.dismiss.bs.modal",e.proxy(function(e){if(this.ignoreBackdropClick){this.ignoreBackdropClick=!1;return}if(e.target!==e.currentTarget)return;this.options.backdrop=="static"?this.$element[0].focus():this.hide()},this)),s&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in");if(!n)return;s?this.$backdrop.one("bsTransitionEnd",n).emulateTransitionEnd(t.BACKDROP_TRANSITION_DURATION):n()}else if(!this.isShown&&this.$backdrop){this.$backdrop.removeClass("in");var o=function(){r.removeBackdrop(),n&&n()};e.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one("bsTransitionEnd",o).emulateTransitionEnd(t.BACKDROP_TRANSITION_DURATION):o()}else n&&n()},t.prototype.handleUpdate=function(){this.adjustDialog()},t.prototype.adjustDialog=function(){var e=this.$element[0].scrollHeight>document.documentElement.clientHeight;this.$element.css({paddingLeft:!this.bodyIsOverflowing&&e?this.scrollbarWidth:"",paddingRight:this.bodyIsOverflowing&&!e?this.scrollbarWidth:""})},t.prototype.resetAdjustments=function(){this.$element.css({paddingLeft:"",paddingRight:""})},t.prototype.checkScrollbar=function(){var e=window.innerWidth;if(!e){var t=document.documentElement.getBoundingClientRect();e=t.right-Math.abs(t.left)}this.bodyIsOverflowing=document.body.clientWidth<e,this.scrollbarWidth=this.measureScrollbar()},t.prototype.setScrollbar=function(){var e=parseInt(this.$body.css("padding-right")||0,10);this.originalBodyPad=document.body.style.paddingRight||"",this.bodyIsOverflowing&&this.$body.css("padding-right",e+this.scrollbarWidth)},t.prototype.resetScrollbar=function(){this.$body.css("padding-right",this.originalBodyPad)},t.prototype.measureScrollbar=function(){var e=document.createElement("div");e.className="modal-scrollbar-measure",this.$body.append(e);var t=e.offsetWidth-e.clientWidth;return this.$body[0].removeChild(e),t};var r=e.fn.modal;e.fn.modal=n,e.fn.modal.Constructor=t,e.fn.modal.noConflict=function(){return e.fn.modal=r,this},e(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(t){var r=e(this),i=r.attr("href"),s=e(r.attr("data-target")||i&&i.replace(/.*(?=#[^\s]+$)/,"")),o=s.data("bs.modal")?"toggle":e.extend({remote:!/#/.test(i)&&i},s.data(),r.data());r.is("a")&&t.preventDefault(),s.one("show.bs.modal",function(e){if(e.isDefaultPrevented())return;s.one("hidden.bs.modal",function(){r.is(":visible")&&r.trigger("focus")})}),n.call(s,o,this)})}(jQuery),+function(e){"use strict";function n(n){return this.each(function(){var r=e(this),i=r.data("bs.tooltip"),s=typeof n=="object"&&n;if(!i&&/destroy|hide/.test(n))return;i||r.data("bs.tooltip",i=new t(this,s)),typeof n=="string"&&i[n]()})}var t=function(e,t){this.type=null,this.options=null,this.enabled=null,this.timeout=null,this.hoverState=null,this.$element=null,this.init("tooltip",e,t)};t.VERSION="3.3.4",t.TRANSITION_DURATION=150,t.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1,viewport:{selector:"body",padding:0}},t.prototype.init=function(t,n,r){this.enabled=!0,this.type=t,this.$element=e(n),this.options=this.getOptions(r),this.$viewport=this.options.viewport&&e(this.options.viewport.selector||this.options.viewport);if(this.$element[0]instanceof document.constructor&&!this.options.selector)throw new Error("`selector` option must be specified when initializing "+this.type+" on the window.document object!");var i=this.options.trigger.split(" ");for(var s=i.length;s--;){var o=i[s];if(o=="click")this.$element.on("click."+this.type,this.options.selector,e.proxy(this.toggle,this));else if(o!="manual"){var u=o=="hover"?"mouseenter":"focusin",a=o=="hover"?"mouseleave":"focusout";this.$element.on(u+"."+this.type,this.options.selector,e.proxy(this.enter,this)),this.$element.on(a+"."+this.type,this.options.selector,e.proxy(this.leave,this))}}this.options.selector?this._options=e.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},t.prototype.getDefaults=function(){return t.DEFAULTS},t.prototype.getOptions=function(t){return t=e.extend({},this.getDefaults(),this.$element.data(),t),t.delay&&typeof t.delay=="number"&&(t.delay={show:t.delay,hide:t.delay}),t},t.prototype.getDelegateOptions=function(){var t={},n=this.getDefaults();return this._options&&e.each(this._options,function(e,r){n[e]!=r&&(t[e]=r)}),t},t.prototype.enter=function(t){var n=t instanceof this.constructor?t:e(t.currentTarget).data("bs."+this.type);if(n&&n.$tip&&n.$tip.is(":visible")){n.hoverState="in";return}n||(n=new this.constructor(t.currentTarget,this.getDelegateOptions()),e(t.currentTarget).data("bs."+this.type,n)),clearTimeout(n.timeout),n.hoverState="in";if(!n.options.delay||!n.options.delay.show)return n.show();n.timeout=setTimeout(function(){n.hoverState=="in"&&n.show()},n.options.delay.show)},t.prototype.leave=function(t){var n=t instanceof this.constructor?t:e(t.currentTarget).data("bs."+this.type);n||(n=new this.constructor(t.currentTarget,this.getDelegateOptions()),e(t.currentTarget).data("bs."+this.type,n)),clearTimeout(n.timeout),n.hoverState="out";if(!n.options.delay||!n.options.delay.hide)return n.hide();n.timeout=setTimeout(function(){n.hoverState=="out"&&n.hide()},n.options.delay.hide)},t.prototype.show=function(){var n=e.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){this.$element.trigger(n);var r=e.contains(this.$element[0].ownerDocument.documentElement,this.$element[0]);if(n.isDefaultPrevented()||!r)return;var i=this,s=this.tip(),o=this.getUID(this.type);this.setContent(),s.attr("id",o),this.$element.attr("aria-describedby",o),this.options.animation&&s.addClass("fade");var u=typeof this.options.placement=="function"?this.options.placement.call(this,s[0],this.$element[0]):this.options.placement,a=/\s?auto?\s?/i,f=a.test(u);f&&(u=u.replace(a,"")||"top"),s.detach().css({top:0,left:0,display:"block"}).addClass(u).data("bs."+this.type,this),this.options.container?s.appendTo(this.options.container):s.insertAfter(this.$element);var l=this.getPosition(),c=s[0].offsetWidth,h=s[0].offsetHeight;if(f){var p=u,d=this.options.container?e(this.options.container):this.$element.parent(),v=this.getPosition(d);u=u=="bottom"&&l.bottom+h>v.bottom?"top":u=="top"&&l.top-h<v.top?"bottom":u=="right"&&l.right+c>v.width?"left":u=="left"&&l.left-c<v.left?"right":u,s.removeClass(p).addClass(u)}var m=this.getCalculatedOffset(u,l,c,h);this.applyPlacement(m,u);var g=function(){var e=i.hoverState;i.$element.trigger("shown.bs."+i.type),i.hoverState=null,e=="out"&&i.leave(i)};e.support.transition&&this.$tip.hasClass("fade")?s.one("bsTransitionEnd",g).emulateTransitionEnd(t.TRANSITION_DURATION):g()}},t.prototype.applyPlacement=function(t,n){var r=this.tip(),i=r[0].offsetWidth,s=r[0].offsetHeight,o=parseInt(r.css("margin-top"),10),u=parseInt(r.css("margin-left"),10);isNaN(o)&&(o=0),isNaN(u)&&(u=0),t.top=t.top+o,t.left=t.left+u,e.offset.setOffset(r[0],e.extend({using:function(e){r.css({top:Math.round(e.top),left:Math.round(e.left)})}},t),0),r.addClass("in");var a=r[0].offsetWidth,f=r[0].offsetHeight;n=="top"&&f!=s&&(t.top=t.top+s-f);var l=this.getViewportAdjustedDelta(n,t,a,f);l.left?t.left+=l.left:t.top+=l.top;var c=/top|bottom/.test(n),h=c?l.left*2-i+a:l.top*2-s+f,p=c?"offsetWidth":"offsetHeight";r.offset(t),this.replaceArrow(h,r[0][p],c)},t.prototype.replaceArrow=function(e,t,n){this.arrow().css(n?"left":"top",50*(1-e/t)+"%").css(n?"top":"left","")},t.prototype.setContent=function(){var e=this.tip(),t=this.getTitle();e.find(".tooltip-inner")[this.options.html?"html":"text"](t),e.removeClass("fade in top bottom left right")},t.prototype.hide=function(n){function o(){r.hoverState!="in"&&i.detach(),r.$element.removeAttr("aria-describedby").trigger("hidden.bs."+r.type),n&&n()}var r=this,i=e(this.$tip),s=e.Event("hide.bs."+this.type);this.$element.trigger(s);if(s.isDefaultPrevented())return;return i.removeClass("in"),e.support.transition&&i.hasClass("fade")?i.one("bsTransitionEnd",o).emulateTransitionEnd(t.TRANSITION_DURATION):o(),this.hoverState=null,this},t.prototype.fixTitle=function(){var e=this.$element;(e.attr("title")||typeof e.attr("data-original-title")!="string")&&e.attr("data-original-title",e.attr("title")||"").attr("title","")},t.prototype.hasContent=function(){return this.getTitle()},t.prototype.getPosition=function(t){t=t||this.$element;var n=t[0],r=n.tagName=="BODY",i=n.getBoundingClientRect();i.width==null&&(i=e.extend({},i,{width:i.right-i.left,height:i.bottom-i.top}));var s=r?{top:0,left:0}:t.offset(),o={scroll:r?document.documentElement.scrollTop||document.body.scrollTop:t.scrollTop()},u=r?{width:e(window).width(),height:e(window).height()}:null;return e.extend({},i,o,u,s)},t.prototype.getCalculatedOffset=function(e,t,n,r){return e=="bottom"?{top:t.top+t.height,left:t.left+t.width/2-n/2}:e=="top"?{top:t.top-r,left:t.left+t.width/2-n/2}:e=="left"?{top:t.top+t.height/2-r/2,left:t.left-n}:{top:t.top+t.height/2-r/2,left:t.left+t.width}},t.prototype.getViewportAdjustedDelta=function(e,t,n,r){var i={top:0,left:0};if(!this.$viewport)return i;var s=this.options.viewport&&this.options.viewport.padding||0,o=this.getPosition(this.$viewport);if(/right|left/.test(e)){var u=t.top-s-o.scroll,a=t.top+s-o.scroll+r;u<o.top?i.top=o.top-u:a>o.top+o.height&&(i.top=o.top+o.height-a)}else{var f=t.left-s,l=t.left+s+n;f<o.left?i.left=o.left-f:l>o.width&&(i.left=o.left+o.width-l)}return i},t.prototype.getTitle=function(){var e,t=this.$element,n=this.options;return e=t.attr("data-original-title")||(typeof n.title=="function"?n.title.call(t[0]):n.title),e},t.prototype.getUID=function(e){do e+=~~(Math.random()*1e6);while(document.getElementById(e));return e},t.prototype.tip=function(){return this.$tip=this.$tip||e(this.options.template)},t.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},t.prototype.enable=function(){this.enabled=!0},t.prototype.disable=function(){this.enabled=!1},t.prototype.toggleEnabled=function(){this.enabled=!this.enabled},t.prototype.toggle=function(t){var n=this;t&&(n=e(t.currentTarget).data("bs."+this.type),n||(n=new this.constructor(t.currentTarget,this.getDelegateOptions()),e(t.currentTarget).data("bs."+this.type,n))),n.tip().hasClass("in")?n.leave(n):n.enter(n)},t.prototype.destroy=function(){var e=this;clearTimeout(this.timeout),this.hide(function(){e.$element.off("."+e.type).removeData("bs."+e.type)})};var r=e.fn.tooltip;e.fn.tooltip=n,e.fn.tooltip.Constructor=t,e.fn.tooltip.noConflict=function(){return e.fn.tooltip=r,this}}(jQuery),+function(e){"use strict";function n(n){return this.each(function(){var r=e(this),i=r.data("bs.popover"),s=typeof n=="object"&&n;if(!i&&/destroy|hide/.test(n))return;i||r.data("bs.popover",i=new t(this,s)),typeof n=="string"&&i[n]()})}var t=function(e,t){this.init("popover",e,t)};if(!e.fn.tooltip)throw new Error("Popover requires tooltip.js");t.VERSION="3.3.4",t.DEFAULTS=e.extend({},e.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),t.prototype=e.extend({},e.fn.tooltip.Constructor.prototype),t.prototype.constructor=t,t.prototype.getDefaults=function(){return t.DEFAULTS},t.prototype.setContent=function(){var e=this.tip(),t=this.getTitle(),n=this.getContent();e.find(".popover-title")[this.options.html?"html":"text"](t),e.find(".popover-content").children().detach().end()[this.options.html?typeof n=="string"?"html":"append":"text"](n),e.removeClass("fade top bottom left right in"),e.find(".popover-title").html()||e.find(".popover-title").hide()},t.prototype.hasContent=function(){return this.getTitle()||this.getContent()},t.prototype.getContent=function(){var e=this.$element,t=this.options;return e.attr("data-content")||(typeof t.content=="function"?t.content.call(e[0]):t.content)},t.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")};var r=e.fn.popover;e.fn.popover=n,e.fn.popover.Constructor=t,e.fn.popover.noConflict=function(){return e.fn.popover=r,this}}(jQuery),+function(e){"use strict";function t(n,r){this.$body=e(document.body),this.$scrollElement=e(n).is(document.body)?e(window):e(n),this.options=e.extend({},t.DEFAULTS,r),this.selector=(this.options.target||"")+" .nav li > a",this.offsets=[],this.targets=[],this.activeTarget=null,this.scrollHeight=0,this.$scrollElement.on("scroll.bs.scrollspy",e.proxy(this.process,this)),this.refresh(),this.process()}function n(n){return this.each(function(){var r=e(this),i=r.data("bs.scrollspy"),s=typeof n=="object"&&n;i||r.data("bs.scrollspy",i=new t(this,s)),typeof n=="string"&&i[n]()})}t.VERSION="3.3.4",t.DEFAULTS={offset:10},t.prototype.getScrollHeight=function(){return this.$scrollElement[0].scrollHeight||Math.max(this.$body[0].scrollHeight,document.documentElement.scrollHeight)},t.prototype.refresh=function(){var t=this,n="offset",r=0;this.offsets=[],this.targets=[],this.scrollHeight=this.getScrollHeight(),e.isWindow(this.$scrollElement[0])||(n="position",r=this.$scrollElement.scrollTop()),this.$body.find(this.selector).map(function(){var t=e(this),i=t.data("target")||t.attr("href"),s=/^#./.test(i)&&e(i);return s&&s.length&&s.is(":visible")&&[[s[n]().top+r,i]]||null}).sort(function(e,t){return e[0]-t[0]}).each(function(){t.offsets.push(this[0]),t.targets.push(this[1])})},t.prototype.process=function(){var e=this.$scrollElement.scrollTop()+this.options.offset,t=this.getScrollHeight(),n=this.options.offset+t-this.$scrollElement.height(),r=this.offsets,i=this.targets,s=this.activeTarget,o;this.scrollHeight!=t&&this.refresh();if(e>=n)return s!=(o=i[i.length-1])&&this.activate(o);if(s&&e<r[0])return this.activeTarget=null,this.clear();for(o=r.length;o--;)s!=i[o]&&e>=r[o]&&(r[o+1]===undefined||e<r[o+1])&&this.activate(i[o])},t.prototype.activate=function(t){this.activeTarget=t,this.clear();var n=this.selector+'[data-target="'+t+'"],'+this.selector+'[href="'+t+'"]',r=e(n).parents("li").addClass("active");r.parent(".dropdown-menu").length&&(r=r.closest("li.dropdown").addClass("active")),r.trigger("activate.bs.scrollspy")},t.prototype.clear=function(){e(this.selector).parentsUntil(this.options.target,".active").removeClass("active")};var r=e.fn.scrollspy;e.fn.scrollspy=n,e.fn.scrollspy.Constructor=t,e.fn.scrollspy.noConflict=function(){return e.fn.scrollspy=r,this},e(window).on("load.bs.scrollspy.data-api",function(){e('[data-spy="scroll"]').each(function(){var t=e(this);n.call(t,t.data())})})}(jQuery),+function(e){"use strict";function n(n){return this.each(function(){var r=e(this),i=r.data("bs.tab");i||r.data("bs.tab",i=new t(this)),typeof n=="string"&&i[n]()})}var t=function(t){this.element=e(t)};t.VERSION="3.3.4",t.TRANSITION_DURATION=150,t.prototype.show=function(){var t=this.element,n=t.closest("ul:not(.dropdown-menu)"),r=t.data("target");r||(r=t.attr("href"),r=r&&r.replace(/.*(?=#[^\s]*$)/,""));if(t.parent("li").hasClass("active"))return;var i=n.find(".active:last a"),s=e.Event("hide.bs.tab",{relatedTarget:t[0]}),o=e.Event("show.bs.tab",{relatedTarget:i[0]});i.trigger(s),t.trigger(o);if(o.isDefaultPrevented()||s.isDefaultPrevented())return;var u=e(r);this.activate(t.closest("li"),n),this.activate(u,u.parent(),function(){i.trigger({type:"hidden.bs.tab",relatedTarget:t[0]}),t.trigger({type:"shown.bs.tab",relatedTarget:i[0]})})},t.prototype.activate=function(n,r,i){function u(){s.removeClass("active").find("> .dropdown-menu > .active").removeClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!1),n.addClass("active").find('[data-toggle="tab"]').attr("aria-expanded",!0),o?(n[0].offsetWidth,n.addClass("in")):n.removeClass("fade"),n.parent(".dropdown-menu").length&&n.closest("li.dropdown").addClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!0),i&&i()}var s=r.find("> .active"),o=i&&e.support.transition&&(s.length&&s.hasClass("fade")||!!r.find("> .fade").length);s.length&&o?s.one("bsTransitionEnd",u).emulateTransitionEnd(t.TRANSITION_DURATION):u(),s.removeClass("in")};var r=e.fn.tab;e.fn.tab=n,e.fn.tab.Constructor=t,e.fn.tab.noConflict=function(){return e.fn.tab=r,this};var i=function(t){t.preventDefault(),n.call(e(this),"show")};e(document).on("click.bs.tab.data-api",'[data-toggle="tab"]',i).on("click.bs.tab.data-api",'[data-toggle="pill"]',i)}(jQuery),+function(e){"use strict";function n(n){return this.each(function(){var r=e(this),i=r.data("bs.affix"),s=typeof n=="object"&&n;i||r.data("bs.affix",i=new t(this,s)),typeof n=="string"&&i[n]()})}var t=function(n,r){this.options=e.extend({},t.DEFAULTS,r),this.$target=e(this.options.target).on("scroll.bs.affix.data-api",e.proxy(this.checkPosition,this)).on("click.bs.affix.data-api",e.proxy(this.checkPositionWithEventLoop,this)),this.$element=e(n),this.affixed=null,this.unpin=null,this.pinnedOffset=null,this.checkPosition()};t.VERSION="3.3.4",t.RESET="affix affix-top affix-bottom",t.DEFAULTS={offset:0,target:window},t.prototype.getState=function(e,t,n,r){var i=this.$target.scrollTop(),s=this.$element.offset(),o=this.$target.height();if(n!=null&&this.affixed=="top")return i<n?"top":!1;if(this.affixed=="bottom")return n!=null?i+this.unpin<=s.top?!1:"bottom":i+o<=e-r?!1:"bottom";var u=this.affixed==null,a=u?i:s.top,f=u?o:t;return n!=null&&i<=n?"top":r!=null&&a+f>=e-r?"bottom":!1},t.prototype.getPinnedOffset=function(){if(this.pinnedOffset)return this.pinnedOffset;this.$element.removeClass(t.RESET).addClass("affix");var e=this.$target.scrollTop(),n=this.$element.offset();return this.pinnedOffset=n.top-e},t.prototype.checkPositionWithEventLoop=function(){setTimeout(e.proxy(this.checkPosition,this),1)},t.prototype.checkPosition=function(){if(!this.$element.is(":visible"))return;var n=this.$element.height(),r=this.options.offset,i=r.top,s=r.bottom,o=e(document.body).height();typeof r!="object"&&(s=i=r),typeof i=="function"&&(i=r.top(this.$element)),typeof s=="function"&&(s=r.bottom(this.$element));var u=this.getState(o,n,i,s);if(this.affixed!=u){this.unpin!=null&&this.$element.css("top","");var a="affix"+(u?"-"+u:""),f=e.Event(a+".bs.affix");this.$element.trigger(f);if(f.isDefaultPrevented())return;this.affixed=u,this.unpin=u=="bottom"?this.getPinnedOffset():null,this.$element.removeClass(t.RESET).addClass(a).trigger(a.replace("affix","affixed")+".bs.affix")}u=="bottom"&&this.$element.offset({top:o-n-s})};var r=e.fn.affix;e.fn.affix=n,e.fn.affix.Constructor=t,e.fn.affix.noConflict=function(){return e.fn.affix=r,this},e(window).on("load",function(){e('[data-spy="affix"]').each(function(){var t=e(this),r=t.data();r.offset=r.offset||{},r.offsetBottom!=null&&(r.offset.bottom=r.offsetBottom),r.offsetTop!=null&&(r.offset.top=r.offsetTop),n.call(t,r)})})}(jQuery),define("bootstrap",function(){}),function(e){typeof define=="function"&&define.amd?define("fuelux",["jquery","bootstrap"],e):e(jQuery)}(function(e){if(typeof e=="undefined")throw new Error("Fuel UX's JavaScript requires jQuery");if(typeof e.fn.dropdown=="undefined"||typeof e.fn.collapse=="undefined")throw new Error("Fuel UX's JavaScript requires Bootstrap");(function(e){var t=e.fn.checkbox,n=function(t,n){this.options=e.extend({},e.fn.checkbox.defaults,n),this.$element=e(t).is('input[type="checkbox"]')?e(t):e(t).find('input[type="checkbox"]:first'),this.$label=this.$element.parent(),this.$parent=this.$label.parent(".checkbox"),this.$toggleContainer=this.$element.attr("data-toggle"),this.state={disabled:!1,checked:!1},this.$parent.length===0&&(this.$parent=null),Boolean(this.$toggleContainer)?this.$toggleContainer=e(this.$toggleContainer):this.$toggleContainer=null,this.$element.on("change.fu.checkbox",e.proxy(this.itemchecked,this)),this.$label.unbind("click",e.proxy(this.toggle,this)),this.$label.on("click",e.proxy(this.toggle,this)),this.setState()};n.prototype={constructor:n,setState:function(e){e=e||this.$element,this.state.disabled=Boolean(e.prop("disabled")),this.state.checked=Boolean(e.is(":checked")),this._resetClasses(),this._toggleCheckedState(),this._toggleDisabledState(),this.toggleContainer()},enable:function(){this.state.disabled=!1,this.$element.removeAttr("disabled"),this.$element.prop("disabled",!1),this._resetClasses(),this.$element.trigger("enabled.fu.checkbox")},disable:function(){this.state.disabled=!0,this.$element.prop("disabled",!0),this.$element.attr("disabled","disabled"),this._setDisabledClass(),this.$element.trigger("disabled.fu.checkbox")},check:function(){this.state.checked=!0,this.$element.prop("checked",!0),this.$element.attr("checked","checked"),this._setCheckedClass(),this.$element.trigger("checked.fu.checkbox")},uncheck:function(){this.state.checked=!1,this.$element.prop("checked",!1),this.$element.removeAttr("checked"),this._resetClasses(),this.$element.trigger("unchecked.fu.checkbox")},isChecked:function(){return this.state.checked},toggle:function(e){if(this.$element.prop("disabled"))return;if(!e||e.target===e.originalEvent.target)this.state.checked=!this.state.checked,this._toggleCheckedState(),Boolean(e)&&(e.preventDefault(),this.$element.trigger("change",e))},toggleContainer:function(){Boolean(this.$toggleContainer)&&(this.state.checked?(this.$toggleContainer.removeClass("hide hidden"),this.$toggleContainer.attr("aria-hidden","false")):(this.$toggleContainer.addClass("hidden"),this.$toggleContainer.attr("aria-hidden","true")))},itemchecked:function(t){this.setState(e(t.target))},destroy:function(){return this.$parent.remove(),this.$parent[0].outerHTML},_resetClasses:function(){var e=[];this.state.checked||e.push("checked"),this.state.disabled||e.push("disabled"),e=e.join(" "),this.$label.removeClass(e),this.$parent&&this.$parent.removeClass(e)},_toggleCheckedState:function(){this.state.checked?this.check():this.uncheck()},_toggleDisabledState:function(){this.state.disabled?this.disable():this.enable()},_setCheckedClass:function(){this.$label.addClass("checked"),this.$parent&&this.$parent.addClass("checked")},_setDisabledClass:function(){this.$label.addClass("disabled"),this.$parent&&this.$parent.addClass("disabled")}},e.fn.checkbox=function(t){var r=Array.prototype.slice.call(arguments,1),i,s=this.each(function(){var s=e(this),o=s.data("fu.checkbox"),u=typeof t=="object"&&t;o||s.data("fu.checkbox",o=new n(this,u)),typeof t=="string"&&(i=o[t].apply(o,r))});return i===undefined?s:i},e.fn.checkbox.defaults={},e.fn.checkbox.Constructor=n,e.fn.checkbox.noConflict=function(){return e.fn.checkbox=t,this},e(document).on("mouseover.fu.checkbox.data-api","[data-initialize=checkbox]",function(t){var n=e(t.target).closest(".checkbox").find("[type=checkbox]");n.data("fu.checkbox")||n.checkbox(n.data())}),e(function(){e("[data-initialize=checkbox] [type=checkbox]").each(function(){var t=e(this);t.data("fu.checkbox")||t.checkbox(t.data())})})})(e),function(e){var t=e.fn.combobox,n=function(t,n){this.$element=e(t),this.options=e.extend({},e.fn.combobox.defaults,n),this.$dropMenu=this.$element.find(".dropdown-menu"),this.$input=this.$element.find("input"),this.$button=this.$element.find(".btn"),this.$element.on("click.fu.combobox","a",e.proxy(this.itemclicked,this)),this.$element.on("change.fu.combobox","input",e.proxy(this.inputchanged,this)),this.$element.on("shown.bs.dropdown",e.proxy(this.menuShown,this)),this.setDefaultSelection()};n.prototype={constructor:n,destroy:function(){return this.$element.remove(),this.$element.find("input").each(function(){e(this).attr("value",e(this).val())}),this.$element[0].outerHTML},doSelect:function(e){typeof e[0]!="undefined"?(this.$selectedItem=e,this.$input.val(this.$selectedItem.text().trim())):this.$selectedItem=null},menuShown:function(){this.options.autoResizeMenu&&this.resizeMenu()},resizeMenu:function(){var e=this.$element.outerWidth();this.$dropMenu.outerWidth(e)},selectedItem:function(){var t=this.$selectedItem,n={};if(t){var r=this.$selectedItem.text().trim();n=e.extend({text:r},this.$selectedItem.data())}else n={text:this.$input.val()};return n},selectByText:function(t){var n=e([]);this.$element.find("li").each(function(){if((this.textContent||this.innerText||e(this).text()||"").toLowerCase()===(t||"").toLowerCase())return n=e(this),!1}),this.doSelect(n)},selectByValue:function(e){var t='li[data-value="'+e+'"]';this.selectBySelector(t)},selectByIndex:function(e){var t="li:eq("+e+")";this.selectBySelector(t)},selectBySelector:function(e){var t=this.$element.find(e);this.doSelect(t)},setDefaultSelection:function(){var e="li[data-selected=true]:first",t=this.$element.find(e);t.length>0&&(this.selectBySelector(e),t.removeData("selected"),t.removeAttr("data-selected"))},enable:function(){this.$element.removeClass("disabled"),this.$input.removeAttr("disabled"),this.$button.removeClass("disabled")},disable:function(){this.$element.addClass("disabled"),this.$input.attr("disabled",!0),this.$button.addClass("disabled")},itemclicked:function(t){this.$selectedItem=e(t.target).parent(),this.$input.val(this.$selectedItem.text().trim()).trigger("change",{synthetic:!0});var n=this.selectedItem();this.$element.trigger("changed.fu.combobox",n),t.preventDefault(),this.$element.find(".dropdown-toggle").focus()},inputchanged:function(t,n){if(n&&n.synthetic)return;var r=e(t.target).val();this.selectByText(r);var i=this.selectedItem();i.text.length===0&&(i={text:r}),this.$element.trigger("changed.fu.combobox",i)}},e.fn.combobox=function(t){var r=Array.prototype.slice.call(arguments,1),i,s=this.each(function(){var s=e(this),o=s.data("fu.combobox"),u=typeof t=="object"&&t;o||s.data("fu.combobox",o=new n(this,u)),typeof t=="string"&&(i=o[t].apply(o,r))});return i===undefined?s:i},e.fn.combobox.defaults={autoResizeMenu:!0},e.fn.combobox.Constructor=n,e.fn.combobox.noConflict=function(){return e.fn.combobox=t,this},e(document).on("mousedown.fu.combobox.data-api","[data-initialize=combobox]",function(t){var n=e(t.target).closest(".combobox");n.data("fu.combobox")||n.combobox(n.data())}),e(function(){e("[data-initialize=combobox]").each(function(){var t=e(this);t.data("fu.combobox")||t.combobox(t.data())})})}(e),function(e){var t="Invalid Date",n="moment.js is not available so you cannot use this function",r=[],i=!1,s=e.fn.datepicker,o=!1,u=function(){var e,t;o=!0;for(e=0,t=r.length;e<t;e++)r[e].init.call(r[e].scope);r=[]};typeof define=="function"&&define.amd?require(["moment"],function(e){i=e,u()},function(e){var t=e.requireModules&&e.requireModules[0];t==="moment"&&u()}):u();var a=function(t,n){this.$element=e(t),this.options=e.extend(!0,{},e.fn.datepicker.defaults,n),this.$calendar=this.$element.find(".datepicker-calendar"),this.$days=this.$calendar.find(".datepicker-calendar-days"),this.$header=this.$calendar.find(".datepicker-calendar-header"),this.$headerTitle=this.$header.find(".title"),this.$input=this.$element.find("input"),this.$wheels=this.$element.find(".datepicker-wheels"),this.$wheelsMonth=this.$element.find(".datepicker-wheels-month"),this.$wheelsYear=this.$element.find(".datepicker-wheels-year"),this.artificialScrolling=!1,this.formatDate=this.options.formatDate||this.formatDate,this.inputValue=null,this.moment=!1,this.momentFormat=null,this.parseDate=this.options.parseDate||this.parseDate,this.preventBlurHide=!1,this.restricted=this.options.restricted||[],this.restrictedParsed=[],this.restrictedText=this.options.restrictedText,this.sameYearOnly=this.options.sameYearOnly,this.selectedDate=null,this.yearRestriction=null,this.$calendar.find(".datepicker-today").on("click.fu.datepicker",e.proxy(this.todayClicked,this)),this.$days.on("click.fu.datepicker","tr td button",e.proxy(this.dateClicked,this)),this.$element.find(".dropdown-menu").on("mousedown.fu.datepicker",e.proxy(this.dropdownMousedown,this)),this.$header.find(".next").on("click.fu.datepicker",e.proxy(this.next,this)),this.$header.find(".prev").on("click.fu.datepicker",e.proxy(this.prev,this)),this.$headerTitle.on("click.fu.datepicker",e.proxy(this.titleClicked,this)),this.$input.on("blur.fu.datepicker",e.proxy(this.inputBlurred,this)),this.$input.on("focus.fu.datepicker",e.proxy(this.inputFocused,this)),this.$wheels.find(".datepicker-wheels-back").on("click.fu.datepicker",e.proxy(this.backClicked,this)),this.$wheels.find(".datepicker-wheels-select").on("click.fu.datepicker",e.proxy(this.selectClicked,this)),this.$wheelsMonth.on("click.fu.datepicker","ul button",e.proxy(this.monthClicked,this)),this.$wheelsYear.on("click.fu.datepicker","ul button",e.proxy(this.yearClicked,this)),this.$wheelsYear.find("ul").on("scroll.fu.datepicker",e.proxy(this.onYearScroll,this));var s=function(){this.checkForMomentJS()&&(i=i||window.moment,this.moment=!0,this.momentFormat=this.options.momentConfig.format,this.setCulture(this.options.momentConfig.culture),i.locale=i.locale||i.lang),this.setRestrictedDates(this.restricted),this.setDate(this.options.date)||(this.$input.val(""),this.inputValue=this.$input.val()),this.sameYearOnly&&(this.yearRestriction=this.selectedDate?this.selectedDate.getFullYear():(new Date).getFullYear())};o?s.call(this):r.push({init:s,scope:this})};a.prototype={constructor:a,backClicked:function(){this.changeView("calendar")},changeView:function(e,t){e==="wheels"?(this.$calendar.hide().attr("aria-hidden","true"),this.$wheels.show().removeAttr("aria-hidden",""),t&&this.renderWheel(t)):(this.$wheels.hide().attr("aria-hidden","true"),this.$calendar.show().removeAttr("aria-hidden",""),t&&this.renderMonth(t))},checkForMomentJS:function(){return(e.isFunction(window.moment)||typeof i!="undefined"&&e.isFunction(i))&&e.isPlainObject(this.options.momentConfig)&&this.options.momentConfig.culture&&this.options.momentConfig.format?!0:!1},dateClicked:function(t){var n=e(t.currentTarget).parents("td:first"),r;if(n.hasClass("restricted"))return;this.$days.find("td.selected").removeClass("selected"),n.addClass("selected"),r=new Date(n.attr("data-year"),n.attr("data-month"),n.attr("data-date")),this.selectedDate=r,this.$input.val(this.formatDate(r)),this.inputValue=this.$input.val(),this.$input.focus(),this.$element.trigger("dateClicked.fu.datepicker",r)},destroy:function(){return this.$element.remove(),this.$days.find("tbody").empty(),this.$wheelsYear.find("ul").empty(),this.$element[0].outerHTML},disable:function(){this.$element.addClass("disabled"),this.$element.find("input, button").attr("disabled","disabled"),this.$element.find(".input-group-btn").removeClass("open")},dropdownMousedown:function(){var e=this;this.preventBlurHide=!0,setTimeout(function(){e.preventBlurHide=!1},0)},enable:function(){this.$element.removeClass("disabled"),this.$element.find("input, button").removeAttr("disabled")},formatDate:function(e){var t=function(e){var t="0"+e;return t.substr(t.length-2)};return this.moment?i(e).format(this.momentFormat):t(e.getMonth()+1)+"/"+t(e.getDate())+"/"+e.getFullYear()},getCulture:function(){if(this.moment)return i.locale();throw n},getDate:function(){return this.selectedDate?this.selectedDate:new Date(NaN)},getFormat:function(){if(this.moment)return this.momentFormat;throw n},getFormattedDate:function(){return this.selectedDate?this.formatDate(this.selectedDate):t},getRestrictedDates:function(){return this.restricted},inputBlurred:function(e){var t=this.$input.val(),n;t!==this.inputValue&&(n=this.setDate(t),n===null?this.$element.trigger("inputParsingFailed.fu.datepicker",t):n===!1?this.$element.trigger("inputRestrictedDate.fu.datepicker",n):this.$element.trigger("changed.fu.datepicker",n)),this.preventBlurHide||this.$element.find(".input-group-btn").removeClass("open")},inputFocused:function(e){this.$element.find(".input-group-btn").addClass("open")},isInvalidDate:function(e){var n=e.toString();return n===t||n==="NaN"?!0:!1},isRestricted:function(e,t,n){var r=this.restrictedParsed,i,s,o,u;if(this.sameYearOnly&&this.yearRestriction!==null&&n!==this.yearRestriction)return!0;for(i=0,o=r.length;i<o;i++){s=r[i].from,u=r[i].to;if((n>s.year||n===s.year&&t>s.month||n===s.year&&t===s.month&&e>=s.date)&&(n<u.year||n===u.year&&t<u.month||n===u.year&&t===u.month&&e<=u.date))return!0}return!1},monthClicked:function(t){this.$wheelsMonth.find(".selected").removeClass("selected"),e(t.currentTarget).parent().addClass("selected")},next:function(){var e=this.$headerTitle.attr("data-month"),t=this.$headerTitle.attr("data-year");e++;if(e>11){if(this.sameYearOnly)return;e=0,t++}this.renderMonth(new Date(t,e,1))},onYearScroll:function(t){if(this.artificialScrolling)return;var n=e(t.currentTarget),r=n.css("box-sizing")==="border-box"?n.outerHeight():n.height(),i=n.get(0).scrollHeight,s=n.scrollTop(),o=r/(i-s)*100,u=s/i*100,a,f;if(u<5){f=parseInt(n.find("li:first").attr("data-year"),10);for(a=f-1;a>f-11;a--)n.prepend('<li data-year="'+a+'"><button type="button">'+a+"</button></li>");this.artificialScrolling=!0,n.scrollTop(n.get(0).scrollHeight-i+s),this.artificialScrolling=!1}else if(o>90){f=parseInt(n.find("li:last").attr("data-year"),10);for(a=f+1;a<f+11;a++)n.append('<li data-year="'+a+'"><button type="button">'+a+"</button></li>")}},parseDate:function(e){var t=this,n=new Date(NaN),r,s,o,u,a,f,l,c;if(e){if(this.moment)return u=function(e){var r=i(e,t.momentFormat);return!0===r.isValid()?r.toDate():n},o=function(e){var t=i(new Date(e));return!0===t.isValid()?t.toDate():n},a=function(e,r,i){var s=r(e);return t.isInvalidDate(s)?(s=i(s),t.isInvalidDate(s)?n:s):s},"string"==typeof e?a(e,u,o):a(e,o,u);if(typeof e=="string"){r=new Date(Date.parse(e));if(!this.isInvalidDate(r))return r;e=e.split("T")[0],s=/^\s*(\d{4})-(\d\d)-(\d\d)\s*$/,l=s.exec(e);if(l){f=parseInt(l[2],10),r=new Date(l[1],f-1,l[3]);if(f===r.getMonth()+1)return r}}else{r=new Date(e);if(!this.isInvalidDate(r))return r}}return new Date(NaN)},prev:function(){var e=this.$headerTitle.attr("data-month"),t=this.$headerTitle.attr("data-year");e--;if(e<0){if(this.sameYearOnly)return;e=11,t--}this.renderMonth(new Date(t,e,1))},renderMonth:function(t){t=t||new Date;var n=(new Date(t.getFullYear(),t.getMonth(),1)).getDay(),r=(new Date(t.getFullYear(),t.getMonth()+1,0)).getDate(),i=(new Date(t.getFullYear(),t.getMonth(),0)).getDate(),s=this.$headerTitle.find(".month"),o=t.getMonth(),u=new Date,a=u.getDate(),f=u.getMonth(),l=u.getFullYear(),c=this.selectedDate,h=this.$days.find("tbody"),p=t.getFullYear(),d,v,m,g,y,b,w,E,S,x,T;c&&(c={date:c.getDate(),month:c.getMonth(),year:c.getFullYear()}),s.find(".current").removeClass("current"),s.find('span[data-month="'+o+'"]').addClass("current"),this.$headerTitle.find(".year").text(p),this.$headerTitle.attr({"data-month":o,"data-year":p}),h.empty(),n!==0?(d=i-n+1,w=-1):(d=1,w=0),b=r<=35-n?5:6;for(g=0;g<b;g++){T=e("<tr></tr>");for(y=0;y<7;y++){x=e("<td></td>"),w===-1?(x.addClass("last-month"),E!==w&&x.addClass("first")):w===1&&(x.addClass("next-month"),E!==w&&x.addClass("first")),v=o+w,m=p,v<0?(v=11,m--):v>11&&(v=0,m++),x.attr({"data-date":d,"data-month":v,"data-year":m});if(m===l&&v===f&&d===a)x.addClass("current-day");else if(m<l||m===l&&v<f||m===l&&v===f&&d<a)x.addClass("past"),this.options.allowPastDates||x.addClass("restricted").attr("title",this.restrictedText);this.isRestricted(d,v,m)&&x.addClass("restricted").attr("title",this.restrictedText),c&&m===c.year&&v===c.month&&d===c.date&&x.addClass("selected"),x.hasClass("restricted")?x.html('<span><b class="datepicker-date">'+d+"</b></span>"):x.html('<span><button type="button" class="datepicker-date">'+d+"</button></span>"),d++,S=E,E=w,w===-1&&d>i?(d=1,w=0,S!==w&&x.addClass("last")):w===0&&d>r&&(d=1,w=1,S!==w&&x.addClass("last")),g===b-1&&y===6&&x.addClass("last"),T.append(x)}h.append(T)}},renderWheel:function(e){var t=e.getMonth(),n=this.$wheelsMonth.find("ul"),r=e.getFullYear(),i=this.$wheelsYear.find("ul"),s,o,u;this.sameYearOnly?(this.$wheelsMonth.addClass("full"),this.$wheelsYear.addClass("hidden")):(this.$wheelsMonth.removeClass("full"),this.$wheelsYear.removeClass("hide hidden")),n.find(".selected").removeClass("selected"),o=n.find('li[data-month="'+t+'"]'),o.addClass("selected"),n.scrollTop(n.scrollTop()+(o.position().top-n.outerHeight()/2-o.outerHeight(!0)/2)),i.empty();for(s=r-10;s<r+11;s++)i.append('<li data-year="'+s+'"><button type="button">'+s+"</button></li>");u=i.find('li[data-year="'+r+'"]'),u.addClass("selected"),this.artificialScrolling=!0,i.scrollTop(i.scrollTop()+(u.position().top-i.outerHeight()/2-u.outerHeight(!0)/2)),this.artificialScrolling=!1,o.find("button").focus()},selectClicked:function(){var e=this.$wheelsMonth.find(".selected").attr("data-month"),t=this.$wheelsYear.find(".selected").attr("data-year");this.changeView("calendar",new Date(t,e,1))},setCulture:function(e){if(!e)return!1;if(!this.moment)throw n;i.locale(e)},setDate:function(e){var t=this.parseDate(e);return this.isInvalidDate(t)?(this.selectedDate=null,this.renderMonth()):this.isRestricted(t.getDate(),t.getMonth(),t.getFullYear())?(this.selectedDate=!1,this.renderMonth()):(this.selectedDate=t,this.renderMonth(t),this.$input.val(this.formatDate(t))),this.inputValue=this.$input.val(),this.selectedDate},setFormat:function(e){if(!e)return!1;if(!this.moment)throw n;this.momentFormat=e},setRestrictedDates:function(e){var t=[],n=this,r,i,s=function(e){return e===-Infinity?{date:-Infinity,month:-Infinity,year:-Infinity}:e===Infinity?{date:Infinity,month:Infinity,year:Infinity}:(e=n.parseDate(e),{date:e.getDate(),month:e.getMonth(),year:e.getFullYear()})};this.restricted=e;for(r=0,i=e.length;r<i;r++)t.push({from:s(e[r].from),to:s(e[r].to)});this.restrictedParsed=t},titleClicked:function(e){this.changeView("wheels",new Date(this.$headerTitle.attr("data-year"),this.$headerTitle.attr("data-month"),1))},todayClicked:function(e){var t=new Date;(t.getMonth()+""!==this.$headerTitle.attr("data-month")||t.getFullYear()+""!==this.$headerTitle.attr("data-year"))&&this.renderMonth(t)},yearClicked:function(t){this.$wheelsYear.find(".selected").removeClass("selected"),e(t.currentTarget).parent().addClass("selected")}},e.fn.datepicker=function(t){var n=Array.prototype.slice.call(arguments,1),r,i=this.each(function(){var i=e(this),s=i.data("fu.datepicker"),o=typeof t=="object"&&t;s||i.data("fu.datepicker",s=new a(this,o)),typeof t=="string"&&(r=s[t].apply(s,n))});return r===undefined?i:r},e.fn.datepicker.defaults={allowPastDates:!1,date:new Date,formatDate:null,momentConfig:{culture:"en",format:"L"},parseDate:null,restricted:[],restrictedText:"Restricted",sameYearOnly:!1},e.fn.datepicker.Constructor=a,e.fn.datepicker.noConflict=function(){return e.fn.datepicker=s,this},e(document).on("mousedown.fu.datepicker.data-api","[data-initialize=datepicker]",function(t){var n=e(t.target).closest(".datepicker");n.data("datepicker")||n.datepicker(n.data())}),e(document).on("click.fu.datepicker.data-api",".datepicker .dropdown-menu",function(t){var n=e(t.target);(!n.is(".datepicker-date")||n.closest(".restricted").length)&&t.stopPropagation()}),e(document).on("click.fu.datepicker.data-api",".datepicker input",function(e){e.stopPropagation()}),e(function(){e("[data-initialize=datepicker]").each(function(){var t=e(this);if(t.data("datepicker"))return;t.datepicker(t.data())})})}(e),function(e){function t(t){e(t).css({visibility:"hidden"}),n(t)?t.parent().addClass("dropup"):t.parent().removeClass("dropup"),e(t).css({visibility:"visible"})}function n(e){var t=r(e),n={};n.parentHeight=e.parent().outerHeight(),n.parentOffsetTop=e.parent().offset().top,n.dropdownHeight=e.outerHeight(),n.containerHeight=t.overflowElement.outerHeight(),n.containerOffsetTop=t.isWindow?t.overflowElement.scrollTop():t.overflowElement.offset().top,n.fromTop=n.parentOffsetTop-n.containerOffsetTop,n.fromBottom=n.containerHeight-n.parentHeight-(n.parentOffsetTop-n.containerOffsetTop);if(n.dropdownHeight<n.fromBottom)return!1;if(n.dropdownHeight<n.fromTop)return!0;if(n.dropdownHeight>=n.fromTop&&n.dropdownHeight>=n.fromBottom)return n.fromTop>=n.fromBottom?!0:!1}function r(t){var n,r;return t.attr("data-target")?(n=t.attr("data-target"),r=!1):(n=window,r=!0),e.each(t.parents(),function(t,i){if(e(i).css("overflow")!=="visible")return n=i,r=!1,!1}),{overflowElement:e(n),isWindow:r}}e(document.body).on("click.fu.dropdown-autoflip","[data-toggle=dropdown][data-flip]",function(n){e(this).data().flip==="auto"&&t(e(this).next(".dropdown-menu"))}),e(document.body).on("suggested.fu.pillbox",function(n,r){t(e(r)),e(r).parent().addClass("open")}),e.fn.dropdownautoflip=function(){}}(e),function(e){var t=e.fn.loader,n=function(t,n){this.$element=e(t),this.options=e.extend({},e.fn.loader.defaults,n),this.begin=this.$element.is("[data-begin]")?parseInt(this.$element.attr("data-begin"),10):1,this.delay=this.$element.is("[data-delay]")?parseFloat(this.$element.attr("data-delay")):150,this.end=this.$element.is("[data-end]")?parseInt(this.$element.attr("data-end"),10):8,this.frame=this.$element.is("[data-frame]")?parseInt(this.$element.attr("data-frame"),10):this.begin,this.isIElt9=!1,this.timeout={};var r=this.msieVersion();r!==!1&&r<9&&(this.$element.addClass("iefix"),this.isIElt9=!0),this.$element.attr("data-frame",this.frame+""),this.play()};n.prototype={constructor:n,destroy:function(){return this.pause(),this.$element.remove(),this.$element[0].outerHTML},ieRepaint:function(){this.isIElt9&&this.$element.addClass("iefix_repaint").removeClass("iefix_repaint")},msieVersion:function(){var e=window.navigator.userAgent,t=e.indexOf("MSIE ");return t>0?parseInt(e.substring(t+5,e.indexOf(".",t)),10):!1},next:function(){this.frame++,this.frame>this.end&&(this.frame=this.begin),this.$element.attr("data-frame",this.frame+""),this.ieRepaint()},pause:function(){clearTimeout(this.timeout)},play:function(){var e=this;clearTimeout(this.timeout),this.timeout=setTimeout(function(){e.next(),e.play()},this.delay)},previous:function(){this.frame--,this.frame<this.begin&&(this.frame=this.end),this.$element.attr("data-frame",this.frame+""),this.ieRepaint()},reset:function(){this.frame=this.begin,this.$element.attr("data-frame",this.frame+""),this.ieRepaint()}},e.fn.loader=function(t){var r=Array.prototype.slice.call(arguments,1),i,s=this.each(function(){var s=e(this),o=s.data("fu.loader"),u=typeof t=="object"&&t;o||s.data("fu.loader",o=new n(this,u)),typeof t=="string"&&(i=o[t].apply(o,r))});return i===undefined?s:i},e.fn.loader.defaults={},e.fn.loader.Constructor=n,e.fn.loader.noConflict=function(){return e.fn.loader=t,this},e(function(){e("[data-initialize=loader]").each(function(){var t=e(this);t.data("fu.loader")||t.loader(t.data())})})}(e),function(e){var t=e.fn.placard,n=function(t,n){var r=this;this.$element=e(t),this.options=e.extend({},e.fn.placard.defaults,n),this.$accept=this.$element.find(".placard-accept"),this.$cancel=this.$element.find(".placard-cancel"),this.$field=this.$element.find(".placard-field"),this.$footer=this.$element.find(".placard-footer"),this.$header=this.$element.find(".placard-header"),this.$popup=this.$element.find(".placard-popup"),this.actualValue=null,this.clickStamp="_",this.previousValue="",this.options.revertOnCancel===-1&&(this.options.revertOnCancel=this.$accept.length>0?!0:!1),this.isInput=this.$field.is("input"),this.$field.on("focus.fu.placard",e.proxy(this.show,this)),this.$field.on("keydown.fu.placard",e.proxy(this.keyComplete,this)),this.$accept.on("click.fu.placard",e.proxy(this.complete,this,"accept")),this.$cancel.on("click.fu.placard",function(e){e.preventDefault(),r.complete("cancel")}),this.ellipsis()};n.prototype={constructor:n,complete:function(e){var t=this.options["on"+e[0].toUpperCase()+e.substring(1)],n={previousValue:this.previousValue,value:this.$field.val()};t?(t(n),this.$element.trigger(e,n)):(e==="cancel"&&this.options.revertOnCancel&&this.$field.val(this.previousValue),this.$element.trigger(e,n),this.hide())},keyComplete:function(e){this.isInput&&e.keyCode===13?(this.complete("accept"),this.$field.blur()):e.keyCode===27&&(this.complete("cancel"),this.$field.blur())},destroy:function(){return this.$element.remove(),e(document).off("click.fu.placard.externalClick."+this.clickStamp),this.$element.find("input").each(function(){e(this).attr("value",e(this).val())}),this.$element[0].outerHTML},disable:function(){this.$element.addClass("disabled"),this.$field.attr("disabled","disabled"),this.hide()},ellipsis:function(){var e,t,n;if(this.$element.attr("data-ellipsis")==="true"){e=this.$field.get(0);if(this.$field.is("input"))e.scrollLeft=0;else{e.scrollTop=0;if(e.clientHeight<e.scrollHeight){this.actualValue=this.$field.val(),this.$field.val(""),n="",t=0;while(e.clientHeight>=e.scrollHeight)n+=this.actualValue[t],this.$field.val(n+"..."),t++;n=n.length>0?n.substring(0,n.length-1):"",this.$field.val(n+"...")}}}},enable:function(){this.$element.removeClass("disabled"),this.$field.removeAttr("disabled")},externalClickListener:function(e,t){(t===!0||this.isExternalClick(e))&&this.complete(this.options.externalClickAction)},getValue:function(){return this.actualValue!==null?this.actualValue:this.$field.val()},hide:function(){if(!this.$element.hasClass("showing"))return;this.$element.removeClass("showing"),this.ellipsis(),e(document).off("click.fu.placard.externalClick."+this.clickStamp),this.$element.trigger("hidden.fu.placard")},isExternalClick:function(t){var n=this.$element.get(0),r=this.options.externalClickExceptions||[],i=e(t.target),s,o;if(t.target===n||i.parents(".placard:first").get(0)===n)return!1;for(s=0,o=r.length;s<o;s++)if(i.is(r[s])||i.parents(r[s]).length>0)return!1;return!0},setValue:function(e){this.$field.val(e),this.$element.hasClass("showing")||this.ellipsis()},show:function(){var t;if(this.$element.hasClass("showing"))return;t=e(document).find(".placard.showing");if(t.length>0){if(t.data("fu.placard")&&t.data("fu.placard").options.explicit)return;t.placard("externalClickListener",{},!0)}this.previousValue=this.$field.val(),this.$element.addClass("showing"),this.actualValue!==null&&(this.$field.val(this.actualValue),this.actualValue=null),this.$header.length>0&&this.$popup.css("top","-"+this.$header.outerHeight(!0)+"px"),this.$footer.length>0&&this.$popup.css("bottom","-"+this.$footer.outerHeight(!0)+"px"),this.$element.trigger("shown.fu.placard"),this.clickStamp=(new Date).getTime()+(Math.floor(Math.random()*100)+1),this.options.explicit||e(document).on("click.fu.placard.externalClick."+this.clickStamp,e.proxy(this.externalClickListener,this))}},e.fn.placard=function(t){var r=Array.prototype.slice.call(arguments,1),i,s=this.each(function(){var s=e(this),o=s.data("fu.placard"),u=typeof t=="object"&&t;o||s.data("fu.placard",o=new n(this,u)),typeof t=="string"&&(i=o[t].apply(o,r))});return i===undefined?s:i},e.fn.placard.defaults={onAccept:undefined,onCancel:undefined,externalClickAction:"cancel",externalClickExceptions:[],explicit:!1,revertOnCancel:-1},e.fn.placard.Constructor=n,e.fn.placard.noConflict=function(){return e.fn.placard=t,this},e(document).on("focus.fu.placard.data-api","[data-initialize=placard]",function(t){var n=e(t.target).closest(".placard");n.data("fu.placard")||n.placard(n.data())}),e(function(){e("[data-initialize=placard]").each(function(){var t=e(this);if(t.data("fu.placard"))return;t.placard(t.data())})})}(e),function(e){var t=e.fn.radio,n=function(t,n){this.options=e.extend({},e.fn.radio.defaults,n);if(t.tagName.toLowerCase()!=="label")return;this.$label=e(t),this.$radio=this.$label.find('input[type="radio"]'),this.groupName=this.$radio.attr("name");var r=this.$radio.attr("data-toggle");this.$toggleContainer=e(r),this.$radio.on("change",e.proxy(this.itemchecked,this)),this.setInitialState()};n.prototype={constructor:n,setInitialState:function(){var e=this.$radio,t=this.$label,n=e.prop("checked"),r=e.prop("disabled");this.setCheckedState(e,n),this.setDisabledState(e,r)},resetGroup:function(){var t=e('input[name="'+this.groupName+'"]');t.each(function(t,n){var r=e(n),i=r.parent(),s=r.attr("data-toggle"),o=e(s);i.removeClass("checked"),o.addClass("hidden")})},setCheckedState:function(t,n){var r=t,i=r.parent(),s=r.attr("data-toggle"),o=e(s);n?(this.resetGroup(),r.prop("checked",!0),i.addClass("checked"),o.removeClass("hide hidden"),i.trigger("checked.fu.radio")):(r.prop("checked",!1),i.removeClass("checked"),o.addClass("hidden"),i.trigger("unchecked.fu.radio")),i.trigger("changed.fu.radio",n)},setDisabledState:function(e,t){var n=e,r=this.$label;t?(this.$radio.prop("disabled",!0),r.addClass("disabled"),r.trigger("disabled.fu.radio")):(this.$radio.prop("disabled",!1),r.removeClass("disabled"),r.trigger("enabled.fu.radio"))},itemchecked:function(t){var n=e(t.target);this.setCheckedState(n,!0)},check:function(){this.setCheckedState(this.$radio,!0)},uncheck:function(){this.setCheckedState(this.$radio,!1)},isChecked:function(){var e=this.$radio.prop("checked");return e},enable:function(){this.setDisabledState(this.$radio,!1)},disable:function(){this.setDisabledState(this.$radio,!0)},destroy:function(){return this.$label.remove(),this.$label[0].outerHTML}},e.fn.radio=function(t){var r=Array.prototype.slice.call(arguments,1),i,s=this.each(function(){var s=e(this),o=s.data("fu.radio"),u=typeof t=="object"&&t;o||s.data("fu.radio",o=new n(this,u)),typeof t=="string"&&(i=o[t].apply(o,r))});return i===undefined?s:i},e.fn.radio.defaults={},e.fn.radio.Constructor=n,e.fn.radio.noConflict=function(){return e.fn.radio=t,this},e(document).on("mouseover.fu.radio.data-api","[data-initialize=radio]",function(t){var n=e(t.target);n.data("fu.radio")||n.radio(n.data())}),e(function(){e("[data-initialize=radio]").each(function(){var t=e(this);t.data("fu.radio")||t.radio(t.data())})})}(e),function(e){var t=e.fn.search,n=function(t,n){this.$element=e(t),this.options=e.extend({},e.fn.search.defaults,n),this.$button=this.$element.find("button"),this.$input=this.$element.find("input"),this.$icon=this.$element.find(".glyphicon"),this.$button.on("click.fu.search",e.proxy(this.buttonclicked,this)),this.$input.on("keydown.fu.search",e.proxy(this.keypress,this)),this.$input.on("keyup.fu.search",e.proxy(this.keypressed,this)),this.activeSearch=""};n.prototype={constructor:n,destroy:function(){return this.$element.remove(),this.$element.find("input").each(function(){e(this).attr("value",e(this).val())}),this.$element[0].outerHTML},search:function(e){this.$icon.hasClass("glyphicon")&&this.$icon.removeClass("glyphicon-search").addClass("glyphicon-remove"),this.activeSearch=e,this.$element.addClass("searched"),this.$element.trigger("searched.fu.search",e)},clear:function(){this.$icon.hasClass("glyphicon")&&this.$icon.removeClass("glyphicon-remove").addClass("glyphicon-search"),this.activeSearch="",this.$input.val(""),this.$element.removeClass("searched"),this.$element.trigger("cleared.fu.search")},action:function(){var e=this.$input.val(),t=e===""||e===this.activeSearch;this.activeSearch&&t?this.clear():e&&this.search(e)},buttonclicked:function(t){t.preventDefault();if(e(t.currentTarget).is(".disabled, :disabled"))return;this.action()},keypress:function(e){e.which===13&&e.preventDefault()},keypressed:function(e){var t="glyphicon-remove",n="glyphicon-search",r;e.which===13?(e.preventDefault(),this.action()):e.which===9?e.preventDefault():(r=this.$input.val(),r!==this.activeSearch||!r?(this.$icon.removeClass(t).addClass(n),r?this.$element.removeClass("searched"):this.options.clearOnEmpty&&this.clear()):this.$icon.removeClass(n).addClass(t))},disable:function(){this.$element.addClass("disabled"),this.$input.attr("disabled","disabled"),this.$button.addClass("disabled")},enable:function(){this.$element.removeClass("disabled"),this.$input.removeAttr("disabled"),this.$button.removeClass("disabled")}},e.fn.search=function(t){var r=Array.prototype.slice.call(arguments,1),i,s=this.each(function(){var s=e(this),o=s.data("fu.search"),u=typeof t=="object"&&t;o||s.data("fu.search",o=new n(this,u)),typeof t=="string"&&(i=o[t].apply(o,r))});return i===undefined?s:i},e.fn.search.defaults={clearOnEmpty:!1},e.fn.search.Constructor=n,e.fn.search.noConflict=function(){return e.fn.search=t,this},e(document).on("mousedown.fu.search.data-api","[data-initialize=search]",function(t){var n=e(t.target).closest(".search");n.data("fu.search")||n.search(n.data())}),e(function(){e("[data-initialize=search]").each(function(){var t=e(this);if(t.data("fu.search"))return;t.search(t.data())})})}(e),function(e){var t=e.fn.selectlist,n=function(t,n){this.$element=e(t),this.options=e.extend({},e.fn.selectlist.defaults,n),this.$button=this.$element.find(".btn.dropdown-toggle"),this.$hiddenField=this.$element.find(".hidden-field"),this.$label=this.$element.find(".selected-label"),this.$dropdownMenu=this.$element.find(".dropdown-menu"),this.$element.on("click.fu.selectlist",".dropdown-menu a",e.proxy(this.itemClicked,this)),this.setDefaultSelection(),(n.resize==="auto"||this.$element.attr("data-resize")==="auto")&&this.resize()};n.prototype={constructor:n,destroy:function(){return this.$element.remove(),this.$element[0].outerHTML},doSelect:function(t){var n;this.$selectedItem=n=t,this.$hiddenField.val(this.$selectedItem.attr("data-value")),this.$label.html(e(this.$selectedItem.children()[0]).html()),this.$element.find("li").each(function(){n.is(e(this))?e(this).attr("data-selected",!0):e(this).removeData("selected").removeAttr("data-selected")})},itemClicked:function(t){this.$element.trigger("clicked.fu.selectlist",this.$selectedItem),t.preventDefault(),e(t.target).parent().is(this.$selectedItem)||this.itemChanged(t),this.$element.find(".dropdown-toggle").focus()},itemChanged:function(t){this.doSelect(e(t.target).closest("li"));var n=this.selectedItem();this.$element.trigger("changed.fu.selectlist",n)},resize:function(){var t=0,n=0,r=e("<div/>").addClass("selectlist-sizer");Boolean(e(document).find("html").hasClass("fuelux"))?e(document.body).append(r):e(".fuelux:first").append(r),r.append(this.$element.clone()),this.$element.find("a").each(function(){r.find(".selected-label").text(e(this).text()),n=r.find(".selectlist").outerWidth(),n+=r.find(".sr-only").outerWidth(),n>t&&(t=n)});if(t<=1)return;this.$button.css("width",t),this.$dropdownMenu.css("width",t),r.remove()},selectedItem:function(){var t=this.$selectedItem.text();return e.extend({text:t},this.$selectedItem.data())},selectByText:function(t){var n=e([]);this.$element.find("li").each(function(){if((this.textContent||this.innerText||e(this).text()||"").toLowerCase()===(t||"").toLowerCase())return n=e(this),!1}),this.doSelect(n)},selectByValue:function(e){var t='li[data-value="'+e+'"]';this.selectBySelector(t)},selectByIndex:function(e){var t="li:eq("+e+")";this.selectBySelector(t)},selectBySelector:function(e){var t=this.$element.find(e);this.doSelect(t)},setDefaultSelection:function(){var e=this.$element.find("li[data-selected=true]").eq(0);e.length===0&&(e=this.$element.find("li").has("a").eq(0)),this.doSelect(e)},enable:function(){this.$element.removeClass("disabled"),this.$button.removeClass("disabled")},disable:function(){this.$element.addClass("disabled"),this.$button.addClass("disabled")}},e.fn.selectlist=function(t){var r=Array.prototype.slice.call(arguments,1),i,s=this.each(function(){var s=e(this),o=s.data("fu.selectlist"),u=typeof t=="object"&&t;o||s.data("fu.selectlist",o=new n(this,u)),typeof t=="string"&&(i=o[t].apply(o,r))});return i===undefined?s:i},e.fn.selectlist.defaults={},e.fn.selectlist.Constructor=n,e.fn.selectlist.noConflict=function(){return e.fn.selectlist=t,this},e(document).on("mousedown.fu.selectlist.data-api","[data-initialize=selectlist]",function(t){var n=e(t.target).closest(".selectlist");n.data("fu.selectlist")||n.selectlist(n.data())}),e(function(){e("[data-initialize=selectlist]").each(function(){var t=e(this);t.data("fu.selectlist")||t.selectlist(t.data())})})}(e),function(e){var t=e.fn.spinbox,n=function(t,n){this.$element=e(t),this.$element.find(".btn").on("click",function(e){e.preventDefault()}),this.options=e.extend({},e.fn.spinbox.defaults,n),this.$input=this.$element.find(".spinbox-input"),this.$element.on("focusin.fu.spinbox",this.$input,e.proxy(this.changeFlag,this)),this.$element.on("focusout.fu.spinbox",this.$input,e.proxy(this.change,this)),this.$element.on("keydown.fu.spinbox",this.$input,e.proxy(this.keydown,this)),this.$element.on("keyup.fu.spinbox",this.$input,e.proxy(this.keyup,this)),this.bindMousewheelListeners(),this.mousewheelTimeout={},this.options.hold?(this.$element.on("mousedown.fu.spinbox",".spinbox-up",e.proxy(function(){this.startSpin(!0)},this)),this.$element.on("mouseup.fu.spinbox",".spinbox-up, .spinbox-down",e.proxy(this.stopSpin,this)),this.$element.on("mouseout.fu.spinbox",".spinbox-up, .spinbox-down",e.proxy(this.stopSpin,this)),this.$element.on("mousedown.fu.spinbox",".spinbox-down",e.proxy(function(){this.startSpin(!1)},this))):(this.$element.on("click.fu.spinbox",".spinbox-up",e.proxy(function(){this.step(!0)},this)),this.$element.on("click.fu.spinbox",".spinbox-down",e.proxy(function(){this.step(!1)},this))),this.switches={count:1,enabled:!0},this.options.speed==="medium"?this.switches.speed=300:this.options.speed==="fast"?this.switches.speed=100:this.switches.speed=500,this.lastValue=this.options.value,this.render(),this.options.disabled&&this.disable()};n.prototype={constructor:n,destroy:function(){return this.$element.remove(),this.$element.find("input").each(function(){e(this).attr("value",e(this).val())}),this.$element[0].outerHTML},render:function(){var t=this.parseInput(this.$input.val()),n="";t!==""&&this.options.value===0?this.value(t):this.output(this.options.value),this.options.units.length&&e.each(this.options.units,function(e,t){t.length>n.length&&(n=t)})},output:function(e,t){return e=(e+"").split(".").join(this.options.decimalMark),t=t||!0,t&&this.$input.val(e),e},parseInput:function(e){return e=(e+"").split(this.options.decimalMark).join("."),e},change:function(){var e=this.parseInput(this.$input.val())||"";this.options.units.length||this.options.decimalMark!=="."?e=this.parseValueWithUnit(e):e/1?e=this.options.value=this.checkMaxMin(e/1):(e=this.checkMaxMin(e.replace(/[^0-9.-]/g,"")||""),this.options.value=e/1),this.output(e),this.changeFlag=!1,this.triggerChangedEvent()},changeFlag:function(){this.changeFlag=!0},stopSpin:function(){this.switches.timeout!==undefined&&(clearTimeout(this.switches.timeout),this.switches.count=1,this.triggerChangedEvent())},triggerChangedEvent:function(){var e=this.value();if(e===this.lastValue)return;this.lastValue=e,this.$element.trigger("changed.fu.spinbox",this.output(e,!1))},startSpin:function(t){if(!this.options.disabled){var n=this.switches.count;n===1?(this.step(t),n=1):n<3?n=1.5:n<8?n=2.5:n=4,this.switches.timeout=setTimeout(e.proxy(function(){this.iterate(t)},this),this.switches.speed/n),this.switches.count++}},iterate:function(e){this.step(e),this.startSpin(e)},step:function(e){var t,n,r,i;this.changeFlag&&this.change(),r=this.options.value,i=e?this.options.max:this.options.min;if(e?r<i:r>i){var s=r+(e?1:-1)*this.options.step;this.options.step%1!==0&&(t=(this.options.step+"").split(".")[1].length,n=Math.pow(10,t),s=Math.round(s*n)/n),(e?s>i:s<i)?this.value(i):this.value(s)}else if(this.options.cycle){var o=e?this.options.min:this.options.max;this.value(o)}},value:function(e){if(!e&&e!==0)return this.changeFlag&&this.change(),this.unit?this.options.value+this.unit:this.output(this.options.value,!1);if(this.options.units.length||this.options.decimalMark!==".")return this.output(this.parseValueWithUnit(e+(this.unit||""))),this;if(!isNaN(parseFloat(e))&&isFinite(e))return this.options.value=e/1,this.output(e+(this.unit?this.unit:"")),this},isUnitLegal:function(t){var n;return e.each(this.options.units,function(e,r){if(r.toLowerCase()===t.toLowerCase())return n=t.toLowerCase(),!1}),n},parseValueWithUnit:function(e){var t=e.replace(/[^a-zA-Z]/g,""),n=e.replace(/[^0-9.-]/g,"");return t&&(t=this.isUnitLegal(t)),this.options.value=this.checkMaxMin(n/1),this.unit=t||undefined,this.options.value+(t||"")},checkMaxMin:function(e){return isNaN(parseFloat(e))?e:(e<=this.options.max&&e>=this.options.min||(e=e>=this.options.max?this.options.max:this.options.min),e)},disable:function(){this.options.disabled=!0,this.$element.addClass("disabled"),this.$input.attr("disabled",""),this.$element.find("button").addClass("disabled")},enable:function(){this.options.disabled=!1,this.$element.removeClass("disabled"),this.$input.removeAttr("disabled"),this.$element.find("button").removeClass("disabled")},keydown:function(e){var t=e.keyCode;t===38?this.step(!0):t===40&&this.step(!1)},keyup:function(e){var t=e.keyCode;(t===38||t===40)&&this.triggerChangedEvent()},bindMousewheelListeners:function(){var t=this.$input.get(0);t.addEventListener?(t.addEventListener("mousewheel",e.proxy(this.mousewheelHandler,this),!1),t.addEventListener("DOMMouseScroll",e.proxy(this.mousewheelHandler,this),!1)):t.attachEvent("onmousewheel",e.proxy(this.mousewheelHandler,this))},mousewheelHandler:function(e){if(!this.options.disabled){var t=window.event||e,n=Math.max(-1,Math.min(1,t.wheelDelta||-t.detail)),r=this;return clearTimeout(this.mousewheelTimeout),this.mousewheelTimeout=setTimeout(function(){r.triggerChangedEvent()},300),n<0?this.step(!0):this.step(!1),t.preventDefault?t.preventDefault():t.returnValue=!1,!1}}},e.fn.spinbox=function(t){var r=Array.prototype.slice.call(arguments,1),i,s=this.each(function(){var s=e(this),o=s.data("fu.spinbox"),u=typeof t=="object"&&t;o||s.data("fu.spinbox",o=new n(this,u)),typeof t=="string"&&(i=o[t].apply(o,r))});return i===undefined?s:i},e.fn.spinbox.defaults={value:0,min:0,max:999,step:1,hold:!0,speed:"medium",disabled:!1,cycle:!1,units:[],decimalMark:"."},e.fn.spinbox.Constructor=n,e.fn.spinbox.noConflict=function(){return e.fn.spinbox=t,this},e(document).on("mousedown.fu.spinbox.data-api","[data-initialize=spinbox]",function(t){var n=e(t.target).closest(".spinbox");n.data("fu.spinbox")||n.spinbox(n.data())}),e(function(){e("[data-initialize=spinbox]").each(function(){var t=e(this);t.data("fu.spinbox")||t.spinbox(t.data())})})}(e),function(e){function r(e,t){e.addClass("tree-selected"),e.data("type")==="item"&&t.hasClass("fueluxicon-bullet")&&t.removeClass("fueluxicon-bullet").addClass("glyphicon-ok")}function i(e,t){e.removeClass("tree-selected"),e.data("type")==="item"&&t.hasClass("glyphicon-ok")&&t.removeClass("glyphicon-ok").addClass("fueluxicon-bullet")}function s(t,n,s){e.each(s.$elements,function(t,r){var i=e(r);i[0]!==n.$element[0]&&s.dataForEvent.push(e(i).data())}),n.$element.hasClass("tree-selected")?(i(n.$element,n.$icon),s.eventType="deselected"):(r(n.$element,n.$icon),s.eventType="selected",s.dataForEvent.push(n.elementData))}function o(e,t,n){if(n.$elements[0]!==t.$element[0]){var s=e.deselectAll(e.$element);r(t.$element,t.$icon),n.eventType="selected",n.dataForEvent=[t.elementData]}else i(t.$element,t.$icon),n.eventType="deselected",n.dataForEvent=[]}var t=e.fn.tree,n=function(n,r){this.$element=e(n),this.options=e.extend({},e.fn.tree.defaults,r),this.options.itemSelect&&this.$element.on("click.fu.tree",".tree-item",e.proxy(function(e){this.selectItem(e.currentTarget)},this)),this.$element.on("click.fu.tree",".tree-branch-name",e.proxy(function(e){this.toggleFolder(e.currentTarget)},this)),this.options.folderSelect&&(this.$element.addClass("tree-folder-select"),this.$element.off("click.fu.tree",".tree-branch-name"),this.$element.on("click.fu.tree",".icon-caret",e.proxy(function(t){this.toggleFolder(e(t.currentTarget).parent())},this)),this.$element.on("click.fu.tree",".tree-branch-name",e.proxy(function(t){this.selectFolder(e(t.currentTarget))},this))),this.render()};n.prototype={constructor:n,deselectAll:function(n){n=n||this.$element;var r=e(n).find(".tree-selected");return r.each(function(t,n){i(e(n),e(n).find(".glyphicon"))}),r},destroy:function(){return this.$element.find("li:not([data-template])").remove(),this.$element.remove(),this.$element[0].outerHTML},render:function(){this.populate(this.$element)},populate:function(n){var r=this,i=n.hasClass("tree")?n:n.parent(),s=i.find(".tree-loader:eq(0)"),o=i.data();s.removeClass("hide hidden"),this.options.dataSource(o?o:{},function(t){s.addClass("hidden"),e.each(t.data,function(t,s){var o;s.type==="folder"?(o=r.$element.find("[data-template=treebranch]:eq(0)").clone().removeClass("hide hidden").removeData("template"),o.data(s),o.find(".tree-branch-name > .tree-label").html(s.text||s.name)):s.type==="item"&&(o=r.$element.find("[data-template=treeitem]:eq(0)").clone().removeClass("hide hidden").removeData("template"),o.find(".tree-item-name > .tree-label").html(s.text||s.name),o.data(s));var u=s.attr||s.dataAttributes||[];e.each(u,function(e,t){switch(e){case"cssClass":case"class":case"className":o.addClass(t);break;case"data-icon":o.find(".icon-item").removeClass().addClass("icon-item "+t),o.attr(e,t);break;case"id":o.attr(e,t),o.attr("aria-labelledby",t+"-label"),o.find(".tree-branch-name > .tree-label").attr("id",t+"-label");break;default:o.attr(e,t)}}),n.hasClass("tree-branch-header")?i.find(".tree-branch-children:eq(0)").append(o):n.append(o)}),r.$element.trigger("loaded.fu.tree",i)})},selectTreeNode:function(n,r){var i={};i.$element=e(n);var u={};u.$elements=this.$element.find(".tree-selected"),u.dataForEvent=[],r==="folder"?(i.$element=i.$element.closest(".tree-branch"),i.$icon=i.$element.find(".icon-folder")):i.$icon=i.$element.find(".icon-item"),i.elementData=i.$element.data(),this.options.multiSelect?s(this,i,u):o(this,i,u),this.$element.trigger(u.eventType+".fu.tree",{target:i.elementData,selected:u.dataForEvent}),i.$element.trigger("updated.fu.tree",{selected:u.dataForEvent,item:i.$element,eventType:u.eventType})},discloseFolder:function(n){var r=e(n),i=r.closest(".tree-branch"),s=i.find(".tree-branch-children"),o=s.eq(0);i.addClass("tree-open"),i.attr("aria-expanded","true"),o.removeClass("hide hidden"),i.find("> .tree-branch-header .icon-folder").eq(0).removeClass("glyphicon-folder-close").addClass("glyphicon-folder-open"),s.children().length||this.populate(s),this.$element.trigger("disclosedFolder.fu.tree",i.data())},closeFolder:function(n){var r=e(n),i=r.closest(".tree-branch"),s=i.find(".tree-branch-children"),o=s.eq(0);i.removeClass("tree-open"),i.attr("aria-expanded","false"),o.addClass("hidden"),i.find("> .tree-branch-header .icon-folder").eq(0).removeClass("glyphicon-folder-open").addClass("glyphicon-folder-close"),this.options.cacheItems||o.empty(),this.$element.trigger("closed.fu.tree",i.data())},toggleFolder:function(n){var r=e(n);r.find(".glyphicon-folder-close").length?this.discloseFolder(n):r.find(".glyphicon-folder-open").length&&this.closeFolder(n)},selectFolder:function(t){this.options.folderSelect&&this.selectTreeNode(t,"folder")},selectItem:function(t){this.options.itemSelect&&this.selectTreeNode(t,"item")},selectedItems:function(){var n=this.$element.find(".tree-selected"),r=[];return e.each(n,function(t,n){r.push(e(n).data())}),r},collapse:function(){var t=this,n=[],r=function i(e,r){n.push(r),t.$element.find(".tree-branch.tree-open:not('.hidden, .hide')").length===0&&(t.$element.trigger("closedAll.fu.tree",{tree:t.$element,reportedClosed:n}),t.$element.off("loaded.fu.tree",t.$element,i))};t.$element.on("closed.fu.tree",r),t.$element.find(".tree-branch.tree-open:not('.hidden, .hide')").each(function(){t.closeFolder(this)})},discloseVisible:function(){var n=this,r=n.$element.find(".tree-branch:not('.tree-open, .hidden, .hide')"),i=[],s=function o(e,t){i.push(t),i.length===r.length&&(n.$element.trigger("disclosedVisible.fu.tree",{tree:n.$element,reportedOpened:i}),n.$element.off("loaded.fu.tree",n.$element,o))};n.$element.on("loaded.fu.tree",s),n.$element.find(".tree-branch:not('.tree-open, .hidden, .hide')").each(function(){n.discloseFolder(e(this).find(".tree-branch-header"))})},discloseAll:function(){var t=this;typeof t.$element.data("disclosures")=="undefined"&&t.$element.data("disclosures",0);var n=t.options.disclosuresUpperLimit>=1&&t.$element.data("disclosures")>=t.options.disclosuresUpperLimit,r=t.$element.find(".tree-branch:not('.tree-open, .hidden, .hide')").length===0;if(!r){if(n){t.$element.trigger("exceededDisclosuresLimit.fu.tree",{tree:t.$element,disclosures:t.$element.data("disclosures")});if(!t.$element.data("ignore-disclosures-limit"))return}t.$element.data("disclosures",t.$element.data("disclosures")+1),t.$element.one("disclosedVisible.fu.tree",function(){t.discloseAll()}),t.discloseVisible()}else t.$element.trigger("disclosedAll.fu.tree",{tree:t.$element,disclosures:t.$element.data("disclosures")}),t.options.cacheItems||t.$element.one("closeAll.fu.tree",function(){t.$element.data("disclosures",0)})}},n.prototype.closeAll=n.prototype.collapse,n.prototype.openFolder=n.prototype.discloseFolder,e.fn.tree=function(r){var i=Array.prototype.slice.call(arguments,1),s,o=this.each(function(){var t=e(this),o=t.data("fu.tree"),u=typeof r=="object"&&r;o||t.data("fu.tree",o=new n(this,u)),typeof r=="string"&&(s=o[r].apply(o,i))});return s===undefined?o:s},e.fn.tree.defaults={dataSource:function(t,n){},multiSelect:!1,cacheItems:!0,folderSelect:!0,itemSelect:!0,disclosuresUpperLimit:0},e.fn.tree.Constructor=n,e.fn.tree.noConflict=function(){return e.fn.tree=t,this}}(e),function(e){var t=e.fn.wizard,n=function(t,n){var r;this.$element=e(t),this.options=e.extend({},e.fn.wizard.defaults,n),this.options.disablePreviousStep=this.$element.attr("data-restrict")==="previous"?!0:this.options.disablePreviousStep,this.currentStep=this.options.selectedItem.step,this.numSteps=this.$element.find(".steps li").length,this.$prevBtn=this.$element.find("button.btn-prev"),this.$nextBtn=this.$element.find("button.btn-next"),r=this.$nextBtn.children().detach(),this.nextText=e.trim(this.$nextBtn.text()),this.$nextBtn.append(r),this.$prevBtn.on("click.fu.wizard",e.proxy(this.previous,this)),this.$nextBtn.on("click.fu.wizard",e.proxy(this.next,this)),this.$element.on("click.fu.wizard","li.complete",e.proxy(this.stepclicked,this)),this.selectedItem(this.options.selectedItem),this.options.disablePreviousStep&&(this.$prevBtn.attr("disabled",!0),this.$element.find(".steps").addClass("previous-disabled"))};n.prototype={constructor:n,destroy:function(){return this.$element.remove(),this.$element[0].outerHTML},addSteps:function(t){var n=[].slice.call(arguments).slice(1),r=this.$element.find(".steps"),i=this.$element.find(".step-content"),s,o,u,a,f,l;t=t===-1||t>this.numSteps+1?this.numSteps+1:t,n[0]instanceof Array&&(n=n[0]),f=r.find("li:nth-child("+t+")"),a=i.find(".step-pane:nth-child("+t+")"),f.length<1&&(f=null);for(s=0,o=n.length;s<o;s++)l=e('<li data-step="'+t+'"><span class="badge badge-info"></span></li>'),l.append(n[s].label||"").append('<span class="chevron"></span>'),l.find(".badge").append(n[s].badge||t),u=e('<div class="step-pane" data-step="'+t+'"></div>'),u.append(n[s].pane||""),f?(f.before(l),a.before(u)):(r.append(l),i.append(u)),t++;this.syncSteps(),this.numSteps=r.find("li").length,this.setState()},removeSteps:function(t,n){var r="nextAll",i=0,s=this.$element.find(".steps"),o=this.$element.find(".step-content"),u;n=n!==undefined?n:1,t>s.find("li").length?u=s.find("li:last"):(u=s.find("li:nth-child("+t+")").prev(),u.length<1&&(r="children",u=s)),u[r]().each(function(){var t=e(this),r=t.attr("data-step");if(!(i<n))return!1;t.remove(),o.find('.step-pane[data-step="'+r+'"]:first').remove(),i++}),this.syncSteps(),this.numSteps=s.find("li").length,this.setState()},setState:function(){var t=this.currentStep>1,n=this.currentStep===1,r=this.currentStep===this.numSteps;this.options.disablePreviousStep||this.$prevBtn.attr("disabled",n===!0||t===!1);var i=this.$nextBtn.attr("data-last");if(i){this.lastText=i;var s=this.nextText;r===!0?(s=this.lastText,this.$element.addClass("complete")):this.$element.removeClass("complete");var o=this.$nextBtn.children().detach();this.$nextBtn.text(s).append(o)}var u=this.$element.find(".steps li");u.removeClass("active").removeClass("complete"),u.find("span.badge").removeClass("badge-info").removeClass("badge-success");var a=".steps li:lt("+(this.currentStep-1)+")",f=this.$element.find(a);f.addClass("complete"),f.find("span.badge").addClass("badge-success");var l=".steps li:eq("+(this.currentStep-1)+")",c=this.$element.find(l);c.addClass("active"),c.find("span.badge").addClass("badge-info");var h=this.$element.find(".step-content"),p=c.attr("data-step");h.find(".step-pane").removeClass("active"),h.find('.step-pane[data-step="'+p+'"]:first').addClass("active"),this.$element.find(".steps").first().attr("style","margin-left: 0");var d=0;this.$element.find(".steps > li").each(function(){d+=e(this).outerWidth()});var v=0;this.$element.find(".actions").length?v=this.$element.width()-this.$element.find(".actions").first().outerWidth():v=this.$element.width();if(d>v){var m=d-v;this.$element.find(".steps").first().attr("style","margin-left: -"+m+"px"),this.$element.find("li.active").first().position().left<200&&(m+=this.$element.find("li.active").first().position().left-200,m<1?this.$element.find(".steps").first().attr("style","margin-left: 0"):this.$element.find(".steps").first().attr("style","margin-left: -"+m+"px"))}if(typeof this.initialized!="undefined"){var g=e.Event("changed.fu.wizard");this.$element.trigger(g,{step:this.currentStep})}this.initialized=!0},stepclicked:function(t){var n=e(t.currentTarget),r=this.$element.find(".steps li").index(n);if(r<this.currentStep&&this.options.disablePreviousStep)return;var i=e.Event("stepclicked.fu.wizard");this.$element.trigger(i,{step:r+1});if(i.isDefaultPrevented())return;this.currentStep=r+1,this.setState()},syncSteps:function(){var t=1,n=this.$element.find(".steps"),r=this.$element.find(".step-content");n.children().each(function(){var n=e(this),s=n.find(".badge"),o=n.attr("data-step");isNaN(parseInt(s.html(),10))||s.html(t),n.attr("data-step",t),r.find('.step-pane[data-step="'+o+'"]:last').attr("data-step",t),t++})},previous:function(){if(this.options.disablePreviousStep||this.currentStep===1)return;var t=e.Event("actionclicked.fu.wizard");this.$element.trigger(t,{step:this.currentStep,direction:"previous"});if(t.isDefaultPrevented())return;this.currentStep-=1,this.setState();if(this.$prevBtn.is(":focus")){var n=this.$element.find(".active").find("input, select, textarea")[0];typeof n!="undefined"?e(n).focus():this.$element.find(".active input:first").length===0&&this.$prevBtn.is(":disabled")&&this.$nextBtn.focus()}},next:function(){if(this.currentStep<this.numSteps){var t=e.Event("actionclicked.fu.wizard");this.$element.trigger(t,{step:this.currentStep,direction:"next"});if(t.isDefaultPrevented())return;this.currentStep+=1,this.setState()}else this.$element.trigger("finished.fu.wizard");if(this.$nextBtn.is(":focus")){var n=this.$element.find(".active").find("input, select, textarea")[0];typeof n!="undefined"?e(n).focus():this.$element.find(".active input:first").length===0&&this.$nextBtn.is(":disabled")&&this.$prevBtn.focus()}},selectedItem:function(e){var t,n;return e?(n=e.step||-1,n=isNaN(n)&&this.$element.find('.steps li[data-name="'+n+'"]').first().attr("data-step")||n,1<=n&&n<=this.numSteps?(this.currentStep=n,this.setState()):(n=this.$element.find(".steps li.active:first").attr("data-step"),isNaN(n)||(this.currentStep=parseInt(n,10),this.setState())),t=this):(t={step:this.currentStep},this.$element.find(".steps li.active:first[data-name]").length&&(t.stepname=this.$element.find(".steps li.active:first").attr("data-name"))),t}},e.fn.wizard=function(t){var r=Array.prototype.slice.call(arguments,1),i,s=this.each(function(){var s=e(this),o=s.data("fu.wizard"),u=typeof t=="object"&&t;o||s.data("fu.wizard",o=new n(this,u)),typeof t=="string"&&(i=o[t].apply(o,r))});return i===undefined?s:i},e.fn.wizard.defaults={disablePreviousStep:!1,selectedItem:{step:-1}},e.fn.wizard.Constructor=n,e.fn.wizard.noConflict=function(){return e.fn.wizard=t,this},e(document).on("mouseover.fu.wizard.data-api","[data-initialize=wizard]",function(t){var n=e(t.target).closest(".wizard");n.data("fu.wizard")||n.wizard(n.data())}),e(function(){e("[data-initialize=wizard]").each(function(){var t=e(this);if(t.data("fu.wizard"))return;t.wizard(t.data())})})}(e),function(e){var t=e.fn.infinitescroll,n=function(t,n){this.$element=e(t),this.$element.addClass("infinitescroll"),this.options=e.extend({},e.fn.infinitescroll.defaults,n),this.curScrollTop=this.$element.scrollTop(),this.curPercentage=this.getPercentage(),this.fetchingData=!1,this.$element.on("scroll.fu.infinitescroll",e.proxy(this.onScroll,this)),this.onScroll()};n.prototype={constructor:n,destroy:function(){return this.$element.remove(),this.$element.empty(),this.$element[0].outerHTML},disable:function(){this.$element.off("scroll.fu.infinitescroll")},enable:function(){this.$element.on("scroll.fu.infinitescroll",e.proxy(this.onScroll,this))},end:function(t){var n=e('<div class="infinitescroll-end"></div>');t?n.append(t):n.append("---------"),this.$element.append(n),this.disable()},getPercentage:function(){var e=this.$element.css("box-sizing")==="border-box"?this.$element.outerHeight():this.$element.height(),t=this.$element.get(0).scrollHeight;return t>e?e/(t-this.curScrollTop)*100:0},fetchData:function(t){var n=e('<div class="infinitescroll-load"></div>'),r=this,i,s=function(){var t={percentage:r.curPercentage,scrollTop:r.curScrollTop},i=e('<div class="loader"></div>');n.append(i),i.loader(),r.options.dataSource&&r.options.dataSource(t,function(e){var t;n.remove(),e.content&&r.$element.append(e.content),e.end&&(t=e.end!==!0?e.end:undefined,r.end(t)),r.fetchingData=!1})};this.fetchingData=!0,this.$element.append(n),this.options.hybrid&&t!==!0?(i=e('<button type="button" class="btn btn-primary"></button>'),typeof this.options.hybrid=="object"?i.append(this.options.hybrid.label):i.append('<span class="glyphicon glyphicon-repeat"></span>'),i.on("click.fu.infinitescroll",function(){i.remove(),s()}),n.append(i)):s()},onScroll:function(e){this.curScrollTop=this.$element.scrollTop(),this.curPercentage=this.getPercentage(),!this.fetchingData&&this.curPercentage>=this.options.percentage&&this.fetchData()}},e.fn.infinitescroll=function(t){var r=Array.prototype.slice.call(arguments,1),i,s=this.each(function(){var s=e(this),o=s.data("fu.infinitescroll"),u=typeof t=="object"&&t;o||s.data("fu.infinitescroll",o=new n(this,u)),typeof t=="string"&&(i=o[t].apply(o,r))});return i===undefined?s:i},e.fn.infinitescroll.defaults={dataSource:null,hybrid:!1,percentage:95},e.fn.infinitescroll.Constructor=n,e.fn.infinitescroll.noConflict=function(){return e.fn.infinitescroll=t,this}}(e),function(e){var t=e.fn.pillbox,n=function(t,n){this.$element=e(t),this.$moreCount=this.$element.find(".pillbox-more-count"),this.$pillGroup=this.$element.find(".pill-group"),this.$addItem=this.$element.find(".pillbox-add-item"),this.$addItemWrap=this.$addItem.parent(),this.$suggest=this.$element.find(".suggest"),this.$pillHTML='<li class="btn btn-default pill">	<span></span>	<span class="glyphicon glyphicon-close">		<span class="sr-only">Remove</span>	</span></li>',this.options=e.extend({},e.fn.pillbox.defaults,n),this.options.readonly===-1?this.$element.attr("data-readonly")!==undefined&&this.readonly(!0):this.options.readonly&&this.readonly(!0),this.acceptKeyCodes=this._generateObject(this.options.acceptKeyCodes),this.$element.on("click.fu.pillbox",".pill-group > .pill",e.proxy(this.itemClicked,this)),this.$element.on("click.fu.pillbox",e.proxy(this.inputFocus,this)),this.$element.on("keydown.fu.pillbox",".pillbox-add-item",e.proxy(this.inputEvent,this)),this.options.onKeyDown&&this.$element.on("mousedown.fu.pillbox",".suggest > li",e.proxy(this.suggestionClick,this)),this.options.edit&&(this.$element.addClass("pills-editable"),this.$element.on("blur.fu.pillbox",".pillbox-add-item",e.proxy(this.cancelEdit,this)))};n.prototype={constructor:n,destroy:function(){return this.$element.remove(),this.$element[0].outerHTML},items:function(){var t=this;return this.$pillGroup.children(".pill").map(function(){return t.getItemData(e(this))}).get()},itemClicked:function(t){var n=this,r=e(t.target),i;t.preventDefault(),t.stopPropagation(),this._closeSuggestions();if(!r.hasClass("pill")){i=r.parent();if(this.$element.attr("data-readonly")===undefined){if(r.hasClass("glyphicon-close"))return this.options.onRemove?this.options.onRemove(this.getItemData(i,{el:i}),e.proxy(this._removeElement,this)):this._removeElement(this.getItemData(i,{el:i})),!1;if(this.options.edit){if(i.find(".pillbox-list-edit").length)return!1;this.openEdit(i)}}}else i=r;this.$element.trigger("clicked.fu.pillbox",this.getItemData(i))},readonly:function(e){e?this.$element.attr("data-readonly","readonly"):this.$element.removeAttr("data-readonly"),this.options.truncate&&this.truncate(e)},suggestionClick:function(t){var n=e(t.currentTarget),r={text:n.html(),value:n.data("value")};t.preventDefault(),this.$addItem.val(""),n.data("attr")&&(r.attr=JSON.parse(n.data("attr"))),r.data=n.data("data"),this.addItems(r,!0),this._closeSuggestions()},itemCount:function(){return this.$pillGroup.children(".pill").length},addItems:function(){var t=this,n,r,i;!isFinite(String(arguments[0]))||arguments[0]instanceof Array?(n=[].slice.call(arguments).slice(0),i=n[1]&&!n[1].text):(n=[].slice.call(arguments).slice(1),r=arguments[0]),n[0]instanceof Array&&(n=n[0]),n.length&&(e.each(n,function(e,r){var i={text:r.text,value:r.value?r.value:r.text,el:t.$pillHTML};r.attr&&(i.attr=r.attr),r.data&&(i.data=r.data),n[e]=i}),this.options.edit&&this.currentEdit&&(n[0].el=this.currentEdit.wrap("<div></div>").parent().html()),i&&n.pop(1),t.options.onAdd&&i?this.options.edit&&this.currentEdit?t.options.onAdd(n[0],e.proxy(t.saveEdit,this)):t.options.onAdd(n[0],e.proxy(t.placeItems,this)):this.options.edit&&this.currentEdit?t.saveEdit(n):r?t.placeItems(r,n):t.placeItems(n,i))},removeItems:function(e,t){var n=this,r,i;if(!e)this.$pillGroup.find(".pill").remove(),this._removePillTrigger({method:"removeAll"});else{t=t?t:1;for(r=0;r<t;r++){i=n.$pillGroup.find("> .pill:nth-child("+e+")");if(!i)break;i.remove()}}},placeItems:function(){var t=[],n,r,i,s;!isFinite(String(arguments[0]))||arguments[0]instanceof Array?(n=[].slice.call(arguments).slice(0),s=n[1]&&!n[1].text):(n=[].slice.call(arguments).slice(1),r=arguments[0]),n[0]instanceof Array&&(n=n[0]),n.length&&(e.each(n,function(n,r){var i=e(r.el),s;i.attr("data-value",r.value),i.find("span:first").html(r.text),r.attr&&e.each(r.attr,function(e,t){e==="cssClass"||e==="class"?i.addClass(t):i.attr(e,t)}),r.data&&i.data("data",r.data),t.push(i)}),this.$pillGroup.children(".pill").length>0?r?(i=this.$pillGroup.find(".pill:nth-child("+r+")"),i.length?i.before(t):this.$pillGroup.children(".pill:last").after(t)):this.$pillGroup.children(".pill:last").after(t):this.$pillGroup.prepend(t),s&&this.$element.trigger("added.fu.pillbox",{text:n[0].text,value:n[0].value}))},inputEvent:function(e){var t=this,n=this.$addItem.val(),r,i,s,o;if(this.acceptKeyCodes[e.keyCode]){this.options.onKeyDown&&this._isSuggestionsOpen()&&(o=this.$suggest.find(".pillbox-suggest-sel"),o.length&&(n=o.html(),r=o.data("value"),i=o.data("attr")));if(n.replace(/[ ]*\,[ ]*/,"").match(/\S/)||this.options.allowEmptyPills&&n.length)this._closeSuggestions(),this.$addItem.hide(),i?this.addItems({text:n,value:r,attr:JSON.parse(i)},!0):this.addItems({text:n,value:r},!0),setTimeout(function(){t.$addItem.show().val("").attr({size:10})},0);return e.preventDefault(),!0}if(e.keyCode===8||e.keyCode===46){if(!n.length)return e.preventDefault(),this.options.edit&&this.currentEdit?(this.cancelEdit(),!0):(this._closeSuggestions(),s=this.$pillGroup.children(".pill:last"),s.hasClass("pillbox-highlight")?this._removeElement(this.getItemData(s,{el:s})):s.addClass("pillbox-highlight"),!0)}else n.length>10&&this.$addItem.width()<this.$pillGroup.width()-6&&this.$addItem.attr({size:n.length+3});this.$pillGroup.find(".pill").removeClass("pillbox-highlight");if(this.options.onKeyDown){if(e.keyCode===9||e.keyCode===38||e.keyCode===40)return this._isSuggestionsOpen()&&this._keySuggestions(e),!0;this.callbackId=e.timeStamp,this.options.onKeyDown({event:e,value:n},function(n){t._openSuggestions(e,n)})}},openEdit:function(e){var t=e.index()+1,n=this.$addItemWrap.detach().hide();this.$pillGroup.find(".pill:nth-child("+t+")").before(n),this.currentEdit=e.detach(),n.addClass("editing"),this.$addItem.val(e.find("span:first").html()),n.show(),this.$addItem.focus().select()},cancelEdit:function(e){var t;if(!this.currentEdit)return!1;this._closeSuggestions(),e&&this.$addItemWrap.before(this.currentEdit),this.currentEdit=!1,t=this.$addItemWrap.detach(),t.removeClass("editing"),this.$addItem.val(""),this.$pillGroup.append(t)},saveEdit:function(){var t=arguments[0][0]?arguments[0][0]:arguments[0];this.currentEdit=e(t.el),this.currentEdit.data("value",t.value),this.currentEdit.find("span:first").html(t.text),this.$addItemWrap.hide(),this.$addItemWrap.before(this.currentEdit),this.currentEdit=!1,this.$addItem.val(""),this.$addItemWrap.removeClass("editing"),this.$pillGroup.append(this.$addItemWrap.detach().show()),this.$element.trigger("edited.fu.pillbox",{value:t.value,text:t.text})},removeBySelector:function(){var t=[].slice.call(arguments).slice(0),n=this;e.each(t,function(e,t){n.$pillGroup.find(t).remove()}),this._removePillTrigger({method:"removeBySelector",removedSelectors:t})},removeByValue:function(){var t=[].slice.call(arguments).slice(0),n=this;e.each(t,function(e,t){n.$pillGroup.find('> .pill[data-value="'+t+'"]').remove()}),this._removePillTrigger({method:"removeByValue",removedValues:t})},removeByText:function(){var t=[].slice.call(arguments).slice(0),n=this;e.each(t,function(e,t){n.$pillGroup.find('> .pill:contains("'+t+'")').remove()}),this._removePillTrigger({method:"removeByText",removedText:t})},truncate:function(t){var n=this,r,i,s,o,u;this.$element.removeClass("truncate"),this.$addItemWrap.removeClass("truncated"),this.$pillGroup.find(".pill").removeClass("truncated"),t&&(this.$element.addClass("truncate"),r=this.$element.width(),i=!1,s=0,o=this.$pillGroup.find(".pill").length,u=0,this.$pillGroup.find(".pill").each(function(){var t=e(this);i?t.addClass("truncated"):(s++,n.$moreCount.text(o-s),u+t.outerWidth(!0)+n.$addItemWrap.outerWidth(!0)<=r?u+=t.outerWidth(!0):(n.$moreCount.text(o-s+1),t.addClass("truncated"),i=!0))}),s===o&&this.$addItemWrap.addClass("truncated"))},inputFocus:function(e){this.$element.find(".pillbox-add-item").focus()},getItemData:function(t,n){return e.extend({text:t.find("span:first").html()},t.data(),n)},_removeElement:function(e){e.el.remove(),delete e.el,this.$element.trigger("removed.fu.pillbox",e)},_removePillTrigger:function(e){this.$element.trigger("removed.fu.pillbox",e)},_generateObject:function(t){var n={};return e.each(t,function(e,t){n[t]=!0}),n},_openSuggestions:function(t,n){var r="",i=e("<ul>");if(this.callbackId!==t.timeStamp)return!1;n.data&&n.data.length&&(e.each(n.data,function(t,n){var r=n.value?n.value:n.text,s=e('<li data-value="'+r+'">'+n.text+"</li>");n.attr&&s.data("attr",JSON.stringify(n.attr)),n.data&&s.data("data",n.data),i.append(s)}),this.$suggest.html("").append(i.children()),e(document.body).trigger("suggested.fu.pillbox",this.$suggest))},_closeSuggestions:function(){this.$suggest.html("").parent().removeClass("open")},_isSuggestionsOpen:function(){return this.$suggest.parent().hasClass("open")},_keySuggestions:function(e){var t=this.$suggest.find("li.pillbox-suggest-sel"),n=e.keyCode===38,r,i;e.preventDefault(),t.length?(r=n?t.prev():t.next(),r.length||(r=n?this.$suggest.find("li:last"):this.$suggest.find("li:first")),r&&(r.addClass("pillbox-suggest-sel"),t.removeClass("pillbox-suggest-sel"))):(t=this.$suggest.find("li:first"),t.addClass("pillbox-suggest-sel"))}},e.fn.pillbox=function(t){var r=Array.prototype.slice.call(arguments,1),i,s=this.each(function(){var s=e(this),o=s.data("fu.pillbox"),u=typeof t=="object"&&t;o||s.data("fu.pillbox",o=new n(this,u)),typeof t=="string"&&(i=o[t].apply(o,r))});return i===undefined?s:i},e.fn.pillbox.defaults={onAdd:undefined,onRemove:undefined,onKeyDown:undefined,edit:!1,readonly:-1,truncate:!1,acceptKeyCodes:[13,188],allowEmptyPills:!1},e.fn.pillbox.Constructor=n,e.fn.pillbox.noConflict=function(){return e.fn.pillbox=t,this},e(document).on("mousedown.fu.pillbox.data-api","[data-initialize=pillbox]",function(t){var n=e(t.target).closest(".pillbox");n.data("fu.pillbox")||n.pillbox(n.data())}),e(function(){e("[data-initialize=pillbox]").each(function(){var t=e(this);if(t.data("fu.pillbox"))return;t.pillbox(t.data())})})}(e),function(e){var t=e.fn.repeater,n=function(t,n){var r=this,i,s;this.$element=e(t),this.$canvas=this.$element.find(".repeater-canvas"),this.$count=this.$element.find(".repeater-count"),this.$end=this.$element.find(".repeater-end"),this.$filters=this.$element.find(".repeater-filters"),this.$loader=this.$element.find(".repeater-loader"),this.$pageSize=this.$element.find(".repeater-itemization .selectlist"),this.$nextBtn=this.$element.find(".repeater-next"),this.$pages=this.$element.find(".repeater-pages"),this.$prevBtn=this.$element.find(".repeater-prev"),this.$primaryPaging=this.$element.find(".repeater-primaryPaging"),this.$search=this.$element.find(".repeater-search").find(".search"),this.$secondaryPaging=this.$element.find(".repeater-secondaryPaging"),this.$start=this.$element.find(".repeater-start"),this.$viewport=this.$element.find(".repeater-viewport"),this.$views=this.$element.find(".repeater-views"),this.currentPage=0,this.currentView=null,this.infiniteScrollingCallback=function(){},this.infiniteScrollingCont=null,this.infiniteScrollingEnabled=!1,this.infiniteScrollingEnd=null,this.infiniteScrollingOptions={},this.lastPageInput=0,this.options=e.extend({},e.fn.repeater.defaults,n),this.pageIncrement=0,this.resizeTimeout={},this.stamp=(new Date).getTime()+(Math.floor(Math.random()*100)+1),this.storedDataSourceOpts=null,this.viewOptions={},this.viewType=null,this.$filters.selectlist(),this.$pageSize.selectlist(),this.$primaryPaging.find(".combobox").combobox(),this.$search.search(),this.$filters.on("changed.fu.selectlist",function(e,t){r.$element.trigger("filtered.fu.repeater",t),r.render({clearInfinite:!0,pageIncrement:null})}),this.$nextBtn.on("click.fu.repeater",e.proxy(this.next,this)),this.$pageSize.on("changed.fu.selectlist",function(e,t){r.$element.trigger("pageSizeChanged.fu.repeater",t),r.render({pageIncrement:null})}),this.$prevBtn.on("click.fu.repeater",e.proxy(this.previous,this)),this.$primaryPaging.find(".combobox").on("changed.fu.combobox",function(e,t){r.$element.trigger("pageChanged.fu.repeater",[t.text,t]),r.pageInputChange(t.text)}),this.$search.on("searched.fu.search cleared.fu.search",function(e,t){r.$element.trigger("searchChanged.fu.repeater",t),r.render({clearInfinite:!0,pageIncrement:null})}),this.$secondaryPaging.on("blur.fu.repeater",function(e){r.pageInputChange(r.$secondaryPaging.val())}),this.$secondaryPaging.on("keyup",function(e){e.keyCode===13&&r.pageInputChange(r.$secondaryPaging.val())}),this.$views.find("input").on("change.fu.repeater",e.proxy(this.viewChanged,this)),e(window).on("resize.fu.repeater."+this.stamp,function(e){clearTimeout(r.resizeTimeout),r.resizeTimeout=setTimeout(function(){r.resize(),r.$element.trigger("resized.fu.repeater")},75)}),this.$loader.loader(),this.$loader.loader("pause"),this.options.defaultView!==-1?s=this.options.defaultView:(i=this.$views.find("label.active input"),s=i.length>0?i.val():"list"),this.setViewOptions(s),this.initViewTypes(function(){r.resize(),r.$element.trigger("resized.fu.repeater"),r.render({changeView:s})})};n.prototype={constructor:n,clear:function(t){function i(t){var n=[];t.children().each(function(){var t=e(this),r=t.attr("data-preserve");r==="deep"?(t.detach(),n.push(t)):r==="shallow"&&(i(t),t.detach(),n.push(t))}),t.empty(),t.append(n)}var n,r;t=t||{},t.preserve?(!this.infiniteScrollingEnabled||t.clearInfinite)&&i(this.$canvas):this.$canvas.empty(),n=t.viewChanged!==undefined?t.viewChanged:!1,r=e.fn.repeater.viewTypes[this.viewType]||{},!n&&r.cleared&&r.cleared.call(this,{options:t})},clearPreservedDataSourceOptions:function(){this.storedDataSourceOpts=null},destroy:function(){var t;return this.$element.find("input").each(function(){e(this).attr("value",e(this).val())}),this.$canvas.empty(),t=this.$element[0].outerHTML,this.$element.find(".combobox").combobox("destroy"),this.$element.find(".selectlist").selectlist("destroy"),this.$element.find(".search").search("destroy"),this.infiniteScrollingEnabled&&e(this.infiniteScrollingCont).infinitescroll("destroy"),this.$element.remove(),e(window).off("resize.fu.repeater."+this.stamp),t},disable:function(){var e="disable",t="disabled";this.$search.search(e),this.$filters.selectlist(e),this.$views.find("label").attr(t,t),this.$pageSize.selectlist(e),this.$primaryPaging.find(".combobox").combobox(e),this.$secondaryPaging.attr(t,t),this.$prevBtn.attr(t,t),this.$nextBtn.attr(t,t),this.$element.addClass("disabled"),this.$element.trigger("disabled.fu.repeater")},enable:function(){var e="disabled",t="enable",n="page-end";this.$search.search(t),this.$filters.selectlist(t),this.$views.find("label").removeAttr(e),this.$pageSize.selectlist("enable"),this.$primaryPaging.find(".combobox").combobox(t),this.$secondaryPaging.removeAttr(e),this.$prevBtn.hasClass(n)||this.$prevBtn.removeAttr(e),this.$nextBtn.hasClass(n)||this.$nextBtn.removeAttr(e),this.$element.removeClass("disabled"),this.$element.trigger("enabled.fu.repeater")},getDataOptions:function(t){var n={},r={},i,s;return t=t||{},r.filter=this.$filters.length>0?this.$filters.selectlist("selectedItem"):{text:"All",value:"all"},r.view=this.currentView,this.infiniteScrollingEnabled||(r.pageSize=this.$pageSize.length>0?parseInt(this.$pageSize.selectlist("selectedItem").value,10):25),t.pageIncrement!==undefined&&(t.pageIncrement===null?this.currentPage=0:this.currentPage+=t.pageIncrement),r.pageIndex=this.currentPage,i=this.$search.length>0?this.$search.find("input").val():"",i!==""&&(r.search=i),t.dataSourceOptions&&(n=t.dataSourceOptions,t.preserveDataSourceOptions&&(this.storedDataSourceOpts=this.storedDataSourceOpts?e.extend(this.storedDataSourceOpts,n):n)),this.storedDataSourceOpts&&(n=e.extend(this.storedDataSourceOpts,n)),s=e.fn.repeater.viewTypes[this.viewType]||{},s=s.dataOptions,s?(s=s.call(this,r),r=e.extend(s,n)):r=e.extend(r,n),r},infiniteScrolling:function(e,t){var n=this.$element.find(".repeater-itemization"),r=this.$element.find(".repeater-pagination"),i,s;t=t||{},e?(this.infiniteScrollingEnabled=!0,this.infiniteScrollingEnd=t.end,delete t.dataSource,delete t.end,this.infiniteScrollingOptions=t,n.hide(),r.hide()):(i=this.infiniteScrollingCont,s=i.data(),delete s.infinitescroll,i.off("scroll"),i.removeClass("infinitescroll"),this.infiniteScrollingCont=null,this.infiniteScrollingEnabled=!1,this.infiniteScrollingEnd=null,this.infiniteScrollingOptions={},n.show(),r.show())},infiniteScrollPaging:function(e,t){var n=this.infiniteScrollingEnd!==!0?this.infiniteScrollingEnd:undefined,r=e.page,i=e.pages;this.currentPage=r!==undefined?r:NaN,this.currentPage+1>=i&&this.infiniteScrollingCont.infinitescroll("end",n)},initInfiniteScrolling:function(){var t=this.$canvas.find('[data-infinite="true"]:first'),n,r;t=t.length<1?this.$canvas:t,t.data("fu.infinitescroll")?t.infinitescroll("enable"):(r=this,n=e.extend({},this.infiniteScrollingOptions),n.dataSource=function(e,t){r.infiniteScrollingCallback=t,r.render({pageIncrement:1})},t.infinitescroll(n),this.infiniteScrollingCont=t)},initViewTypes:function(t){function o(e){function i(){e++,e<s?o(e):t()}r[e].initialize?r[e].initialize.call(n,{},function(){i()}):i()}var n=this,r=[],i,s;for(i in e.fn.repeater.viewTypes)r.push(e.fn.repeater.viewTypes[i]);s=r.length,s>0?o(0):t()},itemization:function(e){this.$count.html(e.count!==undefined?e.count:"?"),this.$end.html(e.end!==undefined?e.end:"?"),this.$start.html(e.start!==undefined?e.start:"?")},next:function(e){var t="disabled";this.$nextBtn.attr(t,t),this.$prevBtn.attr(t,t),this.pageIncrement=1,this.$element.trigger("nextClicked.fu.repeater"),this.render({pageIncrement:this.pageIncrement})},pageInputChange:function(e){var t;e!==this.lastPageInput&&(this.lastPageInput=e,e=parseInt(e,10)-1,t=e-this.currentPage,this.$element.trigger("pageChanged.fu.repeater",e),this.render({pageIncrement:t}))},pagination:function(e){var t="active",n="disabled",r=e.page,i="page-end",s=e.pages,o,u,a;this.currentPage=r!==undefined?r:NaN,this.$primaryPaging.removeClass(t),this.$secondaryPaging.removeClass(t);if(s<=this.viewOptions.dropPagingCap){this.$primaryPaging.addClass(t),o=this.$primaryPaging.find(".dropdown-menu"),o.empty();for(u=0;u<s;u++)a=u+1,o.append('<li data-value="'+a+'"><a href="#">'+a+"</a></li>");this.$primaryPaging.find("input.form-control").val(this.currentPage+1)}else this.$secondaryPaging.addClass(t),this.$secondaryPaging.val(this.currentPage+1);this.lastPageInput=this.currentPage+1+"",this.$pages.html(s),this.currentPage+1<s?(this.$nextBtn.removeAttr(n),this.$nextBtn.removeClass(i)):(this.$nextBtn.attr(n,n),this.$nextBtn.addClass(i)),this.currentPage-1>=0?(this.$prevBtn.removeAttr(n),this.$prevBtn.removeClass(i)):(this.$prevBtn.attr(n,n),this.$prevBtn.addClass(i)),this.pageIncrement!==0&&(this.pageIncrement>0?this.$nextBtn.is(":disabled")?this.$prevBtn.focus():this.$nextBtn.focus():this.$prevBtn.is(":disabled")?this.$nextBtn.focus():this.$prevBtn.focus())},previous:function(){var e="disabled";this.$nextBtn.attr(e,e),this.$prevBtn.attr(e,e),this.pageIncrement=-1,this.$element.trigger("previousClicked.fu.repeater"),this.render({pageIncrement:this.pageIncrement})},render:function(t){var n=this,r=!1,i=e.fn.repeater.viewTypes[this.viewType]||{},s,o;t=t||{},this.disable(),t.changeView&&this.currentView!==t.changeView&&(o=this.currentView,this.currentView=t.changeView,this.viewType=this.currentView.split(".")[0],this.setViewOptions(this.currentView),this.$element.attr("data-currentview",this.currentView),this.$element.attr("data-viewtype",this.viewType),r=!0,t.viewChanged=r,this.$element.trigger("viewChanged.fu.repeater",this.currentView),this.infiniteScrollingEnabled&&n.infiniteScrolling(!1),i=e.fn.repeater.viewTypes[this.viewType]||{},i.selected&&i.selected.call(this,{prevView:o})),t.preserve=t.preserve!==undefined?t.preserve:!r,this.clear(t),(!this.infiniteScrollingEnabled||this.infiniteScrollingEnabled&&r)&&this.$loader.show().loader("play"),s=this.getDataOptions(t),this.viewOptions.dataSource(s,function(e){e=e||{},n.infiniteScrollingEnabled?n.infiniteScrollingCallback({}):(n.itemization(e),n.pagination(e)),n.runRenderer(i,e,function(){n.infiniteScrollingEnabled&&((r||t.clearInfinite)&&n.initInfiniteScrolling(),n.infiniteScrollPaging(e,t)),n.$loader.hide().loader("pause"),n.$element.trigger("rendered.fu.repeater",{data:e,options:s,renderOptions:t}),n.$element.trigger("loaded.fu.repeater",s),n.enable()})})},resize:function(){var t=this.viewOptions.staticHeight===-1?this.$element.attr("data-staticheight"):this.viewOptions.staticHeight,n={},r,i;this.viewType&&(n=e.fn.repeater.viewTypes[this.viewType]||{}),t!==undefined&&t!==!1&&t!=="false"?(this.$canvas.addClass("scrolling"),i={bottom:this.$viewport.css("margin-bottom"),top:this.$viewport.css("margin-top")},r=(t==="true"||t===!0?this.$element.height():parseInt(t,10))-this.$element.find(".repeater-header").outerHeight()-this.$element.find(".repeater-footer").outerHeight()-(i.bottom==="auto"?0:parseInt(i.bottom,10))-(i.top==="auto"?0:parseInt(i.top,10)),this.$viewport.outerHeight(r)):this.$canvas.removeClass("scrolling"),n.resize&&n.resize.call(this,{height:this.$element.outerHeight(),width:this.$element.outerWidth()})},runRenderer:function(t,n,r){function l(t,n){var r;n&&(r=n.action?n.action:"append",r!=="none"&&n.item!==undefined&&(t=n.container!==undefined?e(n.container):t,t[r](n.item)))}var i,s,o,u,a,f;if(!t.render){t.before&&(u=t.before.call(this,{container:this.$canvas,data:n}),l(this.$canvas,u)),i=this.$canvas.find('[data-container="true"]:last'),i=i.length>0?i:this.$canvas;if(t.renderItem){a=t.repeat||"data.items",a=a.split("."),a[0]==="data"||a[0]==="this"?(f=a[0]==="this"?this:n,a.shift()):(a=[],f=[],window.console&&window.console.warn&&window.console.warn('WARNING: Repeater plugin "repeat" value must start with either "data" or "this"'));for(s=0,o=a.length;s<o;s++){if(f[a[s]]===undefined){f=[],window.console&&window.console.warn&&window.console.warn("WARNING: Repeater unable to find property to iterate renderItem on.");break}f=f[a[s]]}for(s=0,o=f.length;s<o;s++)u=t.renderItem.call(this,{container:i,data:n,index:s,subset:f}),l(i,u)}t.after&&(u=t.after.call(this,{container:this.$canvas,data:n}),l(this.$canvas,u)),r()}else t.render.call(this,{container:this.$canvas,data:n},function(){r()})},setViewOptions:function(t){var n={},r=t.split(".")[1];r&&this.options.views?n=this.options.views[r]||this.options.views[t]||{}:n={},this.viewOptions=e.extend({},this.options,n)},viewChanged:function(t){var n=e(t.target),r=n.val();this.render({changeView:r,pageIncrement:null})}},e.fn.repeater=function(t){var r=Array.prototype.slice.call(arguments,1),i,s=this.each(function(){var s=e(this),o=s.data("fu.repeater"),u=typeof t=="object"&&t;o||s.data("fu.repeater",o=new n(this,u)),typeof t=="string"&&(i=o[t].apply(o,r))});return i===undefined?s:i},e.fn.repeater.defaults={dataSource:function(e,t){t({count:0,end:0,items:[],page:0,pages:1,start:0})},defaultView:-1,dropPagingCap:10,staticHeight:-1,views:null},e.fn.repeater.viewTypes={},e.fn.repeater.Constructor=n,e.fn.repeater.noConflict=function(){return e.fn.repeater=t,this}}(e),function(e){function t(t,n,r,i,s){var o=i[s].className,u=n[r][i[s].property],a=e("<td></td>"),f=i[s]._auto_width;a.addClass(o!==undefined?o:"").append(u),f!==undefined&&a.outerWidth(f),t.append(a),this.viewOptions.list_columnRendered&&this.viewOptions.list_columnRendered({container:t,columnAttr:i[s].property,item:a,rowData:n[r]},function(){})}function n(t,n,r){var i="glyphicon-chevron-down",s=".glyphicon.rlc:first",o="glyphicon-chevron-up",u=e('<div class="repeater-list-heading"><span class="glyphicon rlc"></span></div>'),a=e("<th></th>"),f=this,l,c,h,p,d;u.data("fu_item_index",r),u.prepend(n[r].label),a.html(u.html()).find("[id]").removeAttr("id"),a.append(u),l=a.add(u),p=u.find(s),d=p.add(a.find(s)),c=n[r].className,c!==undefined&&l.addClass(c),h=n[r].sortable,h&&(l.addClass("sortable"),u.on("click.fu.repeaterList",function(){f.list_sortProperty=typeof h=="string"?h:n[r].property,u.hasClass("sorted")?p.hasClass(o)?(d.removeClass(o).addClass(i),f.list_sortDirection="desc"):f.viewOptions.list_sortClearing?(l.removeClass("sorted"),d.removeClass(i),f.list_sortDirection=null,f.list_sortProperty=null):(d.removeClass(i).addClass(o),f.list_sortDirection="asc"):(t.find("th, .repeater-list-heading").removeClass("sorted"),d.removeClass(i).addClass(o),f.list_sortDirection="asc",l.addClass("sorted")),f.render({clearInfinite:!0,pageIncrement:null})}));if(n[r].sortDirection==="asc"||n[r].sortDirection==="desc")t.find("th, .repeater-list-heading").removeClass("sorted"),l.addClass("sortable sorted"),n[r].sortDirection==="asc"?(d.addClass(o),this.list_sortDirection="asc"):(d.addClass(i),this.list_sortDirection="desc"),this.list_sortProperty=typeof h=="string"?h:n[r].property;t.append(a)}function r(n,r,i){var s=e("<tr></tr>"),o=this,u,a;this.viewOptions.list_selectable&&(s.addClass("selectable"),s.attr("tabindex",0),s.data("item_data",r[i]),s.on("click.fu.repeaterList",function(){var t=e(this);t.hasClass("selected")?(t.removeClass("selected"),t.find(".repeater-list-check").remove(),o.$element.trigger("deselected.fu.repeaterList",t)):(o.viewOptions.list_selectable!=="multi"&&(o.$canvas.find(".repeater-list-check").remove(),o.$canvas.find(".repeater-list tbody tr.selected").each(function(){e(this).removeClass("selected"),o.$element.trigger("deselected.fu.repeaterList",e(this))})),t.addClass("selected"),t.find("td:first").prepend('<div class="repeater-list-check"><span class="glyphicon glyphicon-ok"></span></div>'),o.$element.trigger("selected.fu.repeaterList",t))}),s.keyup(function(e){e.keyCode===13&&s.trigger("click.fu.repeaterList")})),n.append(s);for(u=0,a=this.list_columns.length;u<a;u++)t.call(this,s,r,i,this.list_columns,u);this.viewOptions.list_rowRendered&&this.viewOptions.list_rowRendered({container:n,item:s,rowData:r[i]},function(){})}function i(t,n){var r=t.find("tbody"),i;r.length<1&&(r=e('<tbody data-container="true"></tbody>'),t.append(r)),n.items&&n.items.length<1&&(i=e('<tr class="empty"><td colspan="'+this.list_columns.length+'"></td></tr>'),i.find("td").append(this.viewOptions.list_noItemsHTML),r.append(i))}function s(t,r){function c(e,t){if(!t)return!1;if(!e||t.length!==e.length)return!0;for(s=0,a=t.length;s<a;s++){if(!e[s])return!0;for(u in t[s])if(e[s][u]!==t[s][u])return!0}return!1}var i=r.columns||[],s,u,a,f,l;if(this.list_firstRender||c(this.list_columns,i)){t.find("thead").remove(),this.list_columns=i,this.list_firstRender=!1,this.$loader.removeClass("noHeader"),f=e('<thead data-preserve="deep"><tr></tr></thead>'),l=f.find("tr");for(s=0,a=i.length;s<a;s++)n.call(this,l,i,s);t.prepend(f),o.call(this,l)}}function o(t){var n=[],r=this,i,s,o,u;if(this.viewOptions.list_columnSizing){i=0,u=0,t.find("th").each(function(){var t=e(this),s=t.next("th").length===0,o;r.list_columns[i].width!==undefined?(o=r.list_columns[i].width,t.outerWidth(o),u+=t.outerWidth(),s?t.outerWidth(""):r.list_columns[i]._auto_width=o):n.push({col:t,index:i,last:s}),i++}),s=n.length;if(s>0){o=Math.floor((this.$canvas.width()-u)/s);for(i=0;i<s;i++)n[i].last||(n[i].col.outerWidth(o),this.list_columns[n[i].index]._auto_width=o)}}}e.fn.repeater&&(e.fn.repeater.Constructor.prototype.list_clearSelectedItems=function(){this.$canvas.find(".repeater-list-check").remove(),this.$canvas.find(".repeater-list table tbody tr.selected").removeClass("selected")},e.fn.repeater.Constructor.prototype.list_highlightColumn=function(t,n){var r=this.$canvas.find(".repeater-list tbody");if(this.viewOptions.list_highlightSortedColumn||n)r.find("td.sorted").removeClass("sorted"),r.find("tr").each(function(){var n=e(this).find("td:nth-child("+(t+1)+")");n.addClass("sorted")})},e.fn.repeater.Constructor.prototype.list_getSelectedItems=function(){var t=[];return this.$canvas.find(".repeater-list table tbody tr.selected").each(function(){var n=e(this);t.push({data:n.data("item_data"),element:n})}),t},e.fn.repeater.Constructor.prototype.list_positionHeadings=function(){var t=this.$element.find(".repeater-list-wrapper"),n=t.offset().left,r=t.scrollLeft();r>0?t.find(".repeater-list-heading").each(function(){var t=e(this),r=t.parents("th:first").offset().left-n+"px";t.addClass("shifted").css("left",r)}):t.find(".repeater-list-heading").each(function(){e(this).removeClass("shifted").css("left","")})},e.fn.repeater.Constructor.prototype.list_setSelectedItems=function(t,n){function f(){u=e(this),s=u.data("item_data")||{},s[t[o].property]===t[o].value&&l(u,t[o].selected)}function l(e,t){t=t!==undefined?t:!0,t?(!n&&r!=="multi"&&i.list_clearSelectedItems(),e.hasClass("selected")||(e.addClass("selected"),e.find("td:first").prepend('<div class="repeater-list-check"><span class="glyphicon glyphicon-ok"></span></div>'))):(e.find(".repeater-list-check").remove(),e.removeClass("selected"))}var r=this.viewOptions.list_selectable,i=this,s,o,u,a;e.isArray(t)||(t=[t]),n===!0||r==="multi"?a=t.length:r?a=t.length>0?1:0:a=0;for(o=0;o<a;o++)t[o].index!==undefined?(u=this.$canvas.find(".repeater-list table tbody tr:nth-child("+(t[o].index+1)+")"),u.length>0&&l(u,t[o].selected)):t[o].property!==undefined&&t[o].value!==undefined&&this.$canvas.find(".repeater-list table tbody tr").each(f)},e.fn.repeater.Constructor.prototype.list_sizeHeadings=function(){var t=this.$element.find(".repeater-list table");t.find("thead th").each(function(){var t=e(this),n=t.find(".repeater-list-heading");n.outerHeight(t.outerHeight()),n.outerWidth(t.outerWidth())})},e.fn.repeater.Constructor.prototype.list_setFrozenColumns=function(){var t=this.$canvas.find(".table-frozen"),n=this.$element.find(".repeater-list table"),r=this.$element.find(".repeater-list"),i=this.viewOptions.list_frozenColumns;if(t.length<1){var s=e('<div class="frozen-column-wrapper"></div>').insertBefore(n),o=n.clone().addClass("table-frozen");o.find("th:not(:lt("+i+"))").remove(),o.find("td:not(:nth-child(n+0):nth-child(-n+"+i+"))").remove();var u=o.clone().removeClass("table-frozen");u.find("tbody").remove();var a=e('<div class="frozen-thead-wrapper"></div>').append(u);s.append(o),r.append(a),this.$canvas.addClass("frozen-enabled")}this.$element.find(".repeater-list table.table-frozen tr").each(function(t,r){e(this).height(n.find("tr:eq("+t+")").height())});var f=n.find("td:eq(0)").outerWidth();this.$element.find(".frozen-column-wrapper, .frozen-thead-wrapper").width(f)},e.fn.repeater.Constructor.prototype.list_positionFrozenColumns=function(){var e=this.$element.find(".repeater-canvas"),t=e.scrollTop(),n=e.scrollLeft();t>0?e.find(".repeater-list-heading").css("top",t):e.find(".repeater-list-heading").css("top","0"),n>0?(e.find(".frozen-thead-wrapper").css("left",n),e.find(".frozen-column-wrapper").css("left",n)):(e.find(".frozen-thead-wrapper").css("left","0"),e.find(".frozen-column-wrapper").css("left","0"))},e.fn.repeater.defaults=e.extend({},e.fn.repeater.defaults,{list_columnRendered:null,list_columnSizing:!0,list_columnSyncing:!0,list_highlightSortedColumn:!0,list_infiniteScroll:!1,list_noItemsHTML:"no items found",list_selectable:!1,list_sortClearing:!1,list_rowRendered:null,list_frozenColumns:0}),e.fn.repeater.viewTypes.list={cleared:function(){this.viewOptions.list_columnSyncing&&this.list_sizeHeadings()},dataOptions:function(e){return this.list_sortDirection&&(e.sortDirection=this.list_sortDirection),this.list_sortProperty&&(e.sortProperty=this.list_sortProperty),e},initialize:function(e,t){this.list_sortDirection=null,this.list_sortProperty=null,t()},resize:function(){this.viewOptions.list_columnSyncing&&this.list_sizeHeadings()},selected:function(){var e=this.viewOptions.list_infiniteScroll,t;this.list_firstRender=!0,this.$loader.addClass("noHeader"),e&&(t=typeof e=="object"?e:{},this.infiniteScrolling(!0,t))},before:function(t){var n=t.container.find(".repeater-list"),r=this,o;return n.length<1&&(n=e('<div class="repeater-list" data-preserve="shallow"><div class="repeater-list-wrapper" data-infinite="true" data-preserve="shallow"><table aria-readonly="true" class="table" data-preserve="shallow" role="grid"></table></div></div>'),n.find(".repeater-list-wrapper").on("scroll.fu.repeaterList",function(){r.viewOptions.list_columnSyncing&&r.list_positionHeadings()}),r.viewOptions.list_frozenColumns&&t.container.on("scroll.fu.repeaterList",function(){r.list_positionFrozenColumns()}),t.container.append(n)),o=n.find("table"),s.call(this,o,t.data),i.call(this,o,t.data),!1},renderItem:function(e){return r.call(this,e.container,e.subset,e.index),!1},after:function(){var e;return this.viewOptions.list_columnSyncing&&(this.list_sizeHeadings(),this.list_positionHeadings()),this.viewOptions.list_frozenColumns&&(this.list_setFrozenColumns(),this.list_positionFrozenColumns()),e=this.$canvas.find(".repeater-list-heading.sorted"),e.length>0&&this.list_highlightColumn(e.data("fu_item_index")),!1}})}(e),function(e){function t(t,n){function i(){var i,s,o;s=n.indexOf("{{"),i=n.indexOf("}}",s+2),s>-1&&i>-1?(o=e.trim(n.substring(s+2,i)),o=t[o]!==undefined?t[o]:"",n=n.substring(0,s)+o+n.substring(i+2)):r=!0}var r=!1;while(!r&&n.search("{{")>=0)i(n);return n}e.fn.repeater&&(e.fn.repeater.Constructor.prototype.thumbnail_clearSelectedItems=function(){this.$canvas.find(".repeater-thumbnail-cont .selectable.selected").removeClass("selected")},e.fn.repeater.Constructor.prototype.thumbnail_getSelectedItems=function(){var t=[];return this.$canvas.find(".repeater-thumbnail-cont .selectable.selected").each(function(){t.push(e(this))}),t},e.fn.repeater.Constructor.prototype.thumbnail_setSelectedItems=function(t,n){function f(){if(a===t[s].index)return o=e(this),!1;a++}function l(){o=e(this),o.is(t[s].selector)&&c(o,t[s].selected)}function c(e,t){t=t!==undefined?t:!0,t?(!n&&r!=="multi"&&i.thumbnail_clearSelectedItems(),e.addClass("selected")):e.removeClass("selected")}var r=this.viewOptions.thumbnail_selectable,i=this,s,o,u,a;e.isArray(t)||(t=[t]),n===!0||r==="multi"?u=t.length:r?u=t.length>0?1:0:u=0;for(s=0;s<u;s++)t[s].index!==undefined?(o=e(),a=0,this.$canvas.find(".repeater-thumbnail-cont .selectable").each(f),o.length>0&&c(o,t[s].selected)):t[s].selector&&this.$canvas.find(".repeater-thumbnail-cont .selectable").each(l)},e.fn.repeater.defaults=e.extend({},e.fn.repeater.defaults,{thumbnail_alignment:"left",thumbnail_infiniteScroll:!1,thumbnail_itemRendered:null,thumbnail_noItemsHTML:"no items found",thumbnail_selectable:!1,thumbnail_template:'<div class="thumbnail repeater-thumbnail"><img height="75" src="{{src}}" width="65"><span>{{name}}</span></div>'}),e.fn.repeater.viewTypes.thumbnail={selected:function(){var e=this.viewOptions.thumbnail_infiniteScroll,t;e&&(t=typeof e=="object"?e:{},this.infiniteScrolling(!0,t))},before:function(t){var n=this.viewOptions.thumbnail_alignment,r=this.$canvas.find(".repeater-thumbnail-cont"),i=t.data,s={},o,u;return r.length<1?(r=e('<div class="clearfix repeater-thumbnail-cont" data-container="true" data-infinite="true" data-preserve="shallow"></div>'),n&&n!=="none"?(u={center:1,justify:1,left:1,right:1},n=u[n]?n:"justify",r.addClass("align-"+n),this.thumbnail_injectSpacers=!0):this.thumbnail_injectSpacers=!1,s.item=r):s.action="none",i.items&&i.items.length<1?(o=e('<div class="empty"></div>'),o.append(this.viewOptions.thumbnail_noItemsHTML),r.append(o)):r.find(".empty:first").remove(),s},renderItem:function(n){var r=this.viewOptions.thumbnail_selectable,i="selected",s=this,o=e(t(n.subset[n.index],this.viewOptions.thumbnail_template));return r&&(o.addClass("selectable"),o.on("click",function(){o.hasClass(i)?(o.removeClass(i),s.$element.trigger("deselected.fu.repeaterThumbnail",o)):(r!=="multi"&&s.$canvas.find(".repeater-thumbnail-cont .selectable.selected").each(function(){var t=e(this);t.removeClass(i),s.$element.trigger("deselected.fu.repeaterThumbnail",t)}),o.addClass(i),s.$element.trigger("selected.fu.repeaterThumbnail",o))})),n.container.append(o),this.thumbnail_injectSpacers&&o.after('<span class="spacer">&nbsp;</span>'),this.viewOptions.thumbnail_itemRendered&&this.viewOptions.thumbnail_itemRendered({container:n.container,item:o,itemData:n.subset[n.index]},function(){}),!1}})}(e),function(e){var t=e.fn.scheduler,n=function(t,n){var r=this;this.$element=e(t),this.options=e.extend({},e.fn.scheduler.defaults,n),this.$startDate=this.$element.find(".start-datetime .start-date"),this.$startTime=this.$element.find(".start-datetime .start-time"),this.$timeZone=this.$element.find(".timezone-container .timezone"),this.$repeatIntervalPanel=this.$element.find(".repeat-every-panel"),this.$repeatIntervalSelect=this.$element.find(".repeat-options"),this.$repeatIntervalSpinbox=this.$element.find(".repeat-every"),this.$repeatIntervalTxt=this.$element.find(".repeat-every-text"),this.$end=this.$element.find(".repeat-end"),this.$endSelect=this.$end.find(".end-options"),this.$endAfter=this.$end.find(".end-after"),this.$endDate=this.$end.find(".end-on-date"),this.$recurrencePanels=this.$element.find(".repeat-panel"),this.$repeatIntervalSelect.selectlist(),this.$element.find(".selectlist").selectlist(),this.$startDate.datepicker(this.options.startDateOptions),this.$startTime.combobox(),this.$startTime.find("input").val()===""&&this.$startTime.combobox("selectByIndex",0),this.$repeatIntervalSpinbox.find("input").val()==="0"?this.$repeatIntervalSpinbox.spinbox({value:1,min:1}):this.$repeatIntervalSpinbox.spinbox({min:1}),this.$endAfter.spinbox({value:1,min:1}),this.$endDate.datepicker(this.options.endDateOptions),this.$element.find(".radio-custom").radio(),this.$repeatIntervalSelect.on("changed.fu.selectlist",e.proxy(this.repeatIntervalSelectChanged,this)),this.$endSelect.on("changed.fu.selectlist",e.proxy(this.endSelectChanged,this)),this.$element.find(".repeat-days-of-the-week .btn-group .btn").on("change.fu.scheduler",function(e,t){r.changed(e,t,!0)}),this.$element.find(".combobox").on("changed.fu.combobox",e.proxy(this.changed,this)),this.$element.find(".datepicker").on("changed.fu.datepicker",e.proxy(this.changed,this)),this.$element.find(".selectlist").on("changed.fu.selectlist",e.proxy(this.changed,this)),this.$element.find(".spinbox").on("changed.fu.spinbox",e.proxy(this.changed,this)),this.$element.find(".repeat-monthly .radio-custom, .repeat-yearly .radio-custom").on("change.fu.scheduler",e.proxy(this.changed,this))};n.prototype={constructor:n,destroy:function(){var t;return this.$element.find("input").each(function(){e(this).attr("value",e(this).val())}),this.$element.find(".datepicker .calendar").empty(),t=this.$element[0].outerHTML,this.$element.find(".combobox").combobox("destroy"),this.$element.find(".datepicker").datepicker("destroy"),this.$element.find(".selectlist").selectlist("destroy"),this.$element.find(".spinbox").spinbox("destroy"),this.$element.find(".radio-custom").radio("destroy"),this.$element.remove(),t},changed:function(t,n,r){r||t.stopPropagation(),this.$element.trigger("changed.fu.scheduler",{data:n!==undefined?n:e(t.currentTarget).data(),originalEvent:t,value:this.getValue()})},disable:function(){this.toggleState("disable")},enable:function(){this.toggleState("enable")},setUtcTime:function(e,t,n){function s(e){return(e<10?"0":"")+e}var r=e.split("-"),i=t.split(":"),o=new Date(Date.UTC(r[0],r[1]-1,r[2],i[0],i[1],i[2]?i[2]:0));if(n==="Z")o.setUTCHours(o.getUTCHours()+0);else{var u="(.)",a=".*?",f="\\d",l=".*?",c="(\\d)",h=new RegExp(u+a+f+l+c,["i"]),p=h.exec(n);if(p!==null){var d=p[1],v=p[2],m=d==="+"?1:-1;o.setUTCHours(o.getUTCHours()+m*parseInt(v,10))}}var g=o.getTimezoneOffset();return o.setMinutes(g),o},endSelectChanged:function(e,t){var n,r;t?r=t.value:(n=this.$endSelect.selectlist("selectedItem"),r=n.value),this.$endAfter.parent().addClass("hidden"),this.$endAfter.parent().attr("aria-hidden","true"),this.$endDate.parent().addClass("hidden"),this.$endDate.parent().attr("aria-hidden","true"),r==="after"?(this.$endAfter.parent().removeClass("hide hidden"),this.$endAfter.parent().attr("aria-hidden","false")):r==="date"&&(this.$endDate.parent().removeClass("hide hidden"),this.$endDate.parent().attr("aria-hidden","false"))},getValue:function(){var t=this.$repeatIntervalSpinbox.spinbox("value"),n="",r=this.$repeatIntervalSelect.selectlist("selectedItem").value,i;this.$startTime.combobox("selectedItem").value?(i=this.$startTime.combobox("selectedItem").value,i=i.toLowerCase()):i=this.$startTime.combobox("selectedItem").text.toLowerCase();var s=this.$timeZone.selectlist("selectedItem"),o;o=function(e,t){var n="",r;return n+=e.getFullYear(),n+=t,r=e.getMonth()+1,n+=r<10?"0"+r:r,n+=t,r=e.getDate(),n+=r<10?"0"+r:r,n};var u,a,f,l,c,h,p,d;p=""+o(this.$startDate.datepicker("getDate"),"-"),p+="T",f=i.search("am")>=0,l=i.search("pm")>=0,i=e.trim(i.replace(/am/g,"").replace(/pm/g,"")).split(":"),i[0]=parseInt(i[0],10),i[1]=parseInt(i[1],10),f&&i[0]>11?i[0]=0:l&&i[0]<12&&(i[0]+=12),p+=i[0]<10?"0"+i[0]:i[0],p+=":",p+=i[1]<10?"0"+i[1]:i[1],p+=s.offset==="+00:00"?"Z":s.offset,r==="none"?n="FREQ=DAILY;INTERVAL=1;COUNT=1;":r==="hourly"?(n="FREQ=HOURLY;",n+="INTERVAL="+t+";"):r==="daily"?(n+="FREQ=DAILY;",n+="INTERVAL="+t+";"):r==="weekdays"?(n+="FREQ=DAILY;",n+="BYDAY=MO,TU,WE,TH,FR;",n+="INTERVAL=1;"):r==="weekly"?(a=[],this.$element.find(".repeat-days-of-the-week .btn-group input:checked").each(function(){a.push(e(this).data().value)}),n+="FREQ=WEEKLY;",n+="BYDAY="+a.join(",")+";",n+="INTERVAL="+t+";"):r==="monthly"?(n+="FREQ=MONTHLY;",n+="INTERVAL="+t+";",d=this.$element.find("input[name=repeat-monthly]:checked").val(),d==="bymonthday"?(u=parseInt(this.$element.find(".repeat-monthly-date .selectlist").selectlist("selectedItem").text,10),n+="BYMONTHDAY="+u+";"):d==="bysetpos"&&(a=this.$element.find(".month-days").selectlist("selectedItem").value,h=this.$element.find(".month-day-pos").selectlist("selectedItem").value,n+="BYDAY="+a+";",n+="BYSETPOS="+h+";")):r==="yearly"&&(n+="FREQ=YEARLY;",d=this.$element.find("input[name=repeat-yearly]:checked").val(),d==="bymonthday"?(c=this.$element.find(".repeat-yearly-date .year-month").selectlist("selectedItem").value,u=this.$element.find(".year-month-day").selectlist("selectedItem").text,n+="BYMONTH="+c+";",n+="BYMONTHDAY="+u+";"):d==="bysetpos"&&(a=this.$element.find(".year-month-days").selectlist("selectedItem").value,h=this.$element.find(".year-month-day-pos").selectlist("selectedItem").value,c=this.$element.find(".repeat-yearly-day .year-month").selectlist("selectedItem").value,n+="BYDAY="+a+";",n+="BYSETPOS="+h+";",n+="BYMONTH="+c+";"));var v=this.$endSelect.selectlist("selectedItem").value,m="";r!=="none"&&(v==="after"?m="COUNT="+this.$endAfter.spinbox("value")+";":v==="date"&&(m="UNTIL="+o(this.$endDate.datepicker("getDate"),"")+";")),n+=m;var g={startDateTime:p,timeZone:{name:s.name,offset:s.offset},recurrencePattern:n};return g},repeatIntervalSelectChanged:function(e,t){var n,r,i;t?(r=t.value,i=t.text):(n=this.$repeatIntervalSelect.selectlist("selectedItem"),r=n.value,i=n.text),this.$repeatIntervalTxt.text(i);switch(r.toLowerCase()){case"hourly":case"daily":case"weekly":case"monthly":this.$repeatIntervalPanel.removeClass("hide hidden"),this.$repeatIntervalPanel.attr("aria-hidden","false");break;default:this.$repeatIntervalPanel.addClass("hidden"),this.$repeatIntervalPanel.attr("aria-hidden","true")}this.$recurrencePanels.addClass("hidden"),this.$recurrencePanels.attr("aria-hidden","true"),this.$element.find(".repeat-"+r).removeClass("hide hidden"),this.$element.find(".repeat-"+r).attr("aria-hidden","false"),r==="none"?(this.$end.addClass("hidden"),this.$end.attr("aria-hidden","true")):(this.$end.removeClass("hide hidden"),this.$end.attr("aria-hidden","false"))},setValue:function(t){var n,r,i,s,o,u,a,f,l,c,h;if(t.startDateTime)f=t.startDateTime.split("T"),l=f[0],f[1]?(f[1]=f[1].split(":"),n=parseInt(f[1][0],10),o=f[1][1]?parseInt(f[1][1].split("+")[0].split("-")[0].split("Z")[0],10):0,u=n<12?"AM":"PM",n===0?n=12:n>12&&(n-=12),o=o<10?"0"+o:o,c=n+":"+o,f=n+":"+o+" "+u,this.$startTime.find("input").val(f),this.$startTime.combobox("selectByText",f)):c="00:00";else{c="00:00";var p=this.$startDate.datepicker("getDate");l=p.getFullYear()+"-"+p.getMonth()+"-"+p.getDate()}i="li[data",t.timeZone?(typeof t.timeZone=="string"?i+='-name="'+t.timeZone:t.timeZone.name?i+='-name="'+t.timeZone.name:i+='-offset="'+t.timeZone.offset,i+='"]',h=t.timeZone.offset,this.$timeZone.selectlist("selectBySelector",i)):t.startDateTime?(f=t.startDateTime.split("T")[1],f?f.search(/\+/)>-1?f="+"+e.trim(f.split("+")[1]):f.search(/\-/)>-1?f="-"+e.trim(f.split("-")[1]):f="+00:00":f="+00:00",h=f==="+00:00"?"Z":f,i+='-offset="'+f+'"]',this.$timeZone.selectlist("selectBySelector",i)):h="Z";if(t.recurrencePattern){a={},f=t.recurrencePattern.toUpperCase().split(";");for(r=0,s=f.length;r<s;r++)f[r]!==""&&(i=f[r].split("="),a[i[0]]=i[1]);if(a.FREQ==="DAILY")a.BYDAY==="MO,TU,WE,TH,FR"?i="weekdays":a.INTERVAL==="1"&&a.COUNT==="1"?i="none":i="daily";else if(a.FREQ==="HOURLY")i="hourly";else if(a.FREQ==="WEEKLY"){if(a.BYDAY){i=this.$element.find(".repeat-days-of-the-week .btn-group"),i.find("label").removeClass("active"),f=a.BYDAY.split(",");for(r=0,s=f.length;r<s;r++)i.find('input[data-value="'+f[r]+'"]').prop("checked",!0).parent().addClass("active")}i="weekly"}else a.FREQ==="MONTHLY"?(this.$element.find(".repeat-monthly input").removeAttr("checked").removeClass("checked"),this.$element.find(".repeat-monthly label.radio-custom").removeClass("checked"),a.BYMONTHDAY?(f=this.$element.find(".repeat-monthly-date"),f.find("input").addClass("checked").prop("checked",!0),f.find("label.radio-custom").addClass("checked"),f.find(".selectlist").selectlist("selectByValue",a.BYMONTHDAY)):a.BYDAY&&(f=this.$element.find(".repeat-monthly-day"),f.find("input").addClass("checked").prop("checked",!0),f.find("label.radio-custom").addClass("checked"),a.BYSETPOS&&f.find(".month-day-pos").selectlist("selectByValue",a.BYSETPOS),f.find(".month-days").selectlist("selectByValue",a.BYDAY)),i="monthly"):a.FREQ==="YEARLY"?(this.$element.find(".repeat-yearly input").removeAttr("checked").removeClass("checked"),this.$element.find(".repeat-yearly label.radio-custom").removeClass("checked"),a.BYMONTHDAY?(f=this.$element.find(".repeat-yearly-date"),f.find("input").addClass("checked").prop("checked",!0),f.find("label.radio-custom").addClass("checked"),a.BYMONTH&&f.find(".year-month").selectlist("selectByValue",a.BYMONTH),f.find(".year-month-day").selectlist("selectByValue",a.BYMONTHDAY)):a.BYSETPOS&&(f=this.$element.find(".repeat-yearly-day"),f.find("input").addClass("checked").prop("checked",!0),f.find("label.radio-custom").addClass("checked"),f.find(".year-month-day-pos").selectlist("selectByValue",a.BYSETPOS),a.BYDAY&&f.find(".year-month-days").selectlist("selectByValue",a.BYDAY),a.BYMONTH&&f.find(".year-month").selectlist("selectByValue",a.BYMONTH)),i="yearly"):i="none";if(a.COUNT)this.$endAfter.spinbox("value",parseInt(a.COUNT,10)),this.$endSelect.selectlist("selectByValue","after");else if(a.UNTIL){f=a.UNTIL,f.length===8&&(f=f.split(""),f.splice(4,0,"-"),f.splice(7,0,"-"),f=f.join(""));var d=this.$timeZone.selectlist("selectedItem"),v=d.offset==="+00:00"?"Z":d.offset;l=f;var m=this.setUtcTime(l,c,v);this.$endDate.datepicker("setDate",m),this.$endSelect.selectlist("selectByValue","date")}else this.$endSelect.selectlist("selectByValue","never");this.endSelectChanged(),a.INTERVAL&&this.$repeatIntervalSpinbox.spinbox("value",parseInt(a.INTERVAL,10)),this.$repeatIntervalSelect.selectlist("selectByValue",i),this.repeatIntervalSelectChanged()}var g=this.setUtcTime(l,c,h);this.$startDate.datepicker("setDate",g)},toggleState:function(e){this.$element.find(".combobox").combobox(e),this.$element.find(".datepicker").datepicker(e),this.$element.find(".selectlist").selectlist(e),this.$element.find(".spinbox").spinbox(e),this.$element.find(".radio-custom").radio(e),e==="disable"?e="addClass":e="removeClass",this.$element.find(".repeat-days-of-the-week .btn-group")[e]("disabled")},value:function(e){return e?this.setValue(e):this.getValue()}},e.fn.scheduler=function(t){var r=Array.prototype.slice.call(arguments,1),i,s=this.each(function(){var s=e(this),o=s.data("fu.scheduler"),u=typeof t=="object"&&t;o||s.data("fu.scheduler",o=new n(this,u)),typeof t=="string"&&(i=o[t].apply(o,r))});return i===undefined?s:i},e.fn.scheduler.defaults={},e.fn.scheduler.Constructor=n,e.fn.scheduler.noConflict=function(){return e.fn.scheduler=t,this},e(document).on("mousedown.fu.scheduler.data-api","[data-initialize=scheduler]",function(t){var n=e(t.target).closest(".scheduler");n.data("fu.scheduler")||n.scheduler(n.data())}),e(function(){e("[data-initialize=scheduler]").each(function(){var t=e(this);if(t.data("scheduler"))return;t.scheduler(t.data())})})}(e)}),define("js/view",["require","taist","jquery","underscore","tpl!tpls/inputText.html","tpl!tpls/inputSelectList.html","tpl!tpls/inputPillbox.html","tpl!tpls/importToolbar.html","tpl!tpls/importProperties.html","tpl!tpls/inputButton.html","tpl!tpls/userInfo.html","js/message","js/demand","js/googleSheets","js/utils","fuelux"],function(e){var t=e("taist"),n=e("jquery"),r=e("underscore"),i=n.Deferred(),s=n.Deferred(),o=("x"+Math.random()).replace(".",""),u=e("tpl!tpls/inputText.html"),a=e("tpl!tpls/inputSelectList.html"),f=e("tpl!tpls/inputPillbox.html"),l=e("tpl!tpls/importToolbar.html"),c=e("tpl!tpls/importProperties.html"),h=e("tpl!tpls/inputButton.html"),p=e("tpl!tpls/userInfo.html"),d=e("js/message"),v=e("js/demand"),m=e("js/googleSheets"),g=e("js/utils");e("fuelux");var y={googleLoggingFail:g.logData({title:"Пользователь Google не аутентифицирован",advice:"Проверьте, что всплывающее окно Google для аутентификации не заблокировано браузером, возможно вы не видите его, проверьте окно в панели задач системы",cause:r.template("Причина: <%=JSON.stringify(data)%>"),status:"error"}),propertyDialogFail:g.logData({title:"Ошибка загрузки данных для настройки импорта",cause:r.template("Причина: <%=JSON.stringify(data)%>"),status:"error"})};return function(){function T(e){return n.when(e.spreadsheetUrl).then(g.tryCatch(k)).then(g.combineData(["key"])).then(g.extendData({googleUser:e.googleUser})).then(g.tryCatch(m.getWorksheets)).then(g.tryCatch(N))}function N(e){return r.map(e,function(e){return{text:e.title,value:e.uri.href,attr:{"class":"btn-xs"}}})}function C(e){E.notify(e)}function k(e){var t=e.match(/spreadsheets\/private\/full\/(.*)/);if(!r.isArray(t)||t.length!==2)throw new Error("Не найден ключ в url выбранной Google таблицы:"+e);return r.last(t)}function L(e){return r.map(e,function(e){return{title:e.name,value:e.uuid,attr:{"class":"btn-xs"}}})}function A(e){var t=n(l({id:o})),r=n(c({id:o}));return O(e)||(t.find(".importController").addClass(o).on("click",function(e){n(".logMessages").is(":visible")||n(".logController").click(),i.notify(e)}).end().appendTo(e.find("tbody tr:first")),r.appendTo(n("body")),r.find(".modal."+o).on("shown.bs.modal",function(){n(".logMessages").is(":visible")&&n(".logController").click()}),d.init(t.find(".logMessages"),function(e,n){t.addClass("panel-"+e).find("> .head button").removeClass("btn-info").removeClass("btn-success").removeClass("btn-warning").removeClass("btn-error").addClass("btn-"+e).end().find("> .head .bar .progress .progress-bar").text(n.title).removeClass("active").removeClass("progress-bar-info").removeClass("progress-bar-success").removeClass("progress-bar-warning").removeClass("progress-bar-error").addClass("progress-bar-"+e).addClass(e==="info"?"active":"").end()})),t}function O(e){return e.find("."+o).length!==0}function M(e){function o(e){function a(e){return function(t){function o(){return r.chain(function(e){var r=n(e.target);t.save(r.val())}).debounce(1e3).value()}r.extend(t,{_:r});var i=t.tpl?n(t.tpl(t)):n(u(t));if(r.isUndefined(t.tpl)){var s=i.find("input");s.val(t.value),s.on("change, keyup",o())}e.append(i),r.isFunction(t.create)&&t.create.call(t,i)}}function f(e){return function(t){e.toggle(t)}}var t=n(".Messages"),i=n(".properties"),o=i.find(".modal-body > div > form").empty();return r.each(e,a(o)),f(t)(!0),s.progress(f(t)),s.progress(r.partial(f(i))),t.find(".importController")}var t=e.$waitedElement,i=e.fields;O(t)&&o(i)}function D(e){var t=e.myCompanies,i=e.contragents,s=e.spreadsheets,o=e.userinfo,u=[];return E.progress(function(e){u.splice(0,u.length),r.extend(u,e)}),[{id:"sheetKey",label:"Google таблица",placeholder:"Выберите Таблицу Google",value:"",availableValues:s,selectList:function(){var e=this;return r.sortBy(e.availableValues,"title")},tpl:a,create:function(e){var t=this;e.find(".dropdown-menu").css("max-height","200px").end().find(".selectlist").selectlist("selectByValue",t.value).on("changed.fu.selectlist",function(e,n){t.save(n.value),b.notify(n.value)}),!r.isEmpty(t.availableValues)&&!r.contains(r.pluck(t.availableValues,"value"),t.value)&&(t.value="",e.find(".selectlist").selectlist("selectByValue","")),S.progress(function(e){t.update(e)})},update:function(e){var t=this;t.availableValues.splice(0,t.availableValues.length),r.extend(t.availableValues,e);var i=n("#taist-"+t.id+".selectlist"),s=r.template(["",'  <li data-value=""><a href="#"><%=placeholder%></a></li>','  <% _.each(_.result(this, "selectList"), function(value) { %>','    <li data-value="<%=value.value%>">','      <a href="<%=value.value%>">',"        <%=value.title%>","      </a>","    </li>","  <% }) %>"].join("")),o=n(s.call(t,t));i.find("> .dropdown-menu").html(o)},save:j},{id:"sheets",label:"Листы из Google таблицы для импорта данных",placeholder:"нажмите пробел",value:"",availableValues:u,tpl:f,create:function(e){function i(e){var n=r.pluck(t.availableValues,"value"),i=r.contains(n,e);return{text:i?r.findWhere(t.availableValues,{value:e}).text:"Not found worksheet:"+e,value:e,attr:{"class":["btn-xs",i?"":"btn-danger"].join(" ")}}}function s(t){e.find(".pillbox").pillbox("addItems",t)}var t=this;e.find(".pillbox").pillbox({edit:!1,onKeyDown:function(e,n){n.call(null,{data:t.availableValues})},onAdd:function(n,i){var s=r.pluck(e.find(".pillbox").pillbox("items"),"value"),o=r.contains(s,n.value),u=r.chain(t.availableValues).pluck("value").contains(n.value).value();!o&&u&&(i(n),s=r.pluck(e.find(".pillbox").pillbox("items"),"value"),t.save(s.length>0?s.join():s))}}),e.find(".pillbox").on("added.fu.pillbox removed.fu.pillbox",function(){var e=r.chain(n(this).pillbox("items")).pluck("value").value();t.save(e.length>0?e.join():e)}),r.chain(r.isEmpty(t.value)?[]:t.value.split(",")).map(i).each(s)},save:j},{id:"targetAgentUuid",label:"Контрагент",placeholder:"Выберите Контрагента",value:"",availableValues:i,selectList:r.sortBy(i,"title"),tpl:a,create:function(e){var t=this;e.find(".dropdown-toggle").dropdown().end().find(".dropdown-menu").css("max-height","200px").end().find(".selectlist").selectlist("selectByValue",t.value).on("changed.fu.selectlist",function(e,n){t.save(n.value)}),!r.isEmpty(t.availableValues)&&!r.contains(r.pluck(t.availableValues,"value"),t.value)&&(t.value="",e.find(".selectlist").selectlist("selectByValue",""))},save:j},{id:"sourceAgentUuid",label:"Юр. лицо отпускающее товар",placeholder:"Выберите Компанию",value:"",availableValues:t,selectList:r.sortBy(t,"title"),tpl:a,create:function(e){var t=this;e.find(".dropdown-toggle").dropdown().end().find(".dropdown-menu").css("max-height","200px").end().find(".selectlist").selectlist("selectByValue",t.value).on("changed.fu.selectlist",function(e,n){t.save(n.value)}),!r.isEmpty(t.availableValues)&&!r.contains(r.pluck(t.availableValues,"value"),t.value)&&(t.value="",e.find(".selectlist").selectlist("selectByValue",""))},save:j},{id:"googleUser",label:"Аутентифицироваться в Google",placeholder:p(o),value:"",tpl:h,create:function(e){function n(e){return e.userInfo.email}var t=this;e.on("click",function(){m.googleLogging(!0).done(w.notify).then(g.combineDeferredData([m.getUserinfo],["accessToken","userInfo"])).done(r.bind(t.update,t)).then(n).done(function(e){t.save(e)})})},update:function(e){var t=this;t.placeholder=p(e.userInfo),n("#taist-"+t.id).html(t.placeholder)},save:j}]}function P(e){function t(e){return r.isUndefined(r.findWhere(e.availableSpreadsheets,{value:e.spreadsheetUrl}))?(g.logData({title:"Нет доступа!",cause:r.template("Для пользователя <%=data.googleUser%> не существует или не доступна электронная таблица <%=data.spreadsheetUrl%>"),advice:"Совет: авторизуйтесь в диалоге настроек под Google пользователем, который имеет доступ к указанной в диалоге настроек таблице",status:"warning"})(e),[]):T(e)}return r.isEmpty(n.trim(e.fields[0].value))?e:n.when(x,e.fields[0].value,e.fields[0].availableValues).then(g.combineData(["googleUser","spreadsheetUrl","availableSpreadsheets"])).then(t).done(C).then(r.constant(e)).promise()}function H(e){return d.log({title:"Получение настроек из tai.st сервиса"},"info"),n.when.apply(null,r.map(e,B)).done(g.logData({title:r.template("Получил настройки из tai.st"),cause:r.template("<%=JSON.stringify(arguments)%>"),status:"success"})).then(r.constant(e)).promise()}function B(e){if(r.isUndefined(e.value))return e;var i=n.Deferred();return t.companyData.get(e.id,function(t,n){r.isNull(t)||i.reject(t),e.value=n,i.resolve(n)}),i.promise()}function j(e){var n=this;d.log({title:r.template("Сохранение <%=label%>")(n),cause:r.template("значение: <%=newValue%>")(r.extend({},n,{newValue:e}))},"info"),t.companyData.set(n.id,e,function(){n.value=e,d.log({title:r.template("<%=label%> сохранен")(n),cause:r.template("значение: <%=value%>")(n)},"success")})}var e=new n.Deferred,b=new n.Deferred,w=new n.Deferred,E=new n.Deferred,S=new n.Deferred,x=B({id:"googleUser",value:""}).promise();return t.hash.when(/^demand/,function(){var i=".pump-title-panel";t.wait.elementRender(i,function(t){if(location.hash.match(/^#demand/)){var i=v.getContragents().then(L),s=v.getMyCompanies().then(L),o=x.done(g.logData({title:"Загрузил Google пользователя",cause:r.template("значение: <%=JSON.stringify(data)%>"),status:"info"})).then(m.googleLogging).fail(y.googleLoggingFail),u=o.then(m.getSpreadSheets),a=o.then(m.getUserinfo);n.when(s,i,a,u,A(t)).then(g.combineData(["myCompanies","contragents","userinfo","spreadsheets","$messages"])).then(g.extendData({availableSheetsDeffered:E})).then(D).then(H).then(g.combineData(["fields"])).then(g.extendData({$waitedElement:t})).then(g.tryCatch(P)).done(M).done(e.resolve).fail(y.propertyDialogFail)}}),s.notify(!0)}),t.hash.when(/^(demand\?edit.+$)|^(?!demand)/,function(){s.notify(!1)}),b.progress(function(e){n.when(x,e).then(g.combineData(["googleUser","spreadsheetUrl"])).then(T).done(C).fail(g.inform("error"))}),w.progress(function(e){m.getSpreadSheets(e).then(S.notify)}),{sync:i.promise(),load:e}}}),define("js/app",["require","taist","version","js/view","js/demand","js/googleSheets","jquery","underscore","js/message","js/utils"],function(e){function c(){return{title:"Данные успешно импортированы!",cause:"",advice:""}}function h(e){return e instanceof Error?{code:"unknown",title:"Неизвестная ошибка!",cause:e?"Причина:"+e:"Причина неизвестна",advice:"Совет: проверьте все настройки импорта, и попробуйте снова повторить ошибку, чтобы запомнить последовательность ее возникновения, опишите ошибку в письме и отправьте письмо по адресу alexhalf@gmail.com",status:"error"}:(t.log("translateUnknownError",e),e)}var t=e("taist"),n=e("version"),r=e("js/view")(),i=e("js/demand"),s=e("js/googleSheets"),o=e("jquery"),u=e("underscore"),a=e("js/message"),f=e("js/utils"),l={};return function(){function d(){o(".refresh-button .b-tool-button").get(0).click()}function v(t){return o.when.apply(o,u.map(t,function(t){return s.getSheetsJSON(t,{targetAgentUuid:e[2].value,sourceAgentUuid:e[3].value})})).then(function(){return u.flatten(arguments)}).promise()}function m(e){return o.when(e).done(p.preCheckWarehouses).then(f.tryCatch(i.checkWarehouses)).done(p.preCheckGoods).then(f.tryCatch(i.checkGoods)).then(f.tryCatch(i.checkDemands)).done(p.preUpdateDemands).then(f.tryCatch(i.updateDemands)).promise()}t.log(n);var e=[],p={preSheetsGids:f.logData({title:"Получение идентификаторов листов google sheet документа",status:"info"}),afterSheetsGids:f.logData({title:u.template("Получил идентификаторы: <%=data.length%> из диалога настроек"),cause:u.template("<%=JSON.stringify(data)%>"),status:"success"}),preGetSheetsData:f.logData({title:"Получение данных из Google Таблицы",status:"info"}),afterGetSheetsData:f.logData({title:"Получены данные из Google Таблицы",cause:u.template("<%=JSON.stringify(data)%>"),status:"success"}),preImportDemands:f.logData({title:"Создание отгрузок в Мой Склад",status:"info"}),preCheckWarehouses:f.logData({title:"Проверка складов в Мой Склад",status:"info"}),preCheckGoods:f.logData({title:"Проверка товаров в Мой Склад",status:"info"}),preUpdateDemands:f.logData({title:u.template("Импорт <%=data.length%> новых смен в Мой Склад"),cause:u.template("<%=JSON.stringify(data)%>"),status:"info"})};r.sync.progress(function(){function t(t){return e=t.fields,u.isEmpty(e[0].value)?f.reject({code:"emptygids",title:"Нет данных для импорта!",cause:"Причина: не выбрана Google таблица",advice:"Совет: перейдите в диалог настроек (=) и выберите доступную пользователю Google таблицу",status:"warning"}):t}function n(t){function i(e){return u.contains(n,e.value)}e=t.fields;if(u.isEmpty(o.trim(e[1].value)))return f.reject({code:"emptygids",title:"Нет данных для импорта!",cause:["Причина: нет данных в поле",e[1].label].join(" "),advice:["Совет: Выберите в настройках импорта листы в поле",e[1].label,"из списка нажав пробел в поле ввода"].join(" "),status:"warning"});if(u.chain([e[2].value]).map(o.trim).reject(u.isEmpty).value().length<1)return f.reject({code:"emptyTargetAgent",title:"Не задан контрагент!",cause:"Причина: не указан uuid идентификатор контрагента, см. диалог настройки",advice:"Совет: uuid контрагента вы можете получить из url при просмотре контрагента в Мой Склад",status:"warning"});if(u.chain([e[3].value]).map(o.trim).reject(u.isEmpty).value().length<1)return f.reject({code:"emptySourceAgent",title:"Не задано юр. лицо!",cause:"Причина: не указан uuid юр. лица, см. диалог настройки",advice:"Совет: uuid юр. лица вы можете получить из url при просмотре контрагента в Мой Склад",status:"warning"});var n=e[1].value.split(","),r=u.chain(e[1]).result("availableValues").filter(i).value();return u.isEmpty(r)?f.reject({code:"emptyWorksheets",title:"Нет данных!",cause:"Причина: не выбрано ни одного листа для импорта",advice:"Совет: проверьте что в настройках вы задали хотя бы один лист для импорта, если лист задан, то возможно он и таблица Google доступна в другом эккаунте Google, в этом случае нажмите кнопку Аутентифицироваться как другой пользователь Google",status:"warning"}):r}l={},a.log("Импорт отгрузок"),o.when(r.load.done(p.preSheetsGids).then(f.tryCatch(t)).then(f.tryCatch(n)).done(p.afterSheetsGids).done(p.preGetSheetsData).then(f.tryCatch(v)).done(p.afterGetSheetsData)).done(p.preImportDemands).then(m).done(d).then(c,h).done(f.inform("info")).fail(f.inform("error"))})}}),define("main",["require"],function(e){return function(t,n){define("taist",function(){return t}),define("entryPoint",function(){return n}),define("jquery",function(){return window.jQuery?window.jQuery:window.$}),define("version",function(){return"moysklad-import-google-sheets-0.6.0"}),e(["js/app"],function(e){e()})}}),{start:function(e,t){return require(["main"],function(n){return n(e,t)})}}}